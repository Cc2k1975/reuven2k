<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>שידור חי</title>
<style>
body {
  margin:0;
  overflow:hidden;
  background:#000;
  font-family:"Heebo",Arial,sans-serif;
}

/* כל הזירה שנכנסת למסך מלא */
.player-shell {
  position:fixed;
  inset:0;
  width:100vw;
  height:100vh;
  background:#000;
  overflow:hidden;
}

/* ---------------- VIDEO LAYER ---------------- */
.video-layer {
  position:absolute;
  inset:0;
  background:#000;
  overflow:hidden;
}

.rotator {
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%, -50%) rotate(-90deg) scale(1.7);
  transform-origin:center center;
  background:#000;
  display:flex;
  justify-content:center;
  align-items:center;
  width:100vw;
  height:100vh;
}

.rotator iframe {
  border:none;
  width:100vw;
  height:100vh;
  background:#000;
}

/* ---------------- UI LAYER ---------------- */
.ui-layer {
  position:absolute;
  inset:0;
  pointer-events:none; /* ברירת מחדל אין לחיצות. */
  font-family:"Heebo",Arial,sans-serif;
  color:#fff;
}

/* סקורבורד: פינה שמאל למעלה */
.score-overlay-wrapper {
  position:absolute;
  top:12px;
  left:8px;
  z-index:100;
  pointer-events:auto; /* אפשר אם תרצה בעתיד */
  display:flex;
  flex-direction:row;
  align-items:center;
  font-size:0.8rem;
  font-weight:600;
  line-height:1.2;
  font-family:"Heebo",Arial,sans-serif;
}

/* נבנה מראה "טלוויזיה": כל מקטע בקופסה כהה/סגולה, תוצאה על צהוב, שעון בלבן */
.score-box {
  display:flex;
  align-items:center;
  background:#1a1446;
  border-radius:4px;
  box-shadow:0 4px 12px rgba(0,0,0,0.8);
  overflow:hidden;
  border:1px solid rgba(0,0,0,0.6);
  direction:ltr; /* כדי שהסדר יהיה קבוע: [HOME NAME][HOME SCORE][TIME][AWAY SCORE][AWAY NAME] */
}

/* שם קבוצה */
.team-label {
  color:#fff;
  padding:4px 8px;
  font-size:0.8rem;
  max-width:32vw;
  white-space:nowrap;
  text-overflow:ellipsis;
  overflow:hidden;
  background:#1a1446;
}

/* תוצאה */
.team-score-block {
  background:#f4dd3a;
  color:#000;
  padding:4px 6px;
  font-weight:700;
  min-width:24px;
  text-align:center;
  font-family:"Roboto Mono","Courier New",monospace;
  font-size:0.8rem;
  border-left:1px solid rgba(0,0,0,0.4);
  border-right:1px solid rgba(0,0,0,0.4);
}

/* שעון */
.timer-block {
  background:#ffffff;
  color:#000000;
  font-weight:700;
  padding:4px 8px;
  min-width:50px;
  text-align:center;
  font-family:"Roboto Mono","Courier New",monospace;
  font-size:0.8rem;
  border-left:1px solid rgba(0,0,0,0.4);
  border-right:1px solid rgba(0,0,0,0.4);
}

/* האייקון הסודי שלך: פינה ימין למעלה */
.channel-logo {
  position:absolute;
  top:8px;
  right:8px;
  width:52px;
  height:52px;
  border-radius:50%;
  border:2px solid rgba(255,255,255,0.4);
  box-shadow:0 0 10px rgba(0,0,0,0.7);
  cursor:pointer;
  z-index:150;
  object-fit:cover;
  pointer-events:auto; /* כן, פה צריך לחיצות */
  background:#000;
}

/* כפתור מסך מלא – במרכז לפני כניסה למסך מלא */
.fullscreen-btn {
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  z-index:200;
  background:rgba(0,0,0,0.55);
  color:#00ffa9;
  border:1px solid rgba(0,255,169,0.6);
  border-radius:12px;
  padding:14px 26px;
  font-size:1.2rem;
  font-weight:600;
  cursor:pointer;
  box-shadow:0 8px 24px rgba(0,0,0,0.8);
  pointer-events:auto; /* חייב כי לוחצים עליו */
}

/* הפופאפ של השליטה */
.edit-popup {
  position:absolute;
  top:70px;
  right:50%;
  transform:translateX(50%);
  background:#1a1f2b;
  color:#fff;
  border-radius:12px;
  box-shadow:0 30px 60px rgba(0,0,0,0.9);
  border:1px solid rgba(255,255,255,0.15);
  padding:20px;
  width:320px;
  max-width:90vw;
  font-size:0.9rem;
  line-height:1.5;
  display:none;
  z-index:300;
  text-align:right;
  pointer-events:auto; /* כדי שהכפתורים יעבדו */
}
.edit-popup h2 {
  font-size:1rem;
  text-align:center;
  margin:0 0 14px;
  color:#fff;
}
.edit-field {
  margin-bottom:14px;
  display:flex;
  flex-direction:column;
  gap:8px;
}
.edit-field label {
  font-size:0.8rem;
  color:#9aa3b2;
}
.team-line {
  display:flex;
  gap:8px;
  width:100%;
}
.team-line input {
  flex:1;
}
.score-input {
  flex:0 0 60px;
  max-width:60px;
  text-align:center;
}
.edit-input {
  border-radius:8px;
  border:1px solid rgba(255,255,255,0.2);
  background:#0f1115;
  color:#fff;
  padding:10px 12px;
  font-size:0.9rem;
  outline:none;
  width:100%;
}
.ctl-btn {
  width:100%;
  padding:10px 12px;
  border:1px solid rgba(255,255,255,0.2);
  background:#0f1115;
  color:#fff;
  border-radius:8px;
  cursor:pointer;
  margin-bottom:8px;
  font-size:0.9rem;
  font-weight:600;
  text-align:center;
}
</style>
</head>
<body>

<div class="player-shell" id="videoContainer">

  <!-- שכבת הווידאו -->
  <div class="video-layer">
    <div class="rotator">
      <iframe id="livePlayer"
        src="https://www.youtube.com/embed/live_stream?channel=UCu2doG-TFmd4b2paosdg1xg&autoplay=1&mute=1&playsinline=1"
        allow="autoplay; encrypted-media; picture-in-picture"
      ></iframe>
    </div>
  </div>

  <!-- שכבת ה-UI מעל הווידאו -->
  <div class="ui-layer">

    <!-- הסקורבורד בפינה שמאל למעלה -->
    <div class="score-overlay-wrapper">
      <div class="score-box">
        <!-- ביתית -->
        <div class="team-label" id="teamHome_name">הפועל חיפה</div>
        <div class="team-score-block" id="teamHome_score">0</div>

        <!-- שעון -->
        <div class="timer-block" id="liveTimer">00:00</div>

        <!-- אורחת -->
        <div class="team-score-block" id="teamAway_score">0</div>
        <div class="team-label" id="teamAway_name">מכבי חיפה</div>
      </div>
    </div>

    <!-- איקון סודי בצד ימין למעלה -->
    <img class="channel-logo" id="channelLogo"
      src="https://yt3.ggpht.com/XEIE69D8DP1huYwLhSrHbEPhU9nfLjqSX7P8mZ8NLceUeDX68BoH1ORcxWy-NufREOy9xo1Dkw=s600-c-k-c0x00ffffff-no-rj-rp-mo"
      alt="ערוץ">

    <!-- כפתור מסך מלא במרכז (נעלם אחרי שנכנסנו למסך מלא) -->
    <button class="fullscreen-btn" id="fullscreenBtn">⛶ מסך מלא</button>

    <!-- הפופאפ של השליטה -->
    <div class="edit-popup" id="editPopup">
      <h2>שליטה בשידור</h2>

      <div class="edit-field">
        <label>שם הליגה</label>
        <input class="edit-input" id="league_input" value="שידורי חי הפועל חיפה נערים א' 2009">
      </div>

      <div class="edit-field">
        <label>קבוצה ביתית + תוצאה</label>
        <div class="team-line">
          <input id="teamHome_input" class="edit-input" value="הפועל חיפה">
          <input id="scoreHome_input" class="edit-input score-input" type="number" min="0" value="0">
        </div>
      </div>

      <div class="edit-field">
        <label>קבוצה אורחת + תוצאה</label>
        <div class="team-line">
          <input id="teamAway_input" class="edit-input" value="מכבי חיפה">
          <input id="scoreAway_input" class="edit-input score-input" type="number" min="0" value="0">
        </div>
      </div>

      <button class="ctl-btn" id="startBtn">הפעל שעון</button>
      <button class="ctl-btn" id="pauseBtn">הפסקת מחצית / המשך</button>
      <button class="ctl-btn" id="resetBtn">איפוס שעון</button>
      <button class="ctl-btn" id="closePopupBtn">יציאה</button>
    </div><!-- /edit-popup -->

  </div><!-- /ui-layer -->
</div><!-- /player-shell -->

<script>
/* ===== מסך מלא ===== */
const videoContainer = document.getElementById('videoContainer');
const fsBtn = document.getElementById('fullscreenBtn');

fsBtn.addEventListener('click', () => {
  if (!document.fullscreenElement) {
    videoContainer.requestFullscreen().catch(err => {
      alert('לא ניתן לעבור למסך מלא: ' + err.message);
    });
  } else {
    document.exitFullscreen();
  }
});

document.addEventListener('fullscreenchange', () => {
  if (document.fullscreenElement) {
    fsBtn.style.display = "none"; // הסתרת כפתור באמצע
  } else {
    fsBtn.style.display = "block";
  }
});

/* ===== פופאפ שליטה ===== */
const logoBtn  = document.getElementById('channelLogo');
const popup    = document.getElementById('editPopup');
const closeBtn = document.getElementById('closePopupBtn');

logoBtn.addEventListener('click', () => {
  popup.style.display = (popup.style.display === "block") ? "none" : "block";
});
closeBtn.addEventListener('click', () => {
  popup.style.display = "none";
});

/* ===== שעון ===== */
let startTime   = null;
let running     = false;
let pausedTotal = 0; // ms שנצברו עד עכשיו

function fmt(sec){
  const m = Math.floor(sec/60);
  const s = sec % 60;
  return String(m).padStart(2,"0")+":"+String(s).padStart(2,"0");
}

function tickClock(){
  const box = document.getElementById('liveTimer');
  if(!box) return;
  if(!running || startTime===null){
    const stoppedSec = Math.floor(pausedTotal/1000);
    box.textContent = fmt(stoppedSec);
    return;
  }
  const now = Date.now();
  const totalMs = pausedTotal + (now - startTime);
  const totalSec = Math.floor(totalMs/1000);
  box.textContent = fmt(totalSec);
}
setInterval(tickClock, 500);

document.getElementById('startBtn').addEventListener('click', ()=>{
  pausedTotal = 0;
  startTime = Date.now();
  running = true;
});

document.getElementById('pauseBtn').addEventListener('click', ()=>{
  if(running){
    pausedTotal += Date.now() - startTime;
    running = false;
    startTime = null;
  } else {
    startTime = Date.now();
    running = true;
  }
});

document.getElementById('resetBtn').addEventListener('click', ()=>{
  running = false;
  startTime = null;
  pausedTotal = 0;
  tickClock();
});

/* ===== עדכון שמות וקבוצות בלייב ===== */
function syncText(inputId, outputId, fallbackZero=false){
  const inp = document.getElementById(inputId);
  const out = document.getElementById(outputId);
  if(!inp || !out) return;
  const apply=()=>{
    let v = inp.value;
    if(fallbackZero && v.trim()==="") v="0";
    out.textContent = v;
  };
  inp.addEventListener('input',apply);
  apply();
}

// ביתית
syncText("teamHome_input","teamHome_name",false);
syncText("scoreHome_input","teamHome_score",true);

// אורחת
syncText("teamAway_input","teamAway_name",false);
syncText("scoreAway_input","teamAway_score",true);

// שם הליגה שמור לך כרגע רק בבקרות. אם תרצה נציג גם Overlay לליגה, אני מוסיף אותו ב-ui-layer בקלות.
</script>
</body>
</html>
