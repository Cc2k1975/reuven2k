<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>×ª×›× ×•×Ÿ ×˜×™×•×œ ××©×•×“×¨×’</title>
  <style>
    :root {
      --primary: #007aff;
      --bg: #f5f5f7;
      --card: #ffffff;
      --text: #1d1d1f;
      --border: #d2d2d7;
      --success: #34c759;
      --danger: #ff3b30;
    }

    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; padding: 20px; background-color: var(--bg); color: var(--text); margin: 0; }
    
    h1 { text-align: center; margin-bottom: 20px; font-weight: 700; }

    /* Dashboard Summary */
    .dashboard {
      background: var(--card);
      padding: 15px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      margin-bottom: 20px;
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      gap: 10px;
      border: 1px solid var(--border);
    }
    .stat-box {
      flex: 1;
      min-width: 150px;
      text-align: center;
    }
    .stat-title { font-size: 0.85em; color: #86868b; display: block; }
    .stat-value { font-size: 1.2em; font-weight: bold; color: var(--primary); }
    .countdown { color: var(--danger); }

    /* Form Grid */
    .form-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 15px;
      background: var(--card);
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    .form-group { display: flex; flex-direction: column; }
    .form-group.full-width { grid-column: 1 / -1; }
    
    label { font-size: 0.9em; font-weight: 600; margin-bottom: 5px; color: #333; }
    
    select, input, button { 
      font-size: 16px; 
      padding: 12px; 
      border: 1px solid var(--border); 
      border-radius: 8px; 
      background: #fff;
      width: 100%; 
      box-sizing: border-box; 
      transition: all 0.2s;
    }

    select:focus, input:focus { border-color: var(--primary); outline: none; }

    /* Buttons */
    .actions {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 20px;
    }
    
    button { 
      flex: 1; 
      cursor: pointer; 
      font-weight: 600; 
      color: white; 
      border: none; 
      min-width: 140px;
    }
    
    button:active { transform: scale(0.98); }
    .btn-save { background-color: var(--primary); }
    .btn-local { background-color: #5856d6; }
    .btn-wa { background-color: #25D366; }
    .btn-clear { background-color: var(--danger); }
    .btn-pdf { background-color: #ff9500; }

    #hotelLink { color: var(--primary); cursor: pointer; text-decoration: none; display: block; margin-top: 5px; font-size: 0.9em; }
    #hotelLink:hover { text-decoration: underline; }

    /* Table Styles */
    .table-wrapper { overflow-x: auto; margin-top: 25px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
    table { width: 100%; border-collapse: collapse; background: white; min-width: 800px; } /* Ensure scroll on mobile */
    th, td { border-bottom: 1px solid #eee; padding: 12px; text-align: right; font-size: 0.95em; vertical-align: middle; }
    th { background-color: #f2f2f7; font-weight: 600; color: #333; }
    tr:last-child td { border-bottom: none; }
    
    .time-badge {
      background: #eee;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 0.8em;
      margin-right: 5px;
    }

    /* Mobile Tweaks */
    @media (max-width: 768px) {
      body { padding: 10px; }
      .form-container { grid-template-columns: 1fr; }
      .dashboard { flex-direction: column; }
      .stat-box { border-bottom: 1px solid #eee; padding-bottom: 10px; }
      .stat-box:last-child { border-bottom: none; }
    }
  </style>
</head>
<body>

  <h1>âœˆï¸ ×ª×›× ×•×Ÿ ×˜×™×•×œ ×—×›×</h1>

  <div class="dashboard" id="dashboard">
    <div class="stat-box">
      <span class="stat-title">â³ ×¡×¤×™×¨×” ×œ××—×•×¨</span>
      <span class="stat-value countdown" id="daysToTrip">×˜×¨× × ×§×‘×¢</span>
    </div>
    <div class="stat-box">
      <span class="stat-title">ğŸ“… ×¡×”"×› ×™××™ ×˜×™×•×œ</span>
      <span class="stat-value" id="totalDays">0</span>
    </div>
    <div class="stat-box">
      <span class="stat-title">ğŸ¨ ×—×œ×•×§×ª ×œ×™×œ×•×ª</span>
      <span class="stat-value" id="cityBreakdown" style="font-size: 0.9em; font-weight: normal;">-</span>
    </div>
  </div>

  <div class="form-container">
    <div class="form-group">
      <label>ğŸ“… ×ª××¨×™×š (×™×•× ×•×©×¢×”):</label>
      <select id="date"></select>
    </div>

    <div class="form-group">
      <label>âœˆ ×˜×™×¡×” / ××¢×‘×¨:</label>
      <select id="flight"></select>
    </div>

    <div class="form-group" style="display: flex; gap: 10px;">
      <div style="flex:1">
        <label>ğŸ›« ×”××¨××”:</label>
        <input type="time" id="flightDep">
      </div>
      <div style="flex:1">
        <label>ğŸ›¬ × ×—×™×ª×”:</label>
        <input type="time" id="flightArr">
      </div>
    </div>

    <div class="form-group">
      <label>ğŸ™ ×¢×™×¨:</label>
      <select id="city"></select>
    </div>

    <div class="form-group full-width">
      <label>ğŸ¨ ××œ×•×Ÿ:</label>
      <select id="hotel" onchange="updateHotelLink()"></select>
      <span id="hotelLink" onclick="openHotelLink()"></span>
    </div>

    <div class="form-group">
      <label>ğŸ ×¤×¢×™×œ×•×ª ×‘×•×§×¨:</label>
      <select id="activity1"></select>
      <input type="text" id="act1Time" placeholder="××©×š ×–××Ÿ (×œ×“×•×’' 3 ×©×¢×•×ª)" style="margin-top:5px; font-size: 0.8em; padding: 6px;">
    </div>

    <div class="form-group">
      <label>ğŸŒ‡ ×¤×¢×™×œ×•×ª ×¢×¨×‘:</label>
      <select id="activity2"></select>
      <input type="text" id="act2Time" placeholder="××©×š ×–××Ÿ" style="margin-top:5px; font-size: 0.8em; padding: 6px;">
    </div>
  </div>

  <div class="actions">
    <button class="btn-save" onclick="savePlan()">ğŸ’¾ ×”×•×¡×£/×¢×“×›×Ÿ ×™×•×</button>
    <button class="btn-local" onclick="saveLocally()">â˜ ×©××•×¨ ×”×›×œ</button>
    <button class="btn-wa" onclick="sendToWhatsApp()">ğŸ“¤ ×•×•×˜×¡××¤</button>
    <button class="btn-pdf" onclick="printPDF()">ğŸ“„ ×©××•×¨ PDF</button>
    <button class="btn-clear" onclick="clearAll()">ğŸ§¹ ××™×¤×•×¡ ××œ×</button>
  </div>

  <div class="table-wrapper">
    <table id="savedTable" style="display:none;">
      <thead>
        <tr>
          <th>×ª××¨×™×š</th>
          <th>×ª×—×‘×•×¨×”</th>
          <th>×¢×™×¨</th>
          <th>××œ×•×Ÿ</th>
          <th>×¤×¢×™×œ×•×™×•×ª</th>
          <th>××—×™×§×”</th>
        </tr>
      </thead>
      <tbody id="savedBody"></tbody>
    </table>
  </div>

<script>
// --- × ×ª×•× ×™× ××§×•×¨×™×™× (×œ× × ××—×§×•) ---
const flights = ["×œ×œ× ××¢×‘×¨", "×˜×™×¡×” ×‘×™× ×œ××•××™×ª", "×˜×™×¡×ª ×¤× ×™×", "××¢×‘×•×¨×ª", "××•×˜×•×‘×•×¡/×•×•××Ÿ", "×¨×›×‘×ª"];
const cities = ["×‘× ×’×§×•×§ (Bangkok)", "×•×•×™×˜×¡× ×“ (Wit Sand)", "×—×•× ×”×™×Ÿ (Hua Hin)", "×œ××•×¡ (Lopburi)", "× ××§×•×Ÿ ×¨××¦'××¡×™××” (Nakhon Ratchasima)", "×¡×•×§×•×ª××™ (Sukhothai)", "×¡×•×¨××˜×× ×™ (Surat Thani)", "×¡×™×× ×¨×™×¤ (Siam Reap)", "×¡×¨××¡×™×Ÿ (Sarasins)", "×¤××™ (PAI)", "×¤×•×§×˜ (Phuket)", "×¤×˜××™×” (Pattaya)", "×¦'×× ×’ ×××™ (Chiang Mai)", "×¦'×× ×’ ×¨××™ (Chiang Rai)", "×§×•×” ×˜××• (Koh Tao)", "×§×•×¡××•×™ (Koh Samui)", "×§×•×¤×™×¤×™ (Koh Phi Phi)", "×§×•×¤× ×’×Ÿ (Koh Phangan)", "×§× ×˜×” (Kanchanaburi)", "×§×¨×‘×™ (Krabi)"];
const activities = ["--- ×œ×œ× ×¤×¢×™×œ×•×ª ---", "××•××’×•×ª", "×‘×˜×Ÿ ×’×‘", "×‘×™×§×•×¨ ×‘××§×“×©×™×", "×‘×™×§×•×¨ ×‘×¤××¨×§×™× ×œ××•××™×™×", "×’×œ×™×©×ª ×’×œ×™×", "×”×¤×œ×’×•×ª ×¡×™×¨×” ×‘× ×”×¨×•×ª", "×—×•×•×™×™×ª ×¡×¤××¨×™ ×’'×™×¤×™×", "×˜×™×•×œ×™ ×¤×™×œ×™×", "×˜×¨×§×™× ×‘×”×¨×™×", "×™×", "××•×–×™××•× ×™×", "××•×¤×¢ ", "×¡×¤× ×•××¡××’' ×ª××™×œ× ×“×™", "×¤××¨×§ ××™×", "×¦×œ×™×œ×”", "×§××¨×˜×™× ×’", "×§×•×¨×¡×™ ×‘×™×©×•×œ ×ª××™×œ× ×“×™", "×¨××¤×˜×™× ×’", "×¨×›×™×‘×” ×¢×œ ×¡×•×¡×™×", "×©×•×§×™ ×œ×™×œ×”", "×©×™×™×˜ ", "×©× ×•×¨×§×œ×™× ×’", "×ª×¦×¤×™×•×ª × ×•×£ ××”×¨×™×", "×™×•× ×—×•×¤×©×™", "×©×•×¤×™× ×’ ×‘×§× ×™×•× ×™×"];
const hotels = [{"name": "*** ×¤×•×§×˜***", "link": "nan"}, {"name": "Angsana Laguna Phuket â€“ ×¨×™×–×•×¨×˜ ××¤×•××¨ ×‘×—×•×£ ×‘×× ×’ ×˜××•, ×¢× ×‘×¨×™×›×” ×¢× ×§×™×ª ×•××ª×§× ×™× ×œ××©×¤×—×•×ª.", "link": "https://www.booking.com/hotel/th/angsana-laguna-phuket.html"}, {"name": "Burasari Phuket Resort & Spa â€“ ×¨×™×–×•×¨×˜ ×˜×¨×•×¤×™ ××¤× ×§ ×‘×œ×‘ ×¤×˜×•× ×’ ×‘×™×¥', ×¢× ×¡×¤× ×•×‘×¨×™×›×”.", "link": "https://www.booking.com/hotel/th/burasari.html"}, {"name": "Hotel Clover Patong Phuket â€“ ××œ×•×Ÿ ××•×“×¨× ×™ ×‘××™×§×•× ××¨×›×–×™ ×‘×œ×‘ ×¤×˜×•× ×’, ×¢× ×‘×¨×™×›×” ×•×©×™×¨×•×ª ××¦×•×™×Ÿ", "link": "https://www.booking.com/hotel/th/hotel-clover-patong.html"}, {"name": "InterContinental Phuket Resort â€“ ××œ×•×Ÿ ×™×•×§×¨×ª×™ ×‘×—×•×£ ×§××œ×”, ×¢× × ×•×£ ×œ×™× ×•×©×™×¨×•×ª ××¢×•×œ×”.", "link": "https://www.booking.com/hotel/th/intercontinental-phuket-resort.html"}, {"name": "JW Marriott Phuket Resort & Spa â€“ ××œ×•×Ÿ ×—××™×©×” ×›×•×›×‘×™× ×¢× ×—×•×£ ×¤×¨×˜×™, ×¡×¤× ××¤× ×§ ×•×©×™×¨×•×ª ×™×•×¦× ×“×•×¤×Ÿ.", "link": "https://www.booking.com/hotel/th/jw-marriott-phuket-resort-and-spa.html"}, {"name": "Katathani Phuket Beach Resort â€“ ××œ×•×Ÿ ×¢×œ ×—×•×£ ×§××˜×”, ×¢× ×‘×¨×™×›×•×ª, ××¡×¢×“×•×ª ×•× ×•×£ ×œ×™×.", "link": "https://www.booking.com/hotel/th/katathani-phuket-beach-resort.html"}, {"name": "Novotel Phuket Karon Beach Resort â€“ ××œ×•×Ÿ ××•×“×¨× ×™ ×¢× ×‘×¨×™×›×•×ª, ××•×¢×“×•×Ÿ ×™×œ×“×™× ×•××™×§×•× ×©×§×˜.", "link": "https://www.booking.com/hotel/th/novotel-phuket-karon-beach-resort-and-spa.html"}, {"name": "Phuket Marriott Resort & Spa, Merlin Beach â€“ ××œ×•×Ÿ ×¢× ×—×•×£ ×¤×¨×˜×™, ×‘×¨×™×›×•×ª ×•×¡×¤× ×‘×¨××” ×’×‘×•×”×”.", "link": "https://www.booking.com/hotel/th/phuket-marriott-resort-and-spa-merlin-beach.html"}, {"name": "$$The Lantern Resorts Patong$$", "link": "https://www.booking.com/hotel/th/the-lantern-resort-patong.html"}, {"name": "The Slate Phuket â€“ ×¨×™×–×•×¨×˜ ×™×•×§×¨×ª×™ ×¢× ×¢×™×¦×•×‘ ×ª×¢×©×™×™×ª×™ ×™×™×—×•×“×™, ×—×•×£ ×¤×¨×˜×™ ×•×©×™×¨×•×ª ×‘×¨××” ×’×‘×•×”×”.", "link": "https://www.booking.com/hotel/th/the-slate.html"}, {"name": "*** ×¤××˜×™×”***", "link": "nan"}, {"name": "$$The Whisper Hotel$$", "link": "https://www.booking.com/hotel/th/the-whisper.html"}, {"name": "Amari Pattaya â€“ ××œ×•×Ÿ × ×¢×™× ×•××•×“×¨× ×™ ×‘××¨×›×– ×¤××˜×™×”, ×§×¨×•×‘ ×œ××¡×¢×“×•×ª ×•×©×•×•×§×™×.", "link": "https://www.booking.com/hotel/th/amari-pattaya.html"}, {"name": "Avani Pattaya Resort â€“ ×¨×™×–×•×¨×˜ ×˜×¨×•×¤×™ ×‘×œ×‘ ×¤××˜×™×”, ×¢× ×‘×¨×™×›×” ×’×“×•×œ×”, ××¡×¢×“×•×ª ×•×©×™×¨×•×ª ××¦×•×™×Ÿ.", "link": "https://www.booking.com/hotel/th/avani-pattaya-resort.html"}, {"name": "Hilton Pattaya â€“ ××œ×•×Ÿ ×™×•×§×¨×ª×™ ×¢× × ×•×£ ×¤× ×•×¨××™ ×œ×™×, ×‘×¨×™×›×ª ×’×’ ×•××¡×¢×“×•×ª ×’×•×¨××”.", "link": "https://www.booking.com/hotel/th/hilton-pattaya.html"}, {"name": "Holiday Inn Pattaya â€“ ××œ×•×Ÿ ××•×“×¨× ×™ ×¢× × ×•×£ ×œ×™×, ×‘×¨×™×›×•×ª ×•××¡×¢×“×•×ª ××’×•×•× ×•×ª.", "link": "https://www.booking.com/hotel/th/holiday-inn-pattaya.html"}, {"name": "InterContinental Pattaya Resort â€“ ××œ×•×Ÿ ×™×•×§×¨×ª×™ ×¢× ×—×•×£ ×¤×¨×˜×™, ×¡×¤× ×•×©×™×¨×•×ª ×‘×¨××” ×’×‘×•×”×”.", "link": "https://www.booking.com/hotel/th/inter-continental-pattaya-resort.html"}, {"name": "Mercure Pattaya Ocean Resort â€“ ××œ×•×Ÿ ××©×¤×—×ª×™ ×¢× ×¤××¨×§ ××™× ×§×˜×Ÿ, ×‘×¨×™×›×•×ª ×•××™×§×•× × ×•×—.", "link": "https://www.booking.com/hotel/th/mercure-pattaya-ocean-resort.html"}, {"name": "Pattaya Discovery Beach Hotel â€“ ××œ×•×Ÿ ×§×¨×•×‘ ×œ×—×•×£, ×¢× ×—×“×¨×™× ××¨×•×•×—×™× ×•×‘×¨×™×›×”.", "link": "https://www.booking.com/hotel/th/pattaya-discovery-beach.html"}, {"name": "Royal Cliff Beach Hotel â€“ ××œ×•×Ÿ ×™×•×§×¨×ª×™ ×¢× × ×•×£ ×œ×™×, ××¡×¢×“×•×ª ×•×©×™×¨×•×ª ××¦×•×™×Ÿ.", "link": "https://www.booking.com/hotel/th/royal-cliff-beach.html"}, {"name": "The Zign Hotel â€“ ××œ×•×Ÿ ×¢× ×¢×™×¦×•×‘ ××•×“×¨× ×™, ×‘×¨×™×›×” ×’×“×•×œ×” ×•××¡×¢×“×•×ª ×˜×•×‘×•×ª.", "link": "https://www.booking.com/hotel/th/the-zign.html"}, {"name": "*** ×‘× ×’×§×•×§ ***", "link": "nan"}, {"name": "$$Sleepstation at Pratunam$$", "link": "https://www.booking.com/hotel/th/sleepstation-pratu-nam.html"}, {"name": "Banyan Tree Bangkok â€“ ××œ×•×Ÿ ×™×•×§×¨×ª×™ ×¢× ×¡×¤×, ××¡×¢×“×•×ª ×•×‘×¨ ×¢×œ ×”×’×’.", "link": "https://www.booking.com/hotel/th/banyan-tree-bangkok.html"}, {"name": " Chatrium Hotel Riverside Bangkok â€“ ××œ×•×Ÿ ×¢× × ×•×£ ×œ× ×”×¨, ×‘×¨×™×›×” ×’×“×•×œ×” ×•×©×™×¨×•×ª ××¦×•×™×Ÿ.", "link": "https://www.booking.com/hotel/th/chatrium-residence-sathon-bangkok.html"}, {"name": " Novotel Bangkok Sukhumvit 20 â€“ ××œ×•×Ÿ ××•×“×¨× ×™ ×‘××™×§×•× ××¨×›×–×™, ×§×¨×•×‘ ×œ×§× ×™×•× ×™× ×•×œ××¡×¢×“×•×ª.", "link": "https://www.booking.com/hotel/th/novotel-bangkok-sukhumvit-20.html"}, {"name": " Shangri-La Hotel Bangkok â€“ ××œ×•×Ÿ ×¢×œ ×’×“×•×ª ×”× ×”×¨, ×¢× ×©×™×¨×•×ª ××¢×•×œ×” ×•××¡×¢×“×•×ª ××’×•×•× ×•×ª.", "link": "https://www.booking.com/hotel/th/shangri-la-bangkok.html"}, {"name": " SO Sofitel Bangkok â€“ ××œ×•×Ÿ ××•×“×¨× ×™ ×¢× ×¢×™×¦×•×‘ ×™×™×—×•×“×™, ×‘×¨×™×›×” ×¢×œ ×”×’×’ ×•× ×•×£ ×œ×¢×™×¨.", "link": "https://www.booking.com/hotel/th/so-sofitel-bangkok.html"}, {"name": " The Peninsula Bangkok â€“ ××œ×•×Ÿ ×™×•×§×¨×ª×™ ×¢× × ×•×£ ×œ× ×”×¨, ×¡×¤× ×•×©×™×¨×•×ª ×‘×¨××” ×’×‘×•×”×”.", "link": "https://www.booking.com/hotel/th/the-peninsula-bangkok.html"}, {"name": "$$Baiyoke Sky Hotel$$", "link": "https://www.booking.com/hotel/th/baiyoke-sky.html"}, {"name": "$$Miloft Sathorn Hotel - SHA Plus Certified$$", "link": "https://www.booking.com/hotel/th/miloft-sathorn.html"}, {"name": "$$Spenza Hotel$$", "link": "https://www.booking.com/hotel/th/spenza.html"}, {"name": "$$The Berkeley Hotel Pratunam$$", "link": "https://www.booking.com/hotel/th/the-berkeley-pratunam-bangkok.html"}, {"name": "$$The Victory Residences Bangkok$$", "link": "https://www.booking.com/hotel/th/the-victory-executive-residences.html"}, {"name": "$$Top High Airport Link Hotel, Bangkok$$", "link": "https://www.booking.com/hotel/th/top-high-airport-link-bangkok.html"}, {"name": "Mandarin Oriental Bangkok â€“ ××œ×•×Ÿ ××¤×•××¨ ×¢× ×©×™×¨×•×ª ×™×•×¦× ×“×•×¤×Ÿ, ××¡×¢×“×•×ª ×’×•×¨××” ×•× ×•×£ ×œ× ×”×¨.", "link": "https://www.booking.com/hotel/th/mandarin-oriental-bangkok.html"}, {"name": "*** ×§××¨×‘×™ ***", "link": "nan"}, {"name": "$$Panan Krabi Resort$$", "link": "https://www.booking.com/hotel/th/panan-krabi-resort.html"}, {"name": " Holiday Inn Resort Krabi Ao Nang Beach â€“ ××œ×•×Ÿ × ×”×“×¨ ×œ××©×¤×—×•×ª, ×¢× ×‘×¨×™×›×” ×’×“×•×œ×”.", "link": "https://www.booking.com/hotel/th/holiday-inn-resort-krabi-ao-nang-beach.html"}, {"name": " Krabi Heritage Hotel â€“ ××œ×•×Ÿ ××¤× ×§ ×‘××¨×›×– ×§×¨××‘×™, ×¢× ×’×™×©×” ×§×œ×” ×œ××˜×¨×§×¦×™×•×ª.", "link": "https://www.booking.com/hotel/th/krabi-heritage.html"}, {"name": " Krabi Resort â€“ ××œ×•×Ÿ × ×¢×™× ×•×§×¨×•×‘ ×œ×—×•×£, ××ª××™× ×œ×›×œ ×¡×•×’×™ ×”×ª×™×™×¨×™×.", "link": "https://www.booking.com/hotel/th/krabi-resort.html"}, {"name": " Krabi Sands Resort â€“ ××œ×•×Ÿ ×§×˜×Ÿ ×•× ×¢×™× ×¢× ×’×™×©×” ×œ×—×•×£ ×•×©×™×¨×•×ª ××™×©×™.", "link": "https://www.booking.com/hotel/th/krabi-sands-resort.html"}, {"name": " Noppharat Resort â€“ ××œ×•×Ÿ ×§×¨×•×‘ ×œ×—×•×£ × ×•×¤××¨××˜, ×¢× ×—×“×¨×™× × ×•×—×™× ×•×‘×¨×™×›×”.", "link": "https://www.booking.com/hotel/th/noppharat-resort.html"}, {"name": "Krabi Palm Beach Resort â€“ ××œ×•×Ÿ ×¢× ×‘×¨×™×›×”, ××¡×¢×“×” ×•×’×™×©×” × ×•×—×” ×œ×—×•×£.", "link": "https://www.booking.com/hotel/th/krabi-palm-beach-resort.html"}, {"name": "Phulay Bay, A Ritz-Carlton Reserve â€“ ××ª×¨ × ×•×¤×© ×™×•×§×¨×ª×™ ×•×©×§×˜ ×¢× ×©×™×¨×•×ª ××™×©×™.", "link": "https://www.booking.com/hotel/th/phulay-bay-a-ritz-carlton-reserve.html"}, {"name": "Rayavadee â€“ ××œ×•×Ÿ ×™×•×§×¨×ª×™ ×•×‘×œ×¢×“×™ ×¢×œ ×—×•×£ ×¤×¨×˜×™, ××ª××™× ×œ× ×•×¤×© ×¨×’×•×¢.", "link": "https://www.booking.com/hotel/th/rayavadee.html"}, {"name": "*** ×¦'×× ×’ ×××™***", "link": "nan"}, {"name": "Anantara Chiang Mai Resort â€“ ××œ×•×Ÿ ×™×•×§×¨×ª×™ ×¢×œ ×’×“×•×ª × ×”×¨ ×”×¤×™× ×’, ×¢× ×¢×™×¦×•×‘ ××•×“×¨× ×™ ×•×©×™×¨×•×ª ××¢×•×œ×”.", "link": "https://www.booking.com/hotel/th/anantara-chiang-mai-resort.he.html"}, {"name": " U Nimman Chiang Mai â€“ ××œ×•×Ÿ ××•×“×¨× ×™ ×‘××–×•×¨ × ×™×××Ÿ, ×§×¨×•×‘ ×œ×‘×ª×™ ×§×¤×” ×•×—× ×•×™×•×ª.", "link": "https://www.booking.com/hotel/th/u-nimman-chiang-mai.he.html"}, {"name": " Yaang Come Village â€“ ××œ×•×Ÿ ×‘×¡×’× ×•×Ÿ ×ª××™×œ× ×“×™ ××¡×•×¨×ª×™, ×¢× ×’× ×™× ×˜×¨×•×¤×™×™× ×•×‘×¨×™×›×”.", "link": "https://www.booking.com/hotel/th/yaang-come-village-hotel.he.html"}, {"name": "137 Pillars House â€“ ××œ×•×Ÿ ×‘×•×˜×™×§ ×™×•×§×¨×ª×™ ×¢× ×¢×™×¦×•×‘ ×§×•×œ×•× ×™××œ×™, ×©×™×¨×•×ª ××™×©×™ ×•×‘×¨×™×›×” ×™×¤×”×¤×™×™×”.", "link": "https://www.booking.com/hotel/th/137-pillars-house.he.html"}, {"name": "De Naga Hotel Chiang Mai â€“ ××œ×•×Ÿ ×‘×•×˜×™×§ ×‘××¨×›×– ×”×¢×™×¨, ×¢× ×¢×™×¦×•×‘ ×™×™×—×•×“×™ ×•×©×™×¨×•×ª ××¦×•×™×Ÿ.", "link": "https://www.booking.com/hotel/th/de-naga-hotel.he.html"}, {"name": "Four Seasons Resort Chiang Mai â€“ ××ª×¨ × ×•×¤×© ××¤×•××¨ ×‘×œ×‘ ×©×“×•×ª ××•×¨×–, ×¢× × ×•×£ ×¢×•×¦×¨ × ×©×™××” ×•××•×•×™×¨×” ×¨×’×•×¢×”.", "link": "https://www.booking.com/hotel/th/four-seasons-resort-chiang-mai.he.html"}, {"name": "Le Meridien Chiang Mai â€“ ××œ×•×Ÿ ××•×“×¨× ×™ ×‘××¨×›×– ×”×¢×™×¨, ×§×¨×•×‘ ×œ×©×•×§ ×”×œ×™×œ×” ×•×œ××¡×¢×“×•×ª.", "link": "https://www.booking.com/hotel/th/le-meridien-chiang-mai.he.html"}, {"name": "Rachamankha Hotel â€“ ××œ×•×Ÿ ×‘×•×˜×™×§ ×¢× ×¢×™×¦×•×‘ ××¡×•×¨×ª×™, ××•×•×™×¨×” ×©×§×˜×” ×•×§×¨×‘×” ×œ××§×“×©×™×.", "link": "https://www.booking.com/hotel/th/rachamankha.he.html"}, {"name": "Shangri-La Hotel Chiang Mai â€“ ××œ×•×Ÿ ×™×•×§×¨×ª×™ ×¢× ××ª×§× ×™× ××¦×•×™× ×™×, ×›×•×œ×œ ×¡×¤× ×•×‘×¨×™×›×” ×’×“×•×œ×”.", "link": "https://www.booking.com/hotel/th/shangri-la-chiang-mai.he.html"}, {"name": "Tamarind Village â€“ ××œ×•×Ÿ ×‘×•×˜×™×§ ×‘×œ×‘ ×”×¢×™×¨ ×”×¢×ª×™×§×”, ×¢× ×¢×™×¦×•×‘ ×œ× ×” ××¡×•×¨×ª×™ ×•×©×™×¨×•×ª ×—×.", "link": "https://www.booking.com/hotel/th/tamarind-village.he.html"}, {"name": "*** ×¦'×× ×’ ×¨××™***", "link": "nan"}, {"name": " Le Meridien Chiang Rai Resort â€“ ××œ×•×Ÿ ×™×•×§×¨×ª×™ ×¢×œ ×’×“×•×ª × ×”×¨ ×§×•×§, ×¢× ×‘×¨×™×›×”, ×¡×¤× ×•× ×•×£ ××¨×”×™×‘.", "link": "https://www.booking.com/hotel/th/le-meridien-chiang-rai-resort.he.html"}, {"name": " Anantara Golden Triangle Elephant Camp & Resort â€“ ××ª×¨ × ×•×¤×© ×™×•×§×¨×ª×™ ×¢× ××—× ×” ×¤×™×œ×™×, × ×•×£ ×œ×”×¨×™× ×•×©×™×¨×•×ª ××¢×•×œ×”.", "link": "https://www.booking.com/hotel/th/anantara-golden-triangle-elephant-camp-resort.he.html"}, {"name": " Bura Resort Chiang Rai â€“ ××ª×¨ × ×•×¤×© ×‘×˜×‘×¢, ×¢× ×‘×§×ª×•×ª ×¢×¥ ×•× ×•×£ ×œ×”×¨×™×.", "link": "https://www.booking.com/hotel/th/bura-resort-chiang-rai.he.html"}, {"name": " Dusit Island Resort â€“ ××œ×•×Ÿ ×¢×œ ××™ ×§×˜×Ÿ ×‘× ×”×¨, ×¢× × ×•×£ ×™×¤×”×¤×” ×•××ª×§× ×™× ××¦×•×™× ×™×.", "link": "https://www.booking.com/hotel/th/dusit-island-resort-chiang-rai.he.html"}, {"name": " Laluna Hotel and Resort â€“ ××œ×•×Ÿ ×¢× ×‘×•× ×’×œ×•×¡ ×‘×’× ×™× ×˜×¨×•×¤×™×™×, ×‘×¨×™×›×” ×’×“×•×œ×” ×•××•×•×™×¨×” ×¨×’×•×¢×”.", "link": "https://www.booking.com/hotel/th/laluna-hotel-resort-chiangrai.he.html"}, {"name": " Le Patta Hotel Chiang Rai â€“ ××œ×•×Ÿ ××•×“×¨× ×™ ×‘××¨×›×– ×”×¢×™×¨, ×§×¨×•×‘ ×œ×©×•×§ ×”×œ×™×œ×” ×•×œ××˜×¨×§×¦×™×•×ª.", "link": "https://www.booking.com/hotel/th/le-patta-hotel-chiang-rai.he.html"}, {"name": " Mora Boutique Hotel â€“ ××œ×•×Ÿ ×‘×•×˜×™×§ ×¢× ×¢×™×¦×•×‘ ××œ×’× ×˜×™, ×‘×¨×™×›×” ×•×¡×¤×.", "link": "https://www.booking.com/hotel/th/mora-boutique.he.html"}, {"name": " The Imperial River House Resort â€“ ××œ×•×Ÿ ×¢×œ ×’×“×•×ª ×”× ×”×¨, ×¢× ×—×“×¨×™× ××¨×•×•×—×™× ×•×‘×¨×™×›×”.", "link": "https://www.booking.com/hotel/th/the-imperial-river-house-resort.he.html"}, {"name": " The Legend Chiang Rai Boutique River Resort & Spa â€“ ××ª×¨ × ×•×¤×© ×‘×•×˜×™×§ ×¢×œ ×’×“×•×ª ×”× ×”×¨, ×¢× ×¡×¤× ×•×‘×¨×™×›×”.", "link": "https://www.booking.com/hotel/th/the-legend-chiang-rai-river-resort-spa.he.html"}, {"name": " The Riverie by Katathani â€“ ××œ×•×Ÿ ××•×“×¨× ×™ ×‘×œ×‘ ×”×¢×™×¨, ×¢× ×’× ×™× ××˜×•×¤×—×™× ×•×‘×¨×™×›×” ×’×“×•×œ×”.", "link": "https://www.booking.com/hotel/th/the-riverie-by-katathani.he.html"}, {"name": "***×§×•×¡××•×™***", "link": "nan"}, {"name": "$$Combo Beach Hotel Samui$$", "link": "https://www.booking.com/hotel/th/combo-beach-samui.he.html"}, {"name": "$$Arkbar Beach Club$$", "link": "https://www.booking.com/hotel/th/arkbar-beach-club.he.html"}, {"name": "$$Chaweng Villawee Hotel$$", "link": "https://www.booking.com/hotel/th/chaweng-villawee-hotel.he.html"}, {"name": "$$Muang Samui Spa Resort - SHA Extra Plus$$", "link": "https://www.booking.com/hotel/th/muang-samui-spa-resort.he.html"}, {"name": "***×§×•×¤× ×’×Ÿ***", "link": "nan"}, {"name": "$$Vannee Golden Sands Beachfront Resort$$", "link": "https://www.booking.com/hotel/th/vannee-golden-sands-beachfront-resort.he.html"}, {"name": "$$The Cabin Beach Resort$$", "link": "https://www.booking.com/hotel/th/the-cabin-beach-resort.he.html"}];


// --- ×¤×•× ×§×¦×™×•×ª ×¢×–×¨ (××™××•×’'×™× ×•×¢×™×‘×•×“) ---
function fillSelect(id, list) {
  const sel = document.getElementById(id);
  sel.innerHTML = "";
  sel.appendChild(new Option("-- ×‘×—×¨ ××¤×©×¨×•×ª --", ""));
  list.forEach(item => sel.appendChild(new Option(item, item)));
}

function fillHotels() {
  const sel = document.getElementById("hotel");
  sel.innerHTML = "";
  sel.appendChild(new Option("-- ×‘×—×¨ ××œ×•×Ÿ --", ""));
  hotels.forEach(h => {
    const opt = new Option(h.name, h.name);
    opt.dataset.link = h.link;
    // ×× ×–×• ×›×•×ª×¨×ª, × ×“×’×™×© ××•×ª×” ×•×œ× × ××¤×©×¨ ×‘×—×™×¨×”
    if(h.name.includes("***")) {
        opt.disabled = true;
        opt.style.fontWeight = "bold";
        opt.style.backgroundColor = "#eee";
    }
    sel.appendChild(opt);
  });
}

function updateHotelLink() {
  const sel = document.getElementById("hotel");
  const link = sel.options[sel.selectedIndex].dataset.link;
  const label = document.getElementById("hotelLink");
  if(link && link !== "nan") {
      label.textContent = "ğŸ¨ ×œ×—×¥ ×œ×¤×¨×˜×™ ×”××œ×•×Ÿ";
      label.dataset.url = link;
  } else {
      label.textContent = "";
  }
}

function openHotelLink() {
  const url = document.getElementById("hotelLink").dataset.url;
  if (url) window.open(url, '_blank');
}

function generateDates() {
  const sel = document.getElementById("date");
  sel.innerHTML = ""; // × ×™×§×•×™
  for (let i = 0; i < 365; i++) { // ×©× ×” ×§×“×™××”
    const d = new Date();
    d.setDate(d.getDate() + i);
    // ×©××™×¨×ª ×¢×¨×š ××¡×¤×¨×™ ×œ××™×•×Ÿ
    const dateValue = d.toISOString().split('T')[0];
    const displayDate = d.toLocaleDateString("he-IL", { weekday: 'long', day: '2-digit', month: '2-digit', year: 'numeric' });
    
    const opt = new Option(displayDate, displayDate);
    opt.dataset.raw = dateValue; // ×©××™×¨×” ×œ××™×•×Ÿ
    sel.appendChild(opt);
  }
}

// ×‘×“×™×§×ª ×˜×¢×•×™×•×ª ×œ×¤× ×™ ×©××™×¨×”
function validateForm() {
    const date = document.getElementById("date").value;
    const city = document.getElementById("city").value;
    if (!date) { alert("âš ï¸ ×—×•×‘×” ×œ×‘×—×•×¨ ×ª××¨×™×š!"); return false; }
    if (!city) { alert("âš ï¸ ×—×•×‘×” ×œ×‘×—×•×¨ ×¢×™×¨!"); return false; }
    return true;
}

// ×§×‘×œ×ª ××™××•×’'×™ ×—×›× ×œ×¤×™ ×˜×§×¡×˜
function getSmartEmoji(text) {
    if(!text) return "";
    if(text.includes("×˜×™×¡×”")) return "âœˆï¸";
    if(text.includes("××¢×‘×•×¨×ª") || text.includes("×©×™×™×˜")) return "â›´ï¸";
    if(text.includes("×¨×›×‘×ª")) return "ğŸš†";
    if(text.includes("××•×˜×•×‘×•×¡")) return "ğŸšŒ";
    if(text.includes("××œ×•×Ÿ") || text.includes("×¨×™×–×•×¨×˜")) return "ğŸ¨";
    if(text.includes("××§×“×©")) return "ğŸ•";
    if(text.includes("×™×") || text.includes("×—×•×£")) return "ğŸ–ï¸";
    if(text.includes("×¦×œ×™×œ×”") || text.includes("×©× ×•×¨×§×œ×™× ×’")) return "ğŸ¤¿";
    if(text.includes("×¤×™×œ×™×")) return "ğŸ˜";
    if(text.includes("××¡××’")) return "ğŸ’†";
    if(text.includes("××•×›×œ") || text.includes("×‘×™×©×•×œ")) return "ğŸœ";
    return "ğŸ”¹";
}

function savePlan() {
  if(!validateForm()) return;

  const data = {
    date: document.getElementById("date").value,
    dateRaw: document.getElementById("date").selectedOptions[0].dataset.raw,
    flight: document.getElementById("flight").value,
    flightDep: document.getElementById("flightDep").value,
    flightArr: document.getElementById("flightArr").value,
    city: document.getElementById("city").value,
    hotel: document.getElementById("hotel").value,
    act1: document.getElementById("activity1").value,
    act1Time: document.getElementById("act1Time").value,
    act2: document.getElementById("activity2").value,
    act2Time: document.getElementById("act2Time").value
  };

  createRow(data);
  saveLocally();
  
  // ×”×¦×¢×ª ×”×™×•× ×”×‘× ××•×˜×•××˜×™×ª
  const dateSel = document.getElementById("date");
  if(dateSel.selectedIndex < dateSel.options.length - 1) {
      dateSel.selectedIndex++;
  }
}

function createRow(data) {
    const tableBody = document.getElementById("savedBody");
    const row = document.createElement("tr");
    row.dataset.rawDate = data.dateRaw; // ×¢×‘×•×¨ ×”××™×•×Ÿ

    // ×‘× ×™×™×ª ×ª× ×ª×—×‘×•×¨×” ××•×¨×›×‘
    let flightText = data.flight;
    if (data.flightDep) flightText += `<br><span class="time-badge">ğŸ›« ${data.flightDep}</span>`;
    if (data.flightArr) flightText += `<span class="time-badge">ğŸ›¬ ${data.flightArr}</span>`;

    // ×‘× ×™×™×ª ×ª× ×¤×¢×™×œ×•×™×•×ª ××•×¨×›×‘
    let activitiesHtml = "";
    if(data.act1 && !data.act1.includes("×œ×œ×")) {
        activitiesHtml += `<div>${getSmartEmoji(data.act1)} ${data.act1}`;
        if(data.act1Time) activitiesHtml += ` <small>(${data.act1Time})</small>`;
        activitiesHtml += `</div>`;
    }
    if(data.act2 && !data.act2.includes("×œ×œ×")) {
        activitiesHtml += `<div>${getSmartEmoji(data.act2)} ${data.act2}`;
        if(data.act2Time) activitiesHtml += ` <small>(${data.act2Time})</small>`;
        activitiesHtml += `</div>`;
    }

    row.innerHTML = `
        <td>${data.date}</td>
        <td>${flightText}</td>
        <td>${data.city}</td>
        <td>${data.hotel}</td>
        <td>${activitiesHtml}</td>
        <td><button style="background:none; color:red; border:none; font-size:1.2em;" onclick="deleteRow(this)">ğŸ—‘</button></td>
    `;
    
    // × ×ª×•× ×™× × ×¡×ª×¨×™× ×œ×©××™×¨×” ×‘-localStorage ×‘×¦×•×¨×” × ×§×™×™×”
    row.dataset.json = JSON.stringify(data);

    tableBody.appendChild(row);
    document.getElementById("savedTable").style.display = "table";
    
    sortRowsByDate(); // ××™×•×Ÿ ××•×˜×•××˜×™ (×××¤×©×¨ ×”×•×¡×¤×” ×‘×××¦×¢)
    updateSummary(); // ×¢×“×›×•×Ÿ ×”×¡×˜×˜×™×¡×˜×™×§×•×ª
}

// ×¤×•× ×§×¦×™×™×ª ××™×•×Ÿ - ×××¤×©×¨×ª ×”×•×¡×¤×ª ×™×•× ×‘×××¦×¢ ×•×”×•× ×™×¡×ª×“×¨
function sortRowsByDate() {
    const tbody = document.getElementById("savedBody");
    const rows = Array.from(tbody.querySelectorAll("tr"));
    
    rows.sort((a, b) => {
        return a.dataset.rawDate.localeCompare(b.dataset.rawDate);
    });

    rows.forEach(row => tbody.appendChild(row));
}

// ×¡×˜×˜×™×¡×˜×™×§×•×ª ×•×¡×¤×™×¨×” ×œ××—×•×¨
function updateSummary() {
    const rows = document.querySelectorAll("#savedBody tr");
    document.getElementById("totalDays").textContent = rows.length;

    if(rows.length === 0) {
        document.getElementById("daysToTrip").textContent = "×˜×¨× × ×§×‘×¢";
        document.getElementById("cityBreakdown").textContent = "-";
        return;
    }

    // ×¡×¤×™×¨×ª ×œ×™×œ×•×ª ×œ×¤×™ ×¢×™×¨
    const cityCounts = {};
    rows.forEach(row => {
        const data = JSON.parse(row.dataset.json);
        // × ×™×§×•×™ ×©× ×”×¢×™×¨ ××”×× ×’×œ×™×ª
        const cityName = data.city.split("(")[0].trim();
        cityCounts[cityName] = (cityCounts[cityName] || 0) + 1;
    });

    let breakdownText = "";
    for (const [city, count] of Object.entries(cityCounts)) {
        breakdownText += `${city}: ${count} ×œ×™×œ×•×ª | `;
    }
    document.getElementById("cityBreakdown").textContent = breakdownText.slice(0, -3);

    // ×¡×¤×™×¨×” ×œ××—×•×¨
    const firstDate = new Date(rows[0].dataset.rawDate);
    const today = new Date();
    const diffTime = firstDate - today;
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    
    const countDiv = document.getElementById("daysToTrip");
    if(diffDays > 0) countDiv.textContent = `×¢×•×“ ${diffDays} ×™××™×!`;
    else if (diffDays === 0) countDiv.textContent = "×”×™×•×!!!";
    else countDiv.textContent = "×”×˜×™×•×œ ×”×ª×—×™×œ/× ×’××¨";
}

function deleteRow(btn) {
  if(confirm("×œ××—×•×§ ××ª ×”×™×•× ×”×–×” ××”××¡×œ×•×œ? ğŸ—‘")) {
      const row = btn.parentNode.parentNode;
      row.remove();
      if (!document.querySelectorAll("#savedBody tr").length)
        document.getElementById("savedTable").style.display = "none";
      saveLocally();
      updateSummary();
  }
}

function clearAll() {
  if(confirm("âš ï¸ ×¤×¢×•×œ×” ×–×• ×ª××—×§ ××ª ×›×œ ×”××¡×œ×•×œ ×œ×¦××™×ª×•×ª. ×œ×”××©×™×š?")) {
      document.getElementById("savedBody").innerHTML = "";
      document.getElementById("savedTable").style.display = "none";
      localStorage.removeItem("tripDataFull");
      updateSummary();
  }
}

function saveLocally() {
  const rows = document.querySelectorAll("#savedBody tr");
  const data = Array.from(rows).map(row => JSON.parse(row.dataset.json));
  localStorage.setItem("tripDataFull", JSON.stringify(data));
  updateSummary();
  // × ×× ×¢ ×-alert ××¦×™×§
}

function loadFromLocalStorage() {
  const data = JSON.parse(localStorage.getItem("tripDataFull") || "[]");
  // ×ª××™×›×” ×œ××—×•×¨ ×‘×¤×•×¨××˜ ×”×™×©×Ÿ ×× ×¦×¨×™×š (××•×¤×¦×™×•× ×œ×™), ×›××Ÿ ×× ×™ ×× ×™×— ×”×ª×—×œ×” × ×§×™×™×” ××• ×¤×•×¨××˜ ×—×“×©
  data.forEach(item => createRow(item));
}

// ×”×“×¤×¡×ª PDF ×‘×××¦×¢×•×ª ×”×“×¤×“×¤×Ÿ (×ª×•××š ×¢×‘×¨×™×ª ××•×©×œ×)
function printPDF() {
    window.print();
}

function sendToWhatsApp() {
  const rows = document.querySelectorAll("#savedBody tr");
  if (!rows.length) return alert("××™×Ÿ ×©×•×¨×•×ª ×œ×©×œ×™×—×”");

  let message = "*âœˆï¸ ××¡×œ×•×œ ×”×˜×™×•×œ ×©×œ×™:*\n\n";
  
  rows.forEach((row, i) => {
    const data = JSON.parse(row.dataset.json);
    
    message += `*×™×•× ${i+1} (${data.date})*\n`;
    if(data.flight && data.flight !== "×œ×œ× ××¢×‘×¨") {
        message += `ğŸš€ ${data.flight}`;
        if(data.flightDep) message += ` (${data.flightDep} - ${data.flightArr})`;
        message += `\n`;
    }
    message += `ğŸ™ ${data.city}\n`;
    if(data.hotel) message += `ğŸ¨ ${data.hotel}\n`;
    
    if(data.act1 && !data.act1.includes("×œ×œ×")) {
        message += `${getSmartEmoji(data.act1)} ×‘×•×§×¨: ${data.act1}`;
        if(data.act1Time) message += ` (${data.act1Time})`;
        message += `\n`;
    }
    
    if(data.act2 && !data.act2.includes("×œ×œ×")) {
        message += `${getSmartEmoji(data.act2)} ×¢×¨×‘: ${data.act2}`;
        if(data.act2Time) message += ` (${data.act2Time})`;
        message += `\n`;
    }
    
    message += "------------------\n";
  });

  // ×”×•×¡×¤×ª ×¡×™×›×•× ×‘×¡×•×£ ×”×”×•×“×¢×”
  message += `\nğŸ“Š *×¡×™×›×•×:* ${document.getElementById("cityBreakdown").textContent}`;

  const phone = prompt("×”×›× ×¡ ××¡×¤×¨ ×˜×œ×¤×•×Ÿ (×œ×œ× 0):");
  if (!phone) return;
  const fullPhone = "972" + phone.replace(/^0+/, "").replace(/[^0-9]/g, "");
  const url = "https://wa.me/" + fullPhone + "?text=" + encodeURIComponent(message);
  window.open(url, "_blank");
}

window.onload = function() {
  generateDates();
  fillSelect("flight", flights);
  fillSelect("city", cities);
  fillSelect("activity1", activities);
  fillSelect("activity2", activities);
  fillHotels();
  loadFromLocalStorage();
  
  // ×¢×“×›×•×Ÿ ×–××Ÿ ×××ª
  setInterval(updateSummary, 60000); // ×¢×“×›×•×Ÿ ×“×©×‘×•×¨×“ ×›×œ ×“×§×”
}

</script>
</body>
</html>
