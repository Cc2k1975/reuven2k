<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>תוצאה חיה - נערים א'</title>
    <style>
        body {
            background-color: #000;
            color: #fff;
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            text-align: center;
        }

        .container {
            width: 90%;
            max-width: 400px;
            padding: 20px;
            border: 2px solid #333;
            border-radius: 15px;
            background: #111;
        }

        /* עיצוב התוצאה הגדולה */
        .score {
            font-size: 80px;
            font-weight: bold;
            color: #4CAF50; /* צבע ירוק לתוצאה */
            margin: 20px 0;
            letter-spacing: 5px;
        }

        .teams {
            font-size: 20px;
            color: #ccc;
            margin-bottom: 10px;
        }

        .status {
            font-size: 14px;
            color: #666;
            margin-top: 15px;
        }

        /* אנימציה קטנה לטעינה */
        .blink { animation: blinker 1.5s linear infinite; }
        @keyframes blinker { 50% { opacity: 0.5; } }
    </style>
</head>
<body>

    <div class="container">
        <div class="teams" id="teamNames">טוען נתונים...</div>
        <div class="score blink" id="scoreBoard">-- : --</div>
        <div class="status" id="lastUpdate">ממתחבר לשרת...</div>
    </div>

    <script>
        // המזהה של המשחק שלך
        const GAME_ID = "1066561";
        
        // הכתובת של אתר ההתאחדות
        const IFA_URL = "https://www.football.org.il/leagues/games/game/?game_id=" + GAME_ID;
        
        // הדלת האחורית (Proxy) שעוקפת את החסימה
        const PROXY = "https://api.codetabs.com/v1/proxy?quest=";

        async function fetchScore() {
            const statusDiv = document.getElementById('lastUpdate');
            const scoreDiv = document.getElementById('scoreBoard');

            try {
                // 1. מבקשים מהפרוקסי להביא את האתר
                // מוסיפים זמן כדי שלא ישמור בזיכרון (Cache)
                const response = await fetch(PROXY + encodeURIComponent(IFA_URL + "&t=" + Date.now()));
                
                if (!response.ok) throw new Error("בעיה ברשת");

                const htmlText = await response.text();

                // 2. "דגים" את התוצאה מתוך הטקסט של האתר באמצעות חיפוש חכם (Regex)
                // אנחנו מחפשים תבנית של "מספר : מספר" שנמצאת בתוך תגיות HTML
                // זה עובד גם אם האתר משנה קצת את העיצוב
                
                // חיפוש ספציפי למבנה של ההתאחדות (בדרך כלל מספרים גדולים באמצע)
                // מחפש תבנית >3 : 0< או דומה
                const scoreMatch = htmlText.match(/>\s*(\d+)\s*:\s*(\d+)\s*</);

                if (scoreMatch) {
                    // מצאנו! מעדכנים את המסך
                    const score = `${scoreMatch[2]} : ${scoreMatch[1]}`; // הופך סדר אם צריך
                    scoreDiv.innerText = score;
                    scoreDiv.classList.remove("blink"); // מפסיק להבהב כשיש תוצאה
                    
                    statusDiv.innerText = "עודכן לאחרונה: " + new Date().toLocaleTimeString();
                } else {
                    // נסיון נוסף - לפעמים זה מופיע אחרת
                    const backupMatch = htmlText.match(/(\d+)\s*:\s*(\d+)/);
                    if(backupMatch) {
                         scoreDiv.innerText = `${backupMatch[2]} : ${backupMatch[1]}`;
                         statusDiv.innerText = "עודכן (זיהוי משני)";
                    } else {
                        statusDiv.innerText = "המשחק לא נמצא או לא התחיל";
                    }
                }

            } catch (error) {
                console.error(error);
                statusDiv.innerText = "שגיאת תקשורת (מנסה שוב...)";
            }
        }

        // הפעלה ראשונה
        fetchScore();

        // רענון אוטומטי כל 20 שניות
        setInterval(fetchScore, 20000);

    </script>
</body>
</html>
