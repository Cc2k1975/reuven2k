<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InstaScan - ×¨××•×‘×Ÿ</title>
    <style>
        body { font-family: sans-serif; background: #121212; color: white; text-align: center; padding: 20px; }
        .card { max-width: 500px; margin: auto; background: #1e1e1e; padding: 25px; border-radius: 20px; border: 1px solid #333; }
        .bookmark-btn { display: inline-block; padding: 10px 20px; background: #E1306C; color: white; text-decoration: none; border-radius: 10px; font-weight: bold; cursor: move; margin: 20px 0; border: 2px dashed white; }
        .results { margin-top: 20px; text-align: right; }
        .unfollowed { color: #ff4d4d; border-right: 3px solid #ff4d4d; padding-right: 10px; }
    </style>
</head>
<body>

    <div class="card">
        <h2>×¡×•×¨×§ ×¢×•×§×‘×™× ×—×¦×™-××•×˜×•××˜×™ ğŸš€</h2>
        
        <p>×‘×œ×™ ×œ×”×•×¨×™×“ ×§×‘×¦×™× ×•×‘×œ×™ ×¡×™×¡×××•×ª!</p>
        
        <div style="background: #222; padding: 15px; border-radius: 10px; font-size: 14px;">
            <strong>×”×•×¨××•×ª ×”×¤×¢×œ×”:</strong><br>
            1. ×’×¨×•×¨ ××ª ×”×›×¤×ª×•×¨ ×”×•×•×¨×•×“ ×œ××¢×œ×” ×œ×¡×¨×’×œ ×”×¡×™×× ×™×•×ª ×©×œ×š.<br>
            2. ×›× ×¡ ×œ××™× ×¡×˜×’×¨× ×œ×“×£ ×”"×¢×•×§×‘×™×" ×©×œ×š.<br>
            3. ×œ×—×¥ ×¢×œ ×”×¡×™×× ×™×” ×©×’×¨×¨×ª.
        </div>

        <a class="bookmark-btn" href="javascript:(function(){
            let users = Array.from(document.querySelectorAll('span._ap35')).map(u => u.innerText).filter(u => u && !u.includes(' '));
            if(users.length === 0) { alert('× × ×œ×¤×ª×•×— ××ª ×¨×©×™××ª ×”×¢×•×§×‘×™× ×§×•×“×!'); return; }
            window.location.href = 'https://reuven2k.com/insta.html?data=' + btoa(JSON.stringify(users));
        })()">×’×¨×•×¨ ××•×ª×™ ×œ×¡×¨×’×œ ×”×¡×™×× ×™×•×ª</a>

        <div id="display"></div>
    </div>

    <script>
        // ×‘×“×™×§×ª × ×ª×•× ×™× ×©×”×’×™×¢×• ××”×¡×™×× ×™×”
        const urlParams = new URLSearchParams(window.location.search);
        const incomingData = urlParams.get('data');

        if (incomingData) {
            const currentFollowers = JSON.parse(atob(incomingData));
            const lastBackup = JSON.parse(localStorage.getItem('insta_backup'));

            if (!lastBackup) {
                localStorage.setItem('insta_backup', JSON.stringify(currentFollowers));
                document.getElementById('display').innerHTML = `<h3>âœ… ×’×™×‘×•×™ ×¨××©×•×Ÿ × ×©××¨!</h3><p>× ×¡×¨×§× ×• ${currentFollowers.length} ×¢×•×§×‘×™×. ×—×–×•×¨ ×‘×¢×•×“ ×©×‘×•×¢ ×œ×‘×“×™×§×”.</p>`;
            } else {
                const unfollowed = lastBackup.filter(x => !currentFollowers.includes(x));
                let html = `<h3>×ª×•×¦××•×ª ×¡×¨×™×§×”:</h3>`;
                if (unfollowed.length > 0) {
                    html += `<p class="unfollowed">×”×•×¨×™×“×• ×¢×•×§×‘ (${unfollowed.length}):<br>${unfollowed.join(', ')}</p>`;
                } else {
                    html += `<p style="color:#25d366">××£ ××—×“ ×œ× ×”×•×¨×™×“ ×¢×•×§×‘! ğŸ‰</p>`;
                }
                document.getElementById('display').innerHTML = html;
                
                // ×¢×“×›×•×Ÿ ×”×’×™×‘×•×™
                localStorage.setItem('insta_backup', JSON.stringify(currentFollowers));
            }
            // × ×™×§×•×™ ×”-URL
            window.history.replaceState({}, document.title, window.location.pathname);
        }
    </script>
</body>
</html>
