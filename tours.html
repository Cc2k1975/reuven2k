<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>×ª×›× ×•×Ÿ ×˜×™×•×œ ×œ×ª××™×œ× ×“ ğŸŒ´</title>
  <style>
    :root {
      --primary: #007bff;
      --success: #28a745;
      --danger: #dc3545;
      --warning: #ffc107;
      --info: #17a2b8;
      --light: #f8f9fa;
      --dark: #343a40;
    }
    
    body { 
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
      padding: 20px; 
      background-color: #f4f6f9; 
      color: #333;
      max-width: 800px;
      margin: 0 auto;
    }

    h1 { text-align: center; color: var(--primary); margin-bottom: 30px; }

    .control-panel {
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }

    label { font-weight: bold; margin-top: 10px; display: block; }
    
    select, input { 
      font-size: 16px; 
      padding: 10px; 
      width: 100%; 
      margin-bottom: 15px; 
      border: 1px solid #ddd;
      border-radius: 5px;
      box-sizing: border-box;
    }

    .btn-group {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 10px;
    }

    button { 
      font-size: 16px; 
      padding: 12px; 
      flex: 1; 
      cursor: pointer; 
      border: none; 
      border-radius: 5px; 
      color: white; 
      font-weight: bold;
      transition: opacity 0.2s;
    }

    button:hover { opacity: 0.9; }

    .btn-save { background-color: var(--success); }
    .btn-local { background-color: var(--info); }
    .btn-wa { background-color: #25D366; } /* WhatsApp Color */
    .btn-clear { background-color: var(--danger); }
    .btn-pdf { background-color: var(--dark); }

    table { width: 100%; border-collapse: collapse; margin-top: 20px; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    th, td { border-bottom: 1px solid #eee; padding: 12px; text-align: center; }
    th { background-color: var(--primary); color: white; }
    tr:last-child td { border-bottom: none; }
    
    #hotelLink { 
      color: var(--primary); 
      cursor: pointer; 
      text-decoration: none; 
      display: block; 
      margin: -10px 0 15px 0; 
      font-size: 0.9em;
    }
    #hotelLink:hover { text-decoration: underline; }

    /* ×¢×™×¦×•×‘ ×œ×”×“×¤×¡×” ×‘×œ×‘×“ */
    @media print {
      body { background: white; max-width: 100%; }
      .control-panel, .btn-group, h1 { display: none; }
      #savedTable { display: table !important; width: 100%; box-shadow: none; }
      th, td { border: 1px solid #000; }
      td:last-child, th:last-child { display: none; } /* ×”×¡×ª×¨×ª ×¢××•×“×ª ××—×™×§×” ×‘×”×“×¤×¡×” */
    }
  </style>
</head>
<body>

  <h1>âœˆï¸ ×ª×›× ×•×Ÿ ×˜×™×•×œ ×œ×ª××™×œ× ×“</h1>

  <div class="control-panel">
    <label>ğŸ“… ×ª××¨×™×š:</label>
    <select id="date"></select>

    <label>âœˆ ×˜×™×¡×”:</label>
    <select id="flight"></select>

    <label>ğŸ™ ×¢×™×¨:</label>
    <select id="city"></select>

    <label>ğŸ¨ ××œ×•×Ÿ:</label>
    <select id="hotel" onchange="updateHotelLink()"></select>
    <span id="hotelLink" onclick="openHotelLink()"></span>

    <label>ğŸ ×¤×¢×™×œ×•×ª 1:</label>
    <select id="activity1"></select>

    <label>ğŸ ×¤×¢×™×œ×•×ª 2:</label>
    <select id="activity2"></select>

    <div class="btn-group">
      <button class="btn-save" onclick="savePlan()">â• ×”×•×¡×£ ×œ××¡×œ×•×œ</button>
      <button class="btn-local" onclick="saveLocally()">ğŸ’¾ ×©××•×¨ ×©×™× ×•×™×™×</button>
      <button class="btn-wa" onclick="sendToWhatsApp()">ğŸ“¤ ×©×œ×— ×‘×•×•×˜×¡××¤</button>
      <button class="btn-pdf" onclick="printPlan()">ğŸ“¥ ×©××•×¨ ×›-PDF</button>
      <button class="btn-clear" onclick="clearAll()">ğŸ§¹ ××™×¤×•×¡ ×”×›×œ</button>
    </div>
  </div>

  <table id="savedTable" style="display:none;">
    <thead>
      <tr>
        <th>×ª××¨×™×š</th><th>×˜×™×¡×”</th><th>×¢×™×¨</th><th>××œ×•×Ÿ</th><th>×¤×¢×™×œ×•×ª 1</th><th>×¤×¢×™×œ×•×ª 2</th><th>××—×™×§×”</th>
      </tr>
    </thead>
    <tbody id="savedBody"></tbody>
  </table>

<script>
// × ×ª×•× ×™×
const flights = ["××™×Ÿ ×˜×™×¡×”", "×™×© ×˜×™×¡×”"];
const cities = ["×‘× ×’×§×•×§ (Bangkok)", "×•×•×™×˜×¡× ×“ (Wit Sand)", "×—×•× ×”×™×Ÿ (Hua Hin)", "×œ××•×¡ (Lopburi)", "× ××§×•×Ÿ ×¨××¦'××¡×™××” (Nakhon Ratchasima)", "×¡×•×§×•×ª××™ (Sukhothai)", "×¡×•×¨××˜×× ×™ (Surat Thani)", "×¡×™×× ×¨×™×¤ (Siam Reap)", "×¡×¨××¡×™×Ÿ (Sarasins)", "×¤××™ (PAI)", "×¤×•×§×˜ (Phuket)", "×¤×˜××™×” (Pattaya)", "×¦'×× ×’ ×××™ (Chiang Mai)", "×¦'×× ×’ ×¨××™ (Chiang Rai)", "×§×•×” ×˜××• (Koh Tao)", "×§×•×¡××•×™ (Koh Samui)", "×§×•×¤×™×¤×™ (Koh Phi Phi)", "×§×•×¤× ×’×Ÿ (Koh Phangan)", "×§× ×˜×” (Kanchanaburi)", "×§×¨×‘×™ (Krabi)"];
const activities = ["××•××’×•×ª", "×‘×˜×Ÿ ×’×‘", "×‘×™×§×•×¨ ×‘××§×“×©×™×", "×‘×™×§×•×¨ ×‘×¤××¨×§×™× ×œ××•××™×™×", "×’×œ×™×©×ª ×’×œ×™×", "×”×¤×œ×’×•×ª ×¡×™×¨×” ×‘× ×”×¨×•×ª", "×—×•×•×™×™×ª ×¡×¤××¨×™ ×’'×™×¤×™×", "×˜×™×•×œ×™ ×¤×™×œ×™×", "×˜×¨×§×™× ×‘×”×¨×™×", "×™×", "××•×–×™××•× ×™×", "××•×¤×¢ ", "×¡×¤× ×•××¡××’' ×ª××™×œ× ×“×™", "×¤××¨×§ ××™×", "×¦×œ×™×œ×”", "×§××¨×˜×™× ×’", "×§×•×¨×¡×™ ×‘×™×©×•×œ ×ª××™×œ× ×“×™", "×¨××¤×˜×™× ×’", "×¨×›×™×‘×” ×¢×œ ×¡×•×¡×™×", "×©×•×§×™ ×œ×™×œ×”", "×©×™×™×˜ ", "×©× ×•×¨×§×œ×™× ×’", "×ª×¦×¤×™×•×ª × ×•×£ ××”×¨×™×"];
const hotels = [{"name": "*** ×¤×•×§×˜***", "link": ""}, {"name": "Angsana Laguna Phuket â€“ ×¨×™×–×•×¨×˜ ××¤×•××¨", "link": "https://www.booking.com/hotel/th/angsana-laguna-phuket.html"}, {"name": "Burasari Phuket Resort & Spa", "link": "https://www.booking.com/hotel/th/burasari.html"}, {"name": "Hotel Clover Patong Phuket", "link": "https://www.booking.com/hotel/th/hotel-clover-patong.html"}, {"name": "InterContinental Phuket Resort", "link": "https://www.booking.com/hotel/th/intercontinental-phuket-resort.html"}, {"name": "*** ×‘× ×’×§×•×§ ***", "link": ""}, {"name": "Banyan Tree Bangkok", "link": "https://www.booking.com/hotel/th/banyan-tree-bangkok.html"}, {"name": "Chatrium Hotel Riverside Bangkok", "link": "https://www.booking.com/hotel/th/chatrium-residence-sathon-bangkok.html"}, {"name": "*** ×§×•×¡××•×™ ***", "link": ""}, {"name": "Combo Beach Hotel Samui", "link": "https://www.booking.com/hotel/th/combo-beach-samui.he.html"}];
// ×§×™×¦×¨×ª×™ ××ª ×¨×©×™××ª ×”××œ×•× ×•×ª ×œ×“×•×’××” ×›×“×™ ×œ×—×¡×•×š ××§×•×, ××ª×” ×™×›×•×œ ×œ×”×“×‘×™×§ ×—×–×¨×” ××ª ×”×¨×©×™××” ×”××œ××” ×©×œ×š ×›××Ÿ

function fillSelect(id, list) {
  const sel = document.getElementById(id);
  sel.innerHTML = "";
  sel.appendChild(new Option("- ×‘×—×¨ -", ""));
  list.forEach(item => sel.appendChild(new Option(item, item)));
}

function fillHotels() {
  const sel = document.getElementById("hotel");
  sel.innerHTML = "";
  sel.appendChild(new Option("- ×‘×—×¨ ××œ×•×Ÿ -", ""));
  hotels.forEach(h => {
    const opt = new Option(h.name, h.name);
    opt.dataset.link = h.link;
    if(h.name.includes("***")) {
        opt.disabled = true;
        opt.style.fontWeight = "bold";
        opt.style.color = "#000";
        opt.style.backgroundColor = "#eee";
    }
    sel.appendChild(opt);
  });
}

function updateHotelLink() {
  const sel = document.getElementById("hotel");
  const link = sel.options[sel.selectedIndex].dataset.link;
  const label = document.getElementById("hotelLink");
  
  if (link && link !== "nan") {
    label.textContent = "ğŸ”— ×œ×—×¥ ×œ××¢×‘×¨ ×œ×¢××•×“ ×”××œ×•×Ÿ";
    label.dataset.url = link;
    label.style.display = "block";
  } else {
    label.textContent = "";
    label.style.display = "none";
  }
}

function openHotelLink() {
  const url = document.getElementById("hotelLink").dataset.url;
  if (url) window.open(url, '_blank');
}

function generateDates() {
  const sel = document.getElementById("date");
  for (let i = 0; i < 180; i++) {
    const d = new Date();
    d.setDate(d.getDate() + i);
    // ×¢×™×¦×•×‘ ×ª××¨×™×š ×§×¨×™× ×™×•×ª×¨
    const dateStr = d.toLocaleDateString("he-IL", { weekday: 'short', day: '2-digit', month: '2-digit', year: '2-digit' });
    const opt = new Option(dateStr, dateStr);
    sel.appendChild(opt);
  }
}

function savePlan() {
  // ×‘×“×™×§×” ×©×“×•×ª ×—×•×‘×” (××•×¤×¦×™×•× ×œ×™)
  // if(!document.getElementById("city").value) return alert("×× × ×‘×—×¨ ×¢×™×¨!");

  const row = document.createElement("tr");
  ["date", "flight", "city", "hotel", "activity1", "activity2"].forEach(id => {
    const td = document.createElement("td");
    td.textContent = document.getElementById(id).value;
    row.appendChild(td);
  });
  
  const td = document.createElement("td");
  const btn = document.createElement("button");
  btn.textContent = "âŒ";
  btn.style.background = "transparent";
  btn.style.color = "red";
  btn.style.padding = "5px";
  btn.onclick = () => deleteRow(btn);
  td.appendChild(btn);
  row.appendChild(td);
  
  document.getElementById("savedBody").appendChild(row);
  document.getElementById("savedTable").style.display = "table";
  
  // ×§×™×“×•× ×ª××¨×™×š ××•×˜×•××˜×™ ×œ×™×•× ×”×‘×
  const dateSelect = document.getElementById("date");
  if(dateSelect.selectedIndex < dateSelect.options.length - 1) {
      dateSelect.selectedIndex++;
  }

  saveLocally();
}

function deleteRow(btn) {
  if(!confirm("×œ××—×•×§ ××ª ×”×©×•×¨×”?")) return;
  const row = btn.parentNode.parentNode;
  row.remove();
  if (!document.querySelectorAll("#savedBody tr").length)
    document.getElementById("savedTable").style.display = "none";
  saveLocally();
}

function clearAll() {
  if(!confirm("×‘×˜×•×— ×©××ª×” ×¨×•×¦×” ×œ××—×•×§ ××ª ×›×œ ×”××¡×œ×•×œ?")) return;
  document.getElementById("savedBody").innerHTML = "";
  document.getElementById("savedTable").style.display = "none";
  localStorage.removeItem("tripData");
}

function saveLocally() {
  const data = Array.from(document.querySelectorAll("#savedBody tr")).map(row =>
    Array.from(row.querySelectorAll("td")).slice(0,6).map(td => td.textContent)
  );
  localStorage.setItem("tripData", JSON.stringify(data));
  // ×”×¡×¨×ª×™ ××ª ×”-Alert ×”××¦×™×§ ×‘×›×œ ×©××™×¨×”, ×”×©××™×¨×” ×©×§×•×¤×”
}

function loadFromLocalStorage() {
  const saved = JSON.parse(localStorage.getItem("tripData") || "[]");
  saved.forEach(vals => {
    const row = document.createElement("tr");
    vals.forEach(txt => {
      const td = document.createElement("td");
      td.textContent = txt;
      row.appendChild(td);
    });
    const td = document.createElement("td");
    const btn = document.createElement("button");
    btn.textContent = "âŒ";
    btn.style.background = "transparent";
    btn.style.color = "red";
    btn.onclick = () => deleteRow(btn);
    td.appendChild(btn);
    row.appendChild(td);
    document.getElementById("savedBody").appendChild(row);
  });
  if (saved.length) document.getElementById("savedTable").style.display = "table";
}

// ×¤×•× ×§×¦×™×” ×—×“×©×” ×œ×”×“×¤×¡×” ×›×ª×—×œ×™×£ ×œ-jsPDF
function printPlan() {
    const rows = document.querySelectorAll("#savedBody tr");
    if (!rows.length) return alert("××™×Ÿ × ×ª×•× ×™× ×œ×”×“×¤×¡×”");
    window.print();
}

function sendToWhatsApp() {
  const rows = document.querySelectorAll("#savedBody tr");
  if (!rows.length) {
    alert("××™×Ÿ ×©×•×¨×•×ª ×œ×©×œ×™×—×”");
    return;
  }

  let message = "*âœˆï¸ ××¡×œ×•×œ ×˜×™×•×œ ×œ×ª××™×œ× ×“:*\n\n";
  rows.forEach((row, i) => {
    const cells = row.querySelectorAll("td");
    message += `*×™×•× ${i+1} (${cells[0].textContent})*\n`;
    if(cells[1].textContent && cells[1].textContent !== "××™×Ÿ ×˜×™×¡×”") message += `âœˆ ${cells[1].textContent}\n`;
    message += `ğŸ™ ${cells[2].textContent}\n`;
    message += `ğŸ¨ ${cells[3].textContent}\n`;
    if(cells[4].textContent) message += `ğŸ”¸ ${cells[4].textContent}\n`;
    if(cells[5].textContent) message += `ğŸ”¸ ${cells[5].textContent}\n`;
    message += "------------------\n";
  });

  const phone = prompt("×”×›× ×¡ ××¡×¤×¨ ×˜×œ×¤×•×Ÿ (×œ×œ× 0):");
  if (!phone) return;
  // × ×™×§×•×™ ×”××¡×¤×¨ ××ª×•×•×™× ××™×•×ª×¨×™×
  const cleanPhone = phone.replace(/\D/g,'').replace(/^0+/, ""); 
  const fullPhone = "972" + cleanPhone;
  
  const url = "https://wa.me/" + fullPhone + "?text=" + encodeURIComponent(message);
  window.open(url, "_blank");
}

window.onload = function() {
  generateDates();
  fillSelect("flight", flights);
  fillSelect("city", cities);
  fillSelect("activity1", activities);
  fillSelect("activity2", activities);
  fillHotels();
  loadFromLocalStorage();
}
</script>
</body>
</html>
