<!doctype html>
<html lang="he" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>פן אקספרס – קביעת תור</title>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<style>
  body{font-family:Arial,Helvetica,sans-serif;background:#e8f4f8;margin:0;padding:0}
  .hero-logo{width:88px;display:block;margin:2px auto -10px auto}
  .wrap{max-width:480px;margin:4px auto;padding:16px 20px 20px;background:#fff;border-radius:14px;box-shadow:0 4px 14px rgba(0,0,0,.08)}
  h1{margin:0 0 2px;font-size:28px;color:#0c5e78;text-align:center}
  h2{margin:0 0 14px;font-size:18px;color:#2a6f83;text-align:center}
  label{display:block;margin:10px 4px 4px;font-weight:600;color:#2d3a40;font-size:14px}
  input,select,button{width:100%;padding:10px 12px;border:1px solid #cfe3ea;border-radius:10px;font-size:15px;box-sizing:border-box;background:#f9feff}
  input[type="tel"]{text-align:right;}
  .btn{background:#12acc5;color:#fff;border:0;cursor:pointer;margin-top:14px;font-weight:700;font-size:15px}
  .btn[disabled]{opacity:.6;cursor:not-allowed}
  .btn-secondary{background:#ffffff;color:#0c5e78;border:1px solid #12acc5;margin-top:8px;font-size:14px;padding:9px}
  .error{background:#ffecec;color:#b00020;border:1px solid #f6c;padding:8px;border-radius:10px;margin-top:10px;display:none;font-size:14px}
  .success{background:#eafff2;color:#0a7a3f;border:1px solid #a6e7c3;padding:8px;border-radius:10px;margin-top:10px;display:none;font-size:14px}
  option.taken{color:#888;background:#f1f1f1}
  .ver{margin-top:12px;font-size:12px;color:#678;text-align:center}

  .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;z-index:50}
  .modal{background:#fff;border-radius:14px;max-width:420px;width:92%;padding:18px 18px 12px;box-shadow:0 10px 30px rgba(0,0,0,.2)}
  .modal h3{margin:0 0 8px;font-size:18px;color:#0c5e78}
  .modal p{margin:0 0 14px;color:#334;white-space:pre-line;font-size:14px}
  .modal .row{display:flex;gap:10px;justify-content:space-between}
  .modal .row button{flex:1;padding:10px;border-radius:10px;border:0;font-weight:700;font-size:14px}
  .modal .cancel{background:#eef3f6;color:#334}
  .modal .ok{background:#12acc5;color:#fff}
</style>
</head>
<body>

  <!-- גיף אנימציה קטן בראש הדף -->
  <img src="https://reuven2k.com/exe.gif" alt="פן אקספרס" class="hero-logo" />

  <div class="wrap">
    <h1>פן אקספרס</h1>
    <h2>מערכת לזימון תורים</h2>

    <div id="msgError" class="error"></div>
    <div id="msgOk" class="success"></div>

    <label for="date">בחר תאריך:</label>
    <input type="date" id="date" required />

    <label for="time">שעה פנויה:</label>
    <select id="time" required>
      <option value="">טוען שעות…</option>
    </select>

    <label for="name">שם הלקוחה:</label>
    <input type="text" id="name" placeholder="הכנס שם" required />

    <label for="phone">מספר טלפון:</label>
    <input type="tel" id="phone" placeholder="הכנס טלפון" required />

    <button id="save" class="btn">שמור</button>
    <button id="btnGallery" type="button" class="btn-secondary">גלריית עבודות</button>
    <button id="navWaze" type="button" class="btn-secondary">נווט ל פן-אקספרס</button>

    <div class="ver">Version: 1.5.7</div>
  </div>

  <!-- Modal -->
  <div id="icsModal" class="modal-backdrop" role="dialog" aria-modal="true">
    <div class="modal">
      <h3>להוסיף תזכורת ליומן?</h3>
      <p id="icsText">ניצור אירוע ליומן בתאריך ___ בשעה ___ כולל תזכורת שעה לפני.
לקוחה יקרה, מזכירה לך להגיע חפופה ובזמן 💇‍♀️
תודה - פן אקספרס</p>
      <div class="row">
        <button type="button" class="cancel" id="btnCancel">ביטול</button>
        <button type="button" class="ok" id="btnOk">אישור</button>
      </div>
    </div>
  </div>

<script>
const BIN_ID = '68f0e7bed0ea881f40a63b29';
const MASTER_KEY = '$2a$10$4rynniEMuvwqg2nDb5KSEe/lAVYp8a7L3xWzp9GsO6n49OfXc3FCO';
const BIN_URL = 'https://api.jsonbin.io/v3/b/' + BIN_ID;

const MAP_URL = 'https://maps.google.com/?q=33.003292,35.108864';
const WAZE_DEEP = 'waze://?ll=33.003292,35.108864&navigate=yes';
const WAZE_WEB  = 'https://waze.com/ul?ll=33.003292%2C35.108864&navigate=yes';
const GALLERY_URL = 'https://reuven2k.com/images/index.html'; // ← עודכן כאן

const TIMEZONE = 'Asia/Jerusalem';
const EVENT_TITLE = 'תור לפן – פן אקספרס';
const ALARM_MINUTES = 60;
const SLOT_MINUTES = 20;

const pad2 = n => (n<10?('0'+n):''+n);
function genTimeSlots(){
  const slots=[]; for(let h=8; h<=20; h++){ for(let m of [0,20,40]){ if(h===20 && m>0) continue; slots.push(`${pad2(h)}:${pad2(m)}`);} }
  return slots;
}
const SLOTS = genTimeSlots();

function todayStr(){ return new Date().toISOString().slice(0,10); }
function addDaysStr(days){ const d=new Date(); d.setDate(d.getDate()+days); return d.toISOString().slice(0,10); }
function setDateLimits(){ elDate.min=todayStr(); elDate.max=addDaysStr(3); if(!elDate.value) elDate.value=todayStr(); }
function fmtDateHeb(s){ const [y,m,d]=s.split('-'); return `${d}.${m}.${y}`; }

const elDate=document.getElementById('date');
const elTime=document.getElementById('time');
const elName=document.getElementById('name');
const elPhone=document.getElementById('phone');
const elSave=document.getElementById('save');
const msgErr=document.getElementById('msgError');
const msgOk=document.getElementById('msgOk');
const icsModal=document.getElementById('icsModal');
const btnOk=document.getElementById('btnOk');
const btnCancel=document.getElementById('btnCancel');
const icsText=document.getElementById('icsText');
const btnWaze=document.getElementById('navWaze');
const btnGallery=document.getElementById('btnGallery');

btnGallery.addEventListener('click', ()=>{ window.location.href = GALLERY_URL; });

function showErr(t){ msgErr.textContent=t; msgErr.style.display='block'; setTimeout(()=>msgErr.style.display='none',4000); }
function showOk(t){ msgOk.textContent=t; msgOk.style.display='block'; setTimeout(()=>msgOk.style.display='none',4000); }

setDateLimits();

/* ... שאר הסקריפט נשאר זהה ... */
</script>
</body>
</html>
