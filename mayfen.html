<!doctype html>
<html lang="he" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>×¤×Ÿ ××§×¡×¤×¨×¡ â€“ ×§×‘×™×¢×ª ×ª×•×¨</title>
<link rel="manifest" href="/manifest.webmanifest">
<meta name="theme-color" content="#d4af37">
<link rel="apple-touch-icon" href="/Icon app.png">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<style>
body{font-family:Arial,Helvetica,sans-serif;background:#000;margin:0;padding:0;color:#d4af37;}
.hero-logo{width:92px;display:block;margin:-6px auto -12px auto;}
.wrap{max-width:520px;margin:4px auto;padding:20px 24px 24px;background:#111;border-radius:16px;box-shadow:0 6px 18px rgba(255,215,0,0.25);}
h1{margin:0 0 4px;font-size:33px;color:#ffd700;text-align:center;}
h2{margin:0 0 16px;font-size:20.7px;color:#d4af37;text-align:center;}
label{display:block;margin:12px 4px 5px;font-weight:600;color:#ffd700;font-size:16.6px;}
input,select,button{width:100%;padding:12px 14px;border:1px solid #d4af37;border-radius:10px;font-size:16.6px;box-sizing:border-box;background:#222;color:#ffd700;}
input[type="tel"]{text-align:right;}
.btn{background:#d4af37;color:#000;border:0;cursor:pointer;margin-top:16px;font-weight:700;font-size:16.6px;}
.btn[disabled]{opacity:.6;cursor:not-allowed;}
.btn-secondary{background:#000;color:#ffd700;border:1px solid #d4af37;margin-top:9px;font-size:14.5px;padding:10px;}
.btn-secondary img.icon{width:26px;height:26px;vertical-align:middle;margin:0 6px;}
.error{background:#330000;color:#ff6666;border:1px solid #ff9999;padding:9px;border-radius:10px;margin-top:9px;display:none;font-size:15px;}
.success{background:#003300;color:#66ff99;border:1px solid #99ffcc;padding:9px;border-radius:10px;margin-top:9px;display:none;font-size:15px;}
.ver{margin-top:14px;font-size:12.4px;color:#bfa76f;text-align:center;}
/* ×›×¤×ª×•×¨ ×”×”×ª×§× ×” ×”×¦×£ */
#installBtn{
  display:none;
  position:fixed;
  bottom:22px;
  right:22px;
  background:#ffd700;
  border:none;
  width:56px;height:56px;
  border-radius:50%;
  box-shadow:0 0 18px rgba(255,215,0,0.5);
  font-size:28px;
  font-weight:bold;
  color:#000;
  z-index:9999;
  cursor:pointer;
  transition:opacity .3s,transform .2s;
}
#installBtn.show{display:block;opacity:1;transform:scale(1);}
#installBtn:active{transform:scale(.9);}
</style>
</head>
<body>

<img src="https://reuven2k.com/exe.gif" class="hero-logo" alt="×¤×Ÿ ××§×¡×¤×¨×¡">
<div class="wrap">
  <h1>×¤×Ÿ ××§×¡×¤×¨×¡</h1>
  <h2>××¢×¨×›×ª ×œ×–×™××•×Ÿ ×ª×•×¨×™×</h2>

  <div id="msgError" class="error"></div>
  <div id="msgOk" class="success"></div>

  <label for="date">×‘×—×¨×™ ×ª××¨×™×š:</label>
  <input type="date" id="date" required>

  <label for="time">×‘×—×¨×™ ×©×¢×” ×¤× ×•×™×”:</label>
  <select id="time" required><option value="">×˜×•×¢×Ÿ ×©×¢×•×ªâ€¦</option></select>

  <label for="name">×©× ×”×œ×§×•×—×”:</label>
  <input type="text" id="name" placeholder="×”×›× ×¡ ×©×" required>

  <label for="phone">××¡×¤×¨ ×˜×œ×¤×•×Ÿ:</label>
  <input type="tel" id="phone" placeholder="×”×›× ×¡ ×˜×œ×¤×•×Ÿ" required>

  <button id="save" class="btn">×©××•×¨</button>

  <button id="galleryBtn" type="button" class="btn-secondary"><b>×’×œ×¨×™×™×ª ×¢×‘×•×“×•×ª</b></button>
  <button id="navWaze" type="button" class="btn-secondary">
    <b>× ×•×•×˜ ×œ ×¤×Ÿ-××§×¡×¤×¨×¡</b>
    <img class="icon" src="https://reuven2k.com/map.png" alt="">
  </button>

  <div class="ver">Version: 1.6.5</div>
</div>

<!-- ×›×¤×ª×•×¨ ×¦×£ ×œ×”×ª×§× ×” -->
<button id="installBtn" title="×”×•×¡×£ ×œ××¡×š ×”×‘×™×ª">ğŸ“²</button>

<script>
/* ×©××™×¨×” ×¢×œ ××¢×¨×›×ª ×”×ª×•×¨×™× ×”××§×•×¨×™×ª ×©×œ×š â€“ ××™×Ÿ ×©×™× ×•×™ ×œ×•×’×™×§×” ×‘×›×œ×œ */

/* ×¨×™×©×•× Service Worker */
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/sw.js')
  .then(()=>console.log('SW ×¨×©×•×'))
  .catch(err=>console.warn('SW ×›×©×œ:',err));
}

/* âœ… ×§×•×“ ×”×ª×§× ×” PWA ××ª×•×§×Ÿ */
let deferredPrompt;
const installBtn = document.getElementById('installBtn');

window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
  if (localStorage.getItem('pwaInstalledOnce')) return; // ×›×‘×¨ ×¡×™×¨×‘/×”×ª×§×™×Ÿ ×‘×¢×‘×¨
  installBtn.classList.add('show');
});

installBtn.addEventListener('click', async () => {
  if (!deferredPrompt) return;
  installBtn.style.display = 'none';
  localStorage.setItem('pwaInstalledOnce', '1');
  deferredPrompt.prompt();
  const { outcome } = await deferredPrompt.userChoice;
  console.log('×ª×•×¦××”:', outcome);
  deferredPrompt = null;
});

/* ×–×™×”×•×™ ×× ×›×‘×¨ ××•×ª×§×Ÿ */
window.addEventListener('appinstalled', () => {
  console.log('×”×•×ª×§×Ÿ ×¢×œ ×”××¡×š!');
  installBtn.remove();
  localStorage.setItem('pwaInstalledOnce', '1');
});
</script>
  <script src="/pwa-install.js"></script>
</body>
</html>
