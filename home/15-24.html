<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> פנטהאוז יוקרתי - סיור וירטואלי בנכס</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;700;900&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.css"/>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/image-map-resizer/1.0.10/js/imageMapResizer.min.js"></script>

    <style>
        /* ================================================================= */
        /* לוח בקרה למשתמש - שנה כאן!                   */
        /* ================================================================= */
        :root {
            /* 1. גודל האייקון (העיגול השחור) */
            --camera-size: 20px; 

            /* 2. מהירות ההבהוב */
            --blink-speed: 0.6s;
        }
        /* ================================================================= */


        body {
            font-family: 'Rubik', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #1a1a1a;
            color: #ffffff;
            text-align: center;
            overflow-x: hidden;
        }

        /* הגדרת אנימציה מהירה לטקסט */
        @keyframes slow-pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        /* הגדרת אנימציה לאייקונים במפה - משתמשת במהירות שהגדרת למעלה */
        @keyframes icon-pulse {
            0% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(0.9); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }

        /* כותרת ראשית */
        header {
            padding-top: 40px;
            padding-bottom: 10px;
            padding-right: 20px;
            padding-left: 20px;
            background: linear-gradient(to bottom, #000000, #1a1a1a);
        }

        h1 {
            margin: 0;
            font-weight: 300;
            letter-spacing: 2px;
            text-shadow: 2px 2px 10px rgba(0,0,0,0.8);
            color: #d4af37;
        }

        h2.subtitle {
            font-size: 1.2rem;
            color: #ccc;
            margin-top: 5px;
            margin-bottom: 0;
            font-weight: 300;
        }

        /* טקסט מהבהב מהר + הילת זהב */
        p.instruction {
            color: #d4af37;
            margin-top: 5px;
            margin-bottom: 30px;
            font-size: 1.6rem;
            font-weight: 700;
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.8),
                         0 0 20px rgba(212, 175, 55, 0.6),
                         0 0 30px rgba(212, 175, 55, 0.4);
            animation: slow-pulse 1s infinite ease-in-out;
        }

        /* מיכל התמונה הראשית */
        .plan-container {
            position: relative;
            max-width: 100%;
            margin: 0 auto;
            display: inline-block;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        img[usemap] {
            border: none;
            height: auto;
            max-width: 100%;
            width: auto;
            display: block;
        }

        /* --- עיצוב האייקון - שואב את הנתונים מלוח הבקרה --- */
        .map-icon-overlay {
            position: absolute;
            z-index: 20;
            pointer-events: none;
            color: #d4af37;
            
            background-color: rgba(0, 0, 0, 0.85);
            border-radius: 50%;
            border: 1px solid #d4af37;
            
            padding: 2px; /* ריווח מינימלי קבוע */
            
            /* שימוש במשתנה גודל שהגדרת */
            width: var(--camera-size);  
            height: var(--camera-size);
            
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.5);

            /* שימוש במשתנה מהירות שהגדרת */
            animation: icon-pulse var(--blink-speed) infinite ease-in-out;
            transform: translate(-50%, -50%);
        }
        
        .map-icon-overlay svg {
            /* האייקון הפנימי תמיד יהיה 60% מגודל העיגול */
            width: 60%;
            height: 60%;
            fill: currentColor;
            display: block;
        }

        /* --- עיצוב אזור הטקסט למטה --- */
        .details-section {
            max-width: 1100px;
            margin: 50px auto;
            padding: 20px;
            text-align: right;
            direction: rtl;
        }

        .main-description {
            font-size: 1.3rem;
            line-height: 1.8;
            font-weight: 300;
            margin-bottom: 50px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.9);
            border-bottom: 1px solid #333;
            padding-bottom: 30px;
        }

        /* גריד לסידור המאפיינים */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 40px;
            text-align: right;
            justify-items: start;
        }

        .feature-category h3 {
            color: #d4af37;
            font-size: 1.4rem;
            margin-bottom: 20px;
            border-bottom: 2px solid #d4af37;
            display: block;
            padding-bottom: 5px;
            text-shadow: 1px 1px 2px rgba(0,0,0,1);
            text-align: right;
        }

        .feature-category ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .feature-category li {
            margin-bottom: 12px;
            font-size: 1.05rem;
            color: #f0f0f0;
            position: relative;
            padding-right: 25px;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.8);
            line-height: 1.5;
            text-align: right;
        }

        /* בולטים מעוצבים */
        .feature-category li::before {
            content: "•";
            color: #d4af37;
            position: absolute;
            right: 0;
            font-size: 1.5rem;
            line-height: 1rem;
            top: 5px;
        }

        /* --- עיצוב המודל (חלון קופץ) --- */
        #panoramaModal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.95);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            position: relative;
            margin: 4vh auto;
            width: 90%;
            max-width: 1400px;
            height: 85vh;
            background: #000;
            border: 1px solid #333;
            box-shadow: 0 0 50px rgba(0,0,0,0.8);
        }

        /* כפתור סגירה */
        .close-btn-container {
            position: absolute;
            top: 20px;
            right: 30px;
            z-index: 1001;
            cursor: pointer;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px 20px;
            border-radius: 50px;
            border: 2px solid #d4af37;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
        }
        
        .close-btn-container:hover {
            background: #d4af37;
        }

        .close-text {
            font-size: 1.2rem;
            font-weight: bold;
            color: #fff;
        }

        .close-icon {
            color: #fff;
            font-size: 30px;
            font-weight: 100;
            line-height: 0.8;
        }

        #panorama { width: 100%; height: 100%; }
        area { cursor: pointer; }

        /* פוטר ליצירת קשר */
        .contact-footer {
            margin-top: 80px;
            padding: 50px 20px;
            background: linear-gradient(to top, #000000, #111111);
            border-top: 4px solid #d4af37;
        }

        .contact-text {
            font-size: 2rem;
            font-weight: 900;
            line-height: 1.5;
            color: #ffffff;
            text-shadow: 3px 3px 6px rgba(0,0,0,1);
        }

        .contact-phone {
            display: block;
            font-size: 2.8rem;
            color: #d4af37;
            margin: 20px 0;
            letter-spacing: 2px;
            cursor: pointer;
        }

        .contact-sub {
            font-size: 1.5rem;
            font-weight: 700;
            color: #ccc;
        }

        /* --- עיצוב המונה החדש --- */
        .page-counter {
            font-size: 1rem;
            color: #d4af37;
            margin-top: 15px;
            font-weight: 400;
            letter-spacing: 1px;
            opacity: 0.9;
        }

        /* --- כפתורים צפים (מוקטנים) --- */
        .floating-actions{
            position: fixed;
            left: 18px;
            bottom: 18px;
            z-index: 2000;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .floating-btn{
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 2px solid #d4af37;
            background: rgba(0,0,0,0.75);
            box-shadow: 0 8px 20px rgba(0,0,0,0.55);
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            transition: transform 0.15s ease, background 0.25s ease;
            -webkit-tap-highlight-color: transparent;
        }
        .floating-btn:hover{
            background: #d4af37;
            transform: translateY(-2px);
        }
        .floating-btn svg{
            width: 24px;
            height: 24px;
            fill: #fff;
        }

        /* התאמה למובייל */
        @media (max-width: 768px) {
            p.instruction { font-size: 1.2rem; width: 90%; margin: 10px auto 20px auto; }
            .main-description { font-size: 1.1rem; }
            .details-section { padding: 10px; }
            .contact-text { font-size: 1.5rem; }
            .contact-phone { font-size: 2rem; }
            
            /* התאמת גודל כפתורים צפים במובייל */
            .floating-actions{ left: 14px; bottom: 14px; }
            .floating-btn{ width: 48px; height: 48px; }
            .floating-btn svg{ width: 22px; height: 22px; }

            /* התאמת גודל אייקונים על המפה במובייל - מחושב אוטומטית כ-90% מהגודל שהגדרת */
            .map-icon-overlay { 
                width: calc(var(--camera-size) * 0.9); 
                height: calc(var(--camera-size) * 0.9);
            }
        }

    </style>
</head>
<body>

    <header>
        <h1>למכירה פנטהאוז</h1>
           <h1>מהמם בנהריה</h1>
        <h2 class="subtitle">חווית מגורים ברמה אחרת</h2>
    </header>

    <p class="instruction">לחץ על כל אחד מחדרי הדירה לסיור וירטואלי 360° </p>

    <div class="plan-container">
        <img src="master15-24.png" usemap="#houseMap" id="mainImage" alt="תוכנית הבית">
        <div id="icons-container"></div>

        <map name="houseMap" id="houseMap">
            <area target="" alt="ממד" title="ממד" href="#" coords="1171,467,1402,466,1402,710,1167,714,1174,470" shape="poly" onclick="openPano('mamad')">
            <area target="" alt="חדר הורים" title="חדר הורים" href="#" coords="1183,167,1502,238,1498,448,1158,444,1155,364,1058,363,1070,280,1178,282,1183,168" shape="poly" onclick="openPano('master_bedroom')">
            <area target="" alt="חדר שינה" title="חדר שינה" href="#" coords="914,46,1166,40,1167,267,915,270,915,47" shape="poly" onclick="openPano('bedroom')">
            <area target="" alt="מטבח" title="מטבח" href="#" coords="1055,622,839,627,843,826,1059,827,1055,623" shape="poly" onclick="openPano('kitchen')">
            <area target="" alt="סלון" title="סלון" href="#" coords="898,171,771,170,775,284,674,282,671,455,579,456,588,822,834,826,835,679,807,683,811,602,1055,606,1059,284,903,283,899,172" shape="poly" onclick="openPano('living_room')">
            <area target="" alt="חדר כביסה" title="חדר כביסה" href="#" coords="656,170,464,167,467,262,658,264,656,170" shape="poly" onclick="openPano('laundry')">
            <area target="" alt="מרפסת" title="מרפסת" href="#" coords="555,459,558,826,354,823,358,963,154,963,155,835,27,830,30,452,8,452,0,206,243,147,242,32,520,34,520,156,452,159,456,270,656,274,655,443,558,443,556,462" shape="poly" onclick="openPano('balcony')">
            <area target="" alt="מקלחת" title="מקלחת" href="#" coords="1074,686,1147,683,1151,727,1370,735,1375,827,1071,826,1079,687" shape="poly" onclick="openPano('shower')">
        </map>
    </div>

    <div class="details-section">
        <div class="main-description">
            פנטהאוז מושקע ברמה גבוהה למכירה, בבניין שקט ומטופח בן 6 קומות (בניין מבוקש).
            עם שני דיירים בלבד בקומת הפנטהאוז – פרטיות מלאה.
            הדירה נהנית מנוף פתוח ומהמם הנשקף מהמרפסת, ללא בנייה מסביב שתחסום.
            <strong>כניסה עם מזוודות.</strong>
        </div>

        <div class="features-grid">
            <div class="feature-category">
                <h3>מפרט הדירה</h3>
                <ul>
<li>דירת 4 חדרים ענקית

                    <li>3 חדרי שינה מרווחים </li>
                    <li>קיים חדר שינה נוסף </li>
                    <li>שטח בארנונה: 136 מ"ר</li>
                    <li>מרפסת ענקית כ־80 מ"ר (חצי מקורה)</li>
                    <li>סלון ענק ומרווח – חלל אירוח אמיתי</li>
                    <li>חדר אמבטיה ענק לאחר שיפוץ מלא!!</li>
                    <li>2 חדרי שירותים</li>
                    <li>4 כיווני אוויר</li>
                </ul>
            </div>

            <div class="feature-category">
                <h3>מטבחים ואירוח</h3>
                <ul>
                    <li>מטבח פנים חדש ומעוצב עם אי ענק</li>
                    <li>שפע מקומות אחסון</li>
                    <li>מטבח חוץ מושקע מאוד לאירוח</li>
                    <li>ארונות מטבח חוץ מלאים (עליון ותחתון)</li>
                    <li>נוף פתוח ועוצר נשימה</li>
                </ul>
            </div>

            <div class="feature-category">
                <h3>סטנדרט, בניין וסביבה</h3>
                <ul>
                    <li>בית חכם </li>
                    <li>מערכת חימום מים בגז</li>
                    <li>תריסים חשמליים ומיזוג אוויר (מרכזי + אישיים)</li>
                    <li>ריצוף פורצלן והנמכות גבס מיוחדות עם תאורת לד</li>
                    <li>חניה בטאבו + עמדת טעינה לרכב פלאן-אין</li>
                    <li>מחסן פרטי צמוד</li>
                    <li>מרחק הליכה לרכבת, מרכזי קניות ופארקים</li>
                </ul>
            </div>
        </div>
    </div>

    <footer class="contact-footer">
        <div class="contact-text">
            לעוד פרטים וסיור בדירה
            <span class="contact-phone" onclick="window.location.href='tel:0507449001'">050-7449001</span>
            <span class="contact-sub">ללא תיווך</span>
            
            <div class="page-counter">
                צפיות בדף: <span id="visit-count">טוען...</span>
            </div>
        </div>
    </footer>

    <div class="floating-actions" aria-label="פעולות מהירות">
        <a class="floating-btn" href="tel:0507449001" aria-label="התקשר">
            <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M6.62 10.79a15.05 15.05 0 0 0 6.59 6.59l2.2-2.2a1 1 0 0 1 1.01-.24c1.12.37 2.33.57 3.58.57a1 1 0 0 1 1 1V20a1 1 0 0 1-1 1C10.07 21 3 13.93 3 5a1 1 0 0 1 1-1h3.5a1 1 0 0 1 1 1c0 1.25.2 2.46.57 3.58a1 1 0 0 1-.24 1.01l-2.2 2.2z"/>
            </svg>
        </a>

        <a class="floating-btn" href="https://wa.me/972507449001?text=%D7%94%D7%99%D7%99%20%D7%90%D7%95%D7%93%D7%9C%D7%99%D7%94%2C%0A%D7%A8%D7%90%D7%99%D7%AA%D7%99%20%D7%90%D7%AA%20%D7%A0%D7%AA%D7%95%D7%A0%D7%99%20%D7%94%D7%93%D7%99%D7%A8%D7%94%20%D7%94%D7%AA%D7%A8%D7%A9%D7%9E%D7%AA%D7%99%20%D7%9C%D7%98%D7%95%D7%91%D7%94%0A%D7%90%D7%A9%D7%9E%D7%97%20%D7%9C%D7%A7%D7%91%D7%9C%20%D7%A2%D7%95%D7%93%20%D7%A4%D7%A8%D7%98%D7%99%D7%9D" target="_blank" rel="noopener" aria-label="שלח וואטסאפ">
            <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M20.52 3.48A11.78 11.78 0 0 0 12.04 0C5.43 0 .06 5.37.06 11.98c0 2.11.55 4.17 1.6 5.99L0 24l6.2-1.63a11.9 11.9 0 0 0 5.84 1.49h.01c6.61 0 11.98-5.37 11.98-11.98 0-3.2-1.25-6.21-3.51-8.4zM12.05 21.3h-.01a9.86 9.86 0 0 1-5.03-1.38l-.36-.21-3.68.97.98-3.59-.24-.37a9.83 9.83 0 0 1-1.52-5.26C2.19 6.02 6.6 1.6 12.04 1.6c2.63 0 5.1 1.02 6.96 2.88a9.78 9.78 0 0 1 2.88 6.96c0 5.44-4.41 9.86-9.83 9.86zm5.73-7.39c-.31-.16-1.84-.91-2.12-1.01-.28-.1-.48-.16-.68.16-.2.31-.78 1.01-.96 1.22-.18.2-.35.23-.66.08-.31-.16-1.3-.48-2.48-1.52-.92-.82-1.54-1.84-1.72-2.15-.18-.31-.02-.48.14-.64.14-.14.31-.35.46-.52.16-.18.2-.31.31-.52.1-.2.05-.39-.03-.55-.08-.16-.68-1.64-.93-2.25-.24-.58-.48-.5-.68-.51h-.58c-.2 0-.52.08-.8.39-.28.31-1.05 1.03-1.05 2.51 0 1.48 1.08 2.91 1.23 3.11.16.2 2.12 3.24 5.14 4.55.72.31 1.28.5 1.72.64.72.23 1.38.2 1.9.12.58-.09 1.84-.75 2.1-1.48.26-.73.26-1.35.18-1.48-.08-.13-.28-.2-.58-.36z"/>
            </svg>
        </a>

        <a class="floating-btn" href="https://waze.com/ul?q=%D7%94%D7%96%D7%9E%D7%99%D7%A8%2015%20%D7%A0%D7%94%D7%A8%D7%99%D7%94&navigate=yes" target="_blank" rel="noopener" aria-label="פתח וויז">
            <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M12 2C6.49 2 2 6.04 2 11.01c0 2.57 1.18 4.9 3.09 6.62.12.11.19.26.19.43V21a1 1 0 0 0 1.45.9l2.63-1.31c.15-.07.32-.09.48-.04.68.21 1.41.33 2.17.33 5.51 0 10-4.04 10-8.99S17.51 2 12 2zm0 16.9c-.68 0-1.34-.11-1.95-.32a1.2 1.2 0 0 0-.94.06l-1.84.92v-2.33c0-.33-.14-.65-.39-.87C5.18 15.04 4 13.09 4 11.01 4 7.14 7.58 4 12 4s8 3.14 8 7.01-3.58 7.89-8 7.89zm-3-8.4a1.1 1.1 0 1 0 0 2.2 1.1 1.1 0 0 0 0-2.2zm6 0a1.1 1.1 0 1 0 0 2.2 1.1 1.1 0 0 0 0-2.2z"/>
            </svg>
        </a>
    </div>

    <div id="panoramaModal">
        <div class="close-btn-container" onclick="closePano()">
            <span class="close-text">חזור למפרט הדירה</span>
            <span class="close-icon">&times;</span>
        </div>
        
        <div class="modal-content">
            <div id="panorama"></div>
        </div>
    </div>

    <script>
        imageMapResize();

        // --- פונקציות לחישוב והצגת אייקונים במרכז ---

        function getPolyCenter(coordsStr) {
            const coords = coordsStr.split(',').map(Number);
            let sumX = 0, sumY = 0, count = 0;
            for (let i = 0; i < coords.length; i += 2) {
                sumX += coords[i];
                sumY += coords[i + 1];
                count++;
            }
            return { x: sumX / count, y: sumY / count };
        }

        function updateMapIcons() {
            const map = document.getElementById('houseMap');
            const areas = map.getElementsByTagName('area');
            const iconsContainer = document.getElementById('icons-container');
            
            iconsContainer.innerHTML = '';

            const cameraIconSVG = `
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M12 8.8a3.2 3.2 0 1 0 0 6.4 3.2 3.2 0 0 0 0-6.4z"/>
                    <path d="M9 2L7.17 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-3.17L15 2H9zm3 15a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/>
                </svg>
            `;

            for (let i = 0; i < areas.length; i++) {
                const coordsStr = areas[i].getAttribute('coords');
                if (coordsStr) {
                    const center = getPolyCenter(coordsStr);
                    const iconDiv = document.createElement('div');
                    iconDiv.className = 'map-icon-overlay';
                    iconDiv.innerHTML = cameraIconSVG;
                    iconDiv.style.left = center.x + 'px';
                    iconDiv.style.top = center.y + 'px';
                    iconsContainer.appendChild(iconDiv);
                }
            }
        }

        window.addEventListener('load', function() {
            setTimeout(updateMapIcons, 250);
        });

        let resizeTimer;
        window.addEventListener('resize', function() {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(updateMapIcons, 200);
        });

        // --- ניהול מונה צפיות (Local Storage) ---
        function updateVisitCounter() {
            // שם המפתח בזיכרון הדפדפן
            const storageKey = 'penthouse_visits_count';
            
            // בדיקה אם קיים כבר מספר
            let currentCount = localStorage.getItem(storageKey);
            
            if (!currentCount) {
                // אם זו פעם ראשונה, נתחיל מ-850 (כדי שיראה מרשים)
                currentCount = 850;
            } else {
                // אחרת, המר למספר ותוסיף 1
                currentCount = parseInt(currentCount) + 1;
            }
            
            // שמור את המספר החדש
            localStorage.setItem(storageKey, currentCount);
            
            // הצג בדף
            const counterElement = document.getElementById('visit-count');
            if (counterElement) {
                counterElement.innerText = currentCount.toLocaleString(); // מוסיף פסיקים למספרים גדולים
            }
        }

        // הפעלת המונה בטעינת הדף
        updateVisitCounter();

        // --- סוף פונקציות ---


        const roomImages = {
            'mamad': 'mamad.jpg',
            'master_bedroom': 'master.jpg',
            'bedroom': 'bedroom.jpg',
            'kitchen': 'kitchen.jpg',
            'living_room': 'living.jpg',
            'laundry': 'laundry.jpg',
            'balcony': 'balcony.jpg',
            'shower': 'shower.jpg'
        };

        let viewer;

        function openPano(roomName) {
            const modal = document.getElementById("panoramaModal");
            const imageFile = roomImages[roomName];

            if (!imageFile) {
                console.error("חסרה תמונה עבור: " + roomName);
                return;
            }

            modal.style.display = "block";
            document.body.style.overflow = "hidden"; 

            if (viewer) {
                viewer.destroy();
            }

            viewer = pannellum.viewer('panorama', {
                "type": "equirectangular",
                "panorama": imageFile,
                "autoLoad": true,
                "autoRotate": -12, 
                "compass": true,
                "showZoomCtrl": false,
                "strings": { "loadingLabel": "טוען..." }
            });
        }

        function closePano() {
            const modal = document.getElementById("panoramaModal");
            modal.style.display = "none";
            document.body.style.overflow = "auto";
            
            if (viewer) {
                viewer.destroy();
                viewer = null;
            }
        }

        window.onclick = function(event) {
            const modal = document.getElementById("panoramaModal");
            if (event.target == modal) {
                closePano();
            }
        }
    </script>

</body>
</html>
