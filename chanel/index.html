<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>איפה המשחק?</title>
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; text-align: center; background: #1a1a1a; color: white; }
        .box { border: 2px solid #00ff00; padding: 20px; margin: 20px auto; width: 80%; border-radius: 15px; }
        .loading { font-style: italic; color: #aaa; }
    </style>
</head>
<body>

    <h1>שידורי ספורט להיום</h1>
    <div id="results" class="box">
        <p class="loading">מחפש נתוני שידור חיים...</p>
    </div>

    <script>
        async function getBroadcast() {
            const resultsDiv = document.getElementById('results');
            // משתמשים במתווך כדי לעקוף חסימת גישה לאתרים ישראלים
            const targetUrl = encodeURIComponent('https://israsport.co.il/'); 
            const proxyUrl = `https://api.allorigins.win/get?url=${targetUrl}`;

            try {
                const response = await fetch(proxyUrl);
                const data = await response.json();
                const parser = new DOMParser();
                const doc = parser.parseFromString(data.contents, 'text/html');

                // כאן הקוד מחפש אלמנטים שכוללים שמות של ערוצים
                // זהו "ניחוש מושכל" לפי מבנה אתרי לוחות שידורים נפוצים
                const games = doc.querySelectorAll('.game-row, .match-item, tr'); 
                let foundAny = false;
                let htmlContent = "<h3>משחקים וערוצים:</h3><ul style='list-style:none; padding:0;'>";

                games.forEach(game => {
                    const text = game.innerText;
                    if (text.includes("ספורט") || text.includes("SPORT")) {
                        htmlContent += `<li style="margin-bottom:10px; border-bottom:1px solid #333; padding:5px;">${text}</li>`;
                        foundAny = true;
                    }
                });

                if (!foundAny) {
                    resultsDiv.innerHTML = "לא נמצאו נתוני שידור זמינים כרגע. בדוק שוב קרוב למועד המשחק.";
                } else {
                    resultsDiv.innerHTML = htmlContent + "</ul>";
                }

            } catch (error) {
                resultsDiv.innerHTML = "שגיאה בטעינת הנתונים. ייתכן והמקור חסום.";
            }
        }

        getBroadcast();
    </script>
</body>
</html>
