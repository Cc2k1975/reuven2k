<!doctype html>
<html lang="he" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>×¤×Ÿ ××§×¡×¤×¨×¡ â€“ ×§×‘×™×¢×ª ×ª×•×¨</title>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />

<!-- PWA: ×§×™×©×•×¨ ×œ×× ×™×¤×¡×˜ + ×¦×‘×¢ ×›×¨×•× + ××™×™×§×•×Ÿ ×œ××™×™×¤×•×Ÿ (×”××™×™×§×•×Ÿ ×©×œ×š) -->
<link rel="manifest" href="/manifest.webmanifest">
<meta name="theme-color" content="#d4af37">
<link rel="apple-touch-icon" href="/Icon app.png" />

<style>
  body {
    font-family: Arial, Helvetica, sans-serif;
    background: #000;
    margin: 0;
    padding: 0;
    color: #d4af37;
  }

  .hero-logo {
    width: 92px;
    display: block;
    margin: -6px auto -12px auto;
  }

  .wrap {
    max-width: 520px;
    margin: 4px auto;
    padding: 20px 24px 24px;
    background: #111;
    border-radius: 16px;
    box-shadow: 0 6px 18px rgba(255, 215, 0, 0.25);
  }

  h1 {
    margin: 0 0 4px;
    font-size: 33px;
    color: #ffd700;
    text-align: center;
  }

  h2 {
    margin: 0 0 16px;
    font-size: 20.7px;
    color: #d4af37;
    text-align: center;
  }

  label {
    display: block;
    margin: 12px 4px 5px;
    font-weight: 600;
    color: #ffd700;
    font-size: 16.6px;
  }

  input, select, button {
    width: 100%;
    padding: 12px 14px;
    border: 1px solid #d4af37;
    border-radius: 10px;
    font-size: 16.6px;
    box-sizing: border-box;
    background: #222;
    color: #ffd700;
  }

  input[type="tel"] { text-align: right; }

  .btn {
    background: #d4af37;
    color: #000;
    border: 0;
    cursor: pointer;
    margin-top: 16px;
    font-weight: 700;
    font-size: 16.6px;
  }

  .btn[disabled] { opacity: .6; cursor: not-allowed; }

  .btn-secondary {
    background: #000;
    color: #ffd700;
    border: 1px solid #d4af37;
    margin-top: 9px;
    font-size: 14.5px;
    padding: 10px;
  }

  .btn-secondary img.icon {
    width: 26.4px;
    height: 26.4px;
    vertical-align: middle;
    margin: 0 6px;
  }

  .error {
    background: #330000;
    color: #ff6666;
    border: 1px solid #ff9999;
    padding: 9px;
    border-radius: 10px;
    margin-top: 9px;
    display: none;
    font-size: 15px;
  }

  .success {
    background: #003300;
    color: #66ff99;
    border: 1px solid #99ffcc;
    padding: 9px;
    border-radius: 10px;
    margin-top: 9px;
    display: none;
    font-size: 15px;
  }

  option.taken { color: #888; background: #333; }

  .ver {
    margin-top: 14px;
    font-size: 12.4px;
    color: #bfa76f;
    text-align: center;
  }

  .modal-backdrop {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.85);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 50;
  }

  .modal {
    background: #111;
    border-radius: 14px;
    max-width: 420px;
    width: 92%;
    padding: 18px 18px 12px;
    box-shadow: 0 0 25px rgba(255,215,0,.3);
    color: #ffd700;
  }

  .modal h3 {
    margin: 0 0 8px;
    font-size: 20.7px;
    color: #ffd700;
  }

  .modal p {
    margin: 0 0 14px;
    color: #ffd700;
    white-space: pre-line;
    font-size: 15px;
  }

  .modal .row {
    display: flex;
    gap: 10px;
    justify-content: space-between;
  }

  .modal .row button {
    flex: 1;
    padding: 10px;
    border-radius: 10px;
    border: 0;
    font-weight: 700;
    font-size: 15px;
  }

  .modal .cancel {
    background: #222;
    color: #ffd700;
    border: 1px solid #ffd700;
  }

  .modal .ok {
    background: #ffd700;
    color: #000;
  }
</style>
</head>
<body>

  <img src="https://reuven2k.com/exe.gif" alt="×¤×Ÿ ××§×¡×¤×¨×¡" class="hero-logo" />

  <div class="wrap">
    <h1>×¤×Ÿ ××§×¡×¤×¨×¡</h1>
    <h2>××¢×¨×›×ª ×œ×–×™××•×Ÿ ×ª×•×¨×™×</h2>

    <div id="msgError" class="error"></div>
    <div id="msgOk" class="success"></div>

    <label for="date">×‘×—×¨×™ ×ª××¨×™×š:</label>
    <input type="date" id="date" required />

    <label for="time">×‘×—×¨×™ ×©×¢×” ×¤× ×•×™×”:</label>
    <select id="time" required>
      <option value="">×˜×•×¢×Ÿ ×©×¢×•×ªâ€¦</option>
    </select>

    <label for="name">×©× ×”×œ×§×•×—×”:</label>
    <input type="text" id="name" placeholder="×”×›× ×¡ ×©×" required />

    <label for="phone">××¡×¤×¨ ×˜×œ×¤×•×Ÿ:</label>
    <input type="tel" id="phone" placeholder="×”×›× ×¡ ×˜×œ×¤×•×Ÿ" required />

    <button id="save" class="btn">×©××•×¨</button>

    <button id="galleryBtn" type="button" class="btn-secondary">
      <b>×’×œ×¨×™×™×ª ×¢×‘×•×“×•×ª</b>
    </button>

    <button id="navWaze" type="button" class="btn-secondary">
      <b>× ×•×•×˜ ×œ ×¤×Ÿ-××§×¡×¤×¨×¡</b>
      <img class="icon" src="https://reuven2k.com/map.png" alt="" />
    </button>

    <div class="ver">Version: 1.6.3</div>
  </div>

  <div id="icsModal" class="modal-backdrop" role="dialog" aria-modal="true">
    <div class="modal">
      <h3>×œ×”×•×¡×™×£ ×ª×–×›×•×¨×ª ×œ×™×•××Ÿ?</h3>
      <p id="icsText">× ×™×¦×•×¨ ××™×¨×•×¢ ×œ×™×•××Ÿ ×‘×ª××¨×™×š ___ ×‘×©×¢×” ___ ×›×•×œ×œ ×ª×–×›×•×¨×ª ×©×¢×” ×œ×¤× ×™.
×œ×§×•×—×” ×™×§×¨×”, ××–×›×™×¨×” ×œ×š ×œ×”×’×™×¢ ×—×¤×•×¤×” ×•×‘×–××Ÿ ğŸ’‡â€â™€ï¸
×ª×•×“×” - ×¤×Ÿ ××§×¡×¤×¨×¡</p>
      <div class="row">
        <button type="button" class="cancel" id="btnCancel">×‘×™×˜×•×œ</button>
        <button type="button" class="ok" id="btnOk">××™×©×•×¨</button>
      </div>
    </div>
  </div>

<script>
/* ×›×œ ×”×§×•×“ ×©×œ×š ×‘×“×™×•×§ ×›××• ×©×”×™×” */

/* PWA: ×¨×™×©×•× Service Worker */
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/sw.js').catch(()=>{});
}

/* âœ… ×ª×•×¡×¤×ª × ×§×™×™×” â€“ ×›×¤×ª×•×¨ ×”×ª×§× ×” ×œ××¡×š ×”×‘×™×ª */
let deferredPrompt;

window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;

  if (localStorage.getItem('pwaPromptShown')) return;

  const btn = document.createElement('button');
  btn.textContent = 'ğŸ“² ×”×•×¡×£ ××ª ×¤×Ÿ ××§×¡×¤×¨×¡ ×œ××¡×š ×”×‘×™×ª';
  Object.assign(btn.style, {
    position: 'fixed',
    bottom: '20px',
    left: '50%',
    transform: 'translateX(-50%)',
    background: '#ffd700',
    color: '#000',
    border: 'none',
    padding: '12px 18px',
    fontSize: '15px',
    borderRadius: '12px',
    boxShadow: '0 0 20px rgba(255,215,0,0.4)',
    fontWeight: '700',
    cursor: 'pointer',
    zIndex: '9999',
    opacity: '0',
    transition: 'opacity 0.3s'
  });

  document.body.appendChild(btn);
  setTimeout(()=> btn.style.opacity='1',200);

  btn.addEventListener('click', async () => {
    btn.remove();
    localStorage.setItem('pwaPromptShown','1');
    deferredPrompt.prompt();
    await deferredPrompt.userChoice;
    deferredPrompt = null;
  });
});
</script>
</body>
</html>
