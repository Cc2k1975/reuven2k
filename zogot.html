<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>××™ ××›×™×¨ ××ª ××™? â€“ ××©×—×§ ×–×•×’×•×ª</title>
  <style>
    :root{
      --bg:#f5f7fb;
      --card:#ffffff;
      --accent:#ff6a00;
      --accent-soft:#ffe4cc;
      --accent-dark:#e65c00;
      --ink:#1f2933;
      --muted:#6b7280;
      --border:1px solid rgba(0,0,0,.08);
      --radius:16px;
      --shadow:0 10px 25px rgba(0,0,0,0.08);
    }
    *{box-sizing:border-box}
    html,body{
      margin:0;
      padding:0;
      font-family:system-ui,"Heebo","Alef","Arial",sans-serif;
      background:linear-gradient(180deg,#eef2ff,#ffffff);
      color:var(--ink);
    }
    body{
      display:flex;
      justify-content:center;
      align-items:flex-start;
      min-height:100vh;
      padding:16px;
    }
    .app{
      width:100%;
      max-width:900px;
      background:var(--card);
      border-radius:20px;
      box-shadow:var(--shadow);
      padding:16px 16px 24px;
    }
    h1{
      margin:0 0 4px;
      font-size:1.6rem;
      text-align:center;
    }
    .subtitle{
      margin:0 0 16px;
      text-align:center;
      color:var(--muted);
      font-size:.9rem;
    }
    h2{
      margin:16px 0 8px;
      font-size:1.2rem;
    }
    section{
      margin-top:10px;
      padding:12px;
      border-radius:var(--radius);
      border:var(--border);
      background:#fafbff;
    }
    .hidden{display:none}

    .teams-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
      gap:8px;
      margin:8px 0 8px;
    }
    .field{
      display:flex;
      flex-direction:column;
      gap:4px;
      font-size:.9rem;
    }
    .field label{font-weight:600;}
    input[type="text"]{
      padding:6px 8px;
      border-radius:10px;
      border:1px solid #d1d5db;
      font-size:.9rem;
    }
    input[type="text"]:focus{
      outline:none;
      border-color:var(--accent);
      box-shadow:0 0 0 1px rgba(255,106,0,.35);
    }
    .btn{
      border:none;
      border-radius:999px;
      padding:8px 16px;
      font-size:.95rem;
      font-weight:600;
      cursor:pointer;
      background:var(--accent);
      color:white;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:6px;
      box-shadow:0 4px 10px rgba(255,106,0,.35);
      transition:.15s transform,.15s box-shadow,.15s background;
    }
    .btn:hover{
      transform:translateY(-1px);
      background:var(--accent-dark);
      box-shadow:0 6px 14px rgba(255,106,0,.45);
    }
    .btn:active{
      transform:translateY(0);
      box-shadow:0 2px 6px rgba(0,0,0,.25);
    }
    .btn.secondary{
      background:#e5e7eb;
      color:#111827;
      box-shadow:none;
    }
    .btn.secondary:hover{
      background:#d1d5db;
      box-shadow:none;
    }
    .btn.small{
      padding:6px 10px;
      font-size:.8rem;
    }
    .error{
      color:#b91c1c;
      font-size:.85rem;
      margin-top:6px;
    }
    .hint{
      font-size:.85rem;
      color:var(--muted);
      margin-top:4px;
    }

    .teams-table{
      width:100%;
      border-collapse:collapse;
      margin-top:6px;
      font-size:.9rem;
    }
    .teams-table th,
    .teams-table td{
      padding:6px 4px;
      text-align:center;
      border-bottom:1px solid #e5e7eb;
    }
    .teams-table th{
      background:#eef2ff;
      font-weight:700;
    }
    .status-badge{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:2px 8px;
      border-radius:999px;
      font-size:.75rem;
      font-weight:600;
    }
    .status-new{background:#e0f2fe;color:#0369a1;}
    .status-active{background:#fef9c3;color:#854d0e;}
    .status-done{background:#dcfce7;color:#166534;}

    #quizCard{
      margin-top:8px;
      padding:12px;
      border-radius:var(--radius);
      background:linear-gradient(135deg,#fff7ed,#fff);
      border:var(--border);
    }
    #currentTeamTitle{
      margin:0 0 4px;
      font-size:1.1rem;
    }
    #questionMeta{
      font-size:.85rem;
      color:var(--muted);
      margin-bottom:4px;
    }
    #questionTimer{
      font-size:.8rem;
      color:#b45309;
      margin-bottom:6px;
    }
    #questionText{
      font-size:1.05rem;
      font-weight:600;
      margin-bottom:10px;
      min-height:48px;
    }
    .buttons-row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }

    #finalSummaryList{
      margin-top:8px;
      font-size:.95rem;
    }
    #finalSummaryList li{
      margin-bottom:4px;
    }
    .winner{
      font-weight:800;
      color:var(--accent-dark);
    }
    .badge-winner{
      display:inline-block;
      margin-right:6px;
      padding:2px 8px;
      border-radius:999px;
      background:var(--accent-soft);
      font-size:.75rem;
      font-weight:700;
      color:var(--accent-dark);
    }

    @media (min-width:700px){
      .app{padding:20px 22px 26px;}
      h1{font-size:1.8rem;}
    }
  </style>
</head>
<body>
<div class="app">
  <h1>××™ ××›×™×¨ ××ª ××™?</h1>
  <p class="subtitle">××©×—×§ ×–×•×’×•×ª ××¦×—×™×§ â€“ ×©××œ×•×ª ×¢×œ ×‘× ×™ ×”×–×•×’, × ×§×•×“×•×ª, ×•×× ×¦×— ××—×“.</p>

  <!-- ×¦×œ×™×œ ×‘××–×¨ -->
  <audio id="buzzerSound" preload="auto">
    <source src="https://litter.catbox.moe/ilog5nhg2deefwuq.mp3" type="audio/mpeg">
  </audio>

  <!-- ×”×’×“×¨×ª ×§×‘×•×¦×•×ª -->
  <section id="setupSection">
    <h2>1. ×”×’×“×¨×ª ×§×‘×•×¦×•×ª</h2>
    <p class="hint">
      ×”×›× ×™×¡×• ×œ×¤×—×•×ª ×©×ª×™ ××©×¤×—×•×ª. ××¤×©×¨ ×œ×”×•×¡×™×£ ×¢×“ 10 ××©×¤×—×•×ª ×‘×œ×—×™×¦×” ×¢×œ "×”×•×¡×£ ×§×‘×•×¦×”".
    </p>
    <div id="teamsContainer" class="teams-grid">
      <div class="field team-row">
        <label>×§×‘×•×¦×” 1</label>
        <input type="text" class="team-name-input" placeholder="×œ××©×œ: ×©×™×™×Ÿ">
      </div>
      <div class="field team-row">
        <label>×§×‘×•×¦×” 2</label>
        <input type="text" class="team-name-input" placeholder="×œ××©×œ: ××œ×•×œ">
      </div>
      <div class="field team-row">
        <label>×§×‘×•×¦×” 3</label>
        <input type="text" class="team-name-input" placeholder="××•×¤×¦×™×•× ×œ×™">
      </div>
      <div class="field team-row">
        <label>×§×‘×•×¦×” 4</label>
        <input type="text" class="team-name-input" placeholder="××•×¤×¦×™×•× ×œ×™">
      </div>
    </div>
    <button class="btn small secondary" id="btnAddTeam">+ ×”×•×¡×£ ×§×‘×•×¦×”</button>
    <br><br>
    <button class="btn" id="btnSaveTeams">×©××•×¨ ×§×‘×•×¦×•×ª ×•×”×ª×—×œ ××©×—×§</button>
    <div id="setupError" class="error"></div>
  </section>

  <!-- × ×™×”×•×œ ×”××©×—×§ -->
  <section id="controlSection" class="hidden">
    <h2>2. ×‘×—×™×¨×ª ×§×‘×•×¦×” ×œ×©××œ×•×Ÿ</h2>
    <p class="hint">
      ×‘×—×¨×• ××©×¤×—×”. ×”×× ×—×” ×§×•×¨× ××ª ×”×©××œ×”, ×‘×Ÿ/×‘×ª ×”×–×•×’ ×¢×•× ×™×,
      ×•×”×× ×—×” ×œ×•×—×¥ "×ª×©×•×‘×” × ×›×•× ×”" ××• "×ª×©×•×‘×” ×œ× × ×›×•× ×”".
      ×× ×ª×•×š 10 ×©× ×™×•×ª ×œ× ×œ×•×—×¦×™× â€“ × ×¡×¤×¨ ××•×˜×•××˜×™×ª ×›×œ× × ×›×•×Ÿ.
    </p>
    <div id="teamsTableWrapper"></div>
    <p class="hint">×œ×—×¦×• "×”×ª×—×œ"/"×”××©×š" ×œ×™×“ ×”××©×¤×—×” ×©×‘×ª×•×¨.</p>
  </section>

  <!-- ×›×¨×˜×™×¡ ×”×©××œ×•×Ÿ ×”×¤×¢×™×œ -->
  <section id="quizSection" class="hidden">
    <div id="quizCard">
      <h2 id="currentTeamTitle"></h2>
      <div id="questionMeta"></div>
      <div id="questionTimer"></div>
      <div id="questionText"></div>
      <div class="buttons-row">
        <button class="btn" id="btnCorrect">×ª×©×•×‘×” × ×›×•× ×” âœ”</button>
        <button class="btn secondary" id="btnWrong">×ª×©×•×‘×” ×œ× × ×›×•× ×” âœ–</button>
      </div>
    </div>
  </section>

  <!-- ×¡×™×›×•× ×¡×•×¤×™ -->
  <section id="finalSection" class="hidden">
    <h2>3. ×¡×™×›×•× ×”××©×—×§</h2>
    <p class="hint">×”×“×™×¨×•×’ ×œ××˜×” ××¡×•×“×¨ ×œ×¤×™ ×›××•×ª ×”×ª×©×•×‘×•×ª ×”× ×›×•× ×•×ª.</p>
    <ul id="finalSummaryList"></ul>
    <button class="btn secondary" id="btnReset">××™×¤×•×¡ ×œ××©×—×§ ×—×“×©</button>
  </section>
</div>

<script>
  // ===== ×”×’×“×¨×•×ª ××©×—×§ =====
  const QUESTIONS_PER_TEAM = 15;
  const MAX_TEAMS = 10;
  const QUESTION_TIME_MS = 10000; // 10 ×©× ×™×•×ª

  // ğŸ”¹ ×‘× ×§ ×©××œ×•×ª ××¦×—×™×§×•×ª ×¢×œ ×‘× ×™ ×–×•×’
  const QUESTION_BANK = [
    "××™ × ×•×—×¨ ×™×•×ª×¨ ×—×–×§ ×‘×œ×™×œ×” â€“ ×•×”×•× ××•×“×” ×‘×–×” ××• ××›×—×™×©?",
    "×× ××ª×§×©×¨×™× ××”×‘× ×§ â€“ ××™ × ×›× ×¡ ×¨××©×•×Ÿ ×œ×œ×—×¥?",
    "××™ ×™×•×ª×¨ ××ª×¢×¦×‘×Ÿ ×›×©××™×©×”×• ×™×•×©×‘ ×œ×• ×¢×œ ×”×›×•×¨×¡×” ×”×§×‘×•×¢×”?",
    "××™ ×©×•×›×— ××™×¤×” ×”××©×§×¤×™×™× â€“ ×œ××¨×•×ª ×©×”× ×¢×œ ×”×¨××©?",
    "××™ ×©×•×œ×˜ ×‘×©×œ×˜ ×©×œ ×”×˜×œ×•×•×™×–×™×” ×‘×‘×™×ª â€“ ×‘×¨××” ×©×œ ×“×™×§×˜×˜×•×¨ ×§×˜×Ÿ?",
    "×× ×™×© ×¨×™×— ×©×¨×•×£ ×‘××˜×‘×— â€“ ×©×œ ××™ ×–×” × ×™×¡×•×™ ×‘×™×©×•×œ?",
    "××™ ××•××¨ '××™×Ÿ ×œ×™ ××” ×œ×œ×‘×•×©' ×›×©×”××¨×•×Ÿ ××ª×¤×•×¦×¥?",
    "××™ ×’×¨×•×¢ ×‘×œ×–×›×•×¨ ×œ×”×˜×¢×™×Ÿ ×˜×œ×¤×•×Ÿ?",
    "××™ ×ª××™×“ ××•××¨ '×¢×•×“ 5 ×“×§×•×ª ×× ×™ ×§×' ×•××– ×œ× ×§×?",
    "××™ ×¦×•×¢×§ ×¢×œ ×”×˜×œ×•×•×™×–×™×” ×›××™×œ×• ×”×™× ×©×•××¢×ª?",
    "××™ ××ª××¨×’×Ÿ ×”×›×™ ×œ××˜ ×œ×¦××ª ××”×‘×™×ª?",
    "××™ ×ª××™×“ ××•××¨ '×ª×¤×ª×— ××ª×”' ×›×©×™×© ×“×¤×™×§×” ×‘×“×œ×ª?",
    "××™ ×–×•×›×¨ ×™××™ ×”×•×œ×“×ª â€“ ×•××™ ×—×™ ×¢×œ ××–×œ?",
    "××™ ××•××¨ '×œ× ×¨×¢×‘' ×•××– ×’×•× ×‘ ×—×¦×™ ××”×¦×œ×—×ª ×©×œ×š?",
    "××™ ××¤×¢×™×œ ××–×’×Ÿ ×¨××©×•×Ÿ â€“ ×–×” ×©×ª××™×“ ×—× ×œ×• ××• ×–×” ×©×ª××™×“ ×§×¨ ×œ×•?",
    "××™ ××ª×¨×’×– ×™×•×ª×¨ ××¤×§×§×™×?",
    "××™ ××•××¨ '×××—×¨ ×“×™××˜×”' ×›×‘×¨ 20 ×©× ×”?",
    "××™ ××“×‘×¨ ×¢× ×”×˜×œ×•×•×™×–×™×” ×‘××©×—×§×™×?",
    "××™ ××©×•×›× ×¢ ×©×ª××™×“ ×”×¦×“ ×”×©× ×™ ××©× ×›×©×”××©×”×• ×‘×‘×™×ª × ×©×‘×¨?",
    "××™ ×××œ× ××ª ×”×¢×’×œ×” ×‘×¡×•×¤×¨ ×‘×“×‘×¨×™× ×©×œ× ×‘×¨×©×™××”?",
    "××™ × ×¨×“× ××•×œ ×”×˜×œ×•×•×™×–×™×” ×¢× ×©×œ×˜ ×‘×™×“?",
    "××™ ×¢×•×©×” ×¨×¢×© ×‘×‘×•×§×¨ ×›×©'×× ×¡×” ×œ×”×™×•×ª ×‘×©×§×˜'?",
    "××™ ××ª×œ×•× ×Ÿ ×›×œ ×”×™×•× ×¢×œ ×”×’×‘ ××‘×œ ×œ× ×”×•×œ×š ×œ×¨×•×¤×?",
    "××™ ××•××¨ '×œ× ×¦×¨×™×š ×©×§×™×ª' ××‘×œ ××¤×–×¨ ×“×‘×¨×™× ×‘×“×¨×š?",
    "××™ ××—×•×‘×¨ ×™×•×ª×¨ ×œ×§×‘×•×¦×•×ª ×•×•×˜×¡××¤ ×—×•×¤×¨×•×ª?",
    "××™ ×™×•×ª×¨ ×©×•×˜×¨ ×§× ×™×•×ª ×©××¡×ª×›×œ ×¢×œ ××—×™×¨×™×?",
    "××™ ×œ×¢×•×œ× ×œ× ×§×•×¨× ×”×•×¨××•×ª ×”×¤×¢×œ×”?",
    "××™ ××—×œ×™×˜ ××™×–×” ××•×–×™×§×” ×©×•××¢×™× ×‘×¨×›×‘?",
    "××™ ×™×•×ª×¨ ×¤×•×œ× ×™/×ª ×‘×‘×™×ª?",
    "××™ ×”×¨××©×•×Ÿ ×©××•××¨ '×‘×•× × ×œ×š ×›×‘×¨' ××¦×œ ×—×‘×¨×™×?",
    "××™ ×× ×§×” ××ª ×”×©×•×œ×—×Ÿ â€“ ×•××™ ×‘×•×¨×— ×œ×¡×¤×”?",
    "××™ ××—×¡×œ ×—×˜×™×£ ×•××©××™×¨ ×¢×˜×™×¤×” ×¨×™×§×” ×‘××¨×•×Ÿ?",
    "××™ ××©××™×¨ ××•×¨×•×ª ×“×•×œ×§×™× ×‘×›×œ ×”×‘×™×ª?",
    "××™ ×–×•×›×¨ ××™×¤×” ×”×—× ×™×” â€“ ×•××™ ××¡×ª×•×‘×‘ ×›××• ×ª×™×™×¨?",
    "××™ ×× ×”×œ ××ª ×”× ×”×™×’×” ×©×œ ×”×©× ×™ ××”×¦×“?",
    "××™ ×¢×•×©×” ×“×¨××•×ª ×¢×œ ×›××‘ ×§×˜×Ÿ?",
    "××™ ××ª××§×— ×¢×œ ××—×™×¨ ×‘×›×œ ××§×•×?",
    "××™ ×©×•×›×— ×—×¦×™ ××”×“×‘×¨×™× ×©×××¨ ×©×™×¢×©×”?",
    "××™ ×××©×™× ××ª ×”×•×•×˜×¡××¤ ×‘×–×” ×©××™×—×¨?",
    "××™ ××–××™×Ÿ ××‘×—×•×¥ ×‘××§×•× ×œ×‘×©×œ?",
    "××™ ××ª×¢×¦×‘×Ÿ ×›×©×”××•×›×œ ××ª×§×¨×¨ ×›×™ ×›×•×œ× ×××—×¨×™× ×œ×©×•×œ×—×Ÿ?",
    "××™ × ×¢×œ×‘ ×›×©×œ× ××¦×™×¢×™× ×œ×• ×§×¤×”?",
    "××™ ××•××¨ '×¢×–×•×‘ ×× ×™ ××¢×©×” ×–×” ××”×¨ ×™×•×ª×¨'?",
    "××™ ×œ×•×§×— ××•×›×œ ×œ×›×œ ××§×¨×”?",
    "××™ ××ª×¨×’×© ××”× ×—×•×ª ×•×§×•×¤×•× ×™×?",
    "××™ ××•××¨ '×‘×¡×“×¨, ×¡×ª× ×¢×™×™×£' ×›×©×”×•× ×‘×¢×¦×‘×™×?",
    "××™ ×”×›×™ ×”×¨×‘×” ××•××¨ '×××¨×ª×™ ×œ×š!'?",
    "××™ ×× ×¡×” ×œ××¦×•× ××ª ×”×©×œ×˜ ×–××Ÿ ××¨×•×š ××“×™ â€“ ×›×©×”×•× ×œ×™×“×•?",
    "××™ ××–×”×” ×›×œ ×‘×¢×™×” ×§×˜× ×” ×‘×‘×™×ª?",
    "××™ ××¡×¨×‘ ×œ×–×¨×•×§ ×—×•×œ×¦×•×ª ×Ö¾1998?",
    "××™ ××‘×§×© ×›×™×‘×•×™ ××•×¨×•×ª â€“ ××‘×œ ×œ× ××›×‘×”?",
    "××™ ××—×œ×™×˜ ×©×”×•× '××™× ×¡×˜×œ×˜×•×¨' ×‘×œ×™ ×©×•× ×™×“×¢?",
    "××™ ××•××¨ '×©×™× ××ª ×”×˜×œ×¤×•×Ÿ ×›×‘×¨!!'?",
    "××™ ×‘×•×“×§ 3 ×¤×¢××™× ×”×“×œ×ª ×‘×œ×™×œ×”?",
    "××™ × ×œ×—×¥ ××‘×œ×’×Ÿ ×œ×¤× ×™ ×©××•×¨×—×™× ××’×™×¢×™×?",
    "××™ ×“×•×—×£ ××•×›×œ ×œ××§×¤×™× ×©××™ ××¤×©×¨ ×œ×¡×’×•×¨?",
    "××™ ×˜×•×¢×Ÿ ×©×™×•×“×¢ ×§×™×¦×•×¨ ×“×¨×š ×‘×•×•×™×™×–?",
    "××™ ××•××¨ ×©×”×˜×œ×•×•×™×–×™×” ×—×–×§×” ××“×™/×—×œ×©×” ××“×™?",
    "××™ ××•××¨ '×× ×—× ×• ×œ× ×™×œ×“×™×' ×•××– ×¢×•×©×” ×©×˜×•×™×•×ª?",
    "××™ ×™×©×¨×•×“ ×‘××™ ×‘×•×“×“ â€“ ×•××™ ×™×—×¤×© ×•×•×˜×¡××¤?",
    "××™ ×××¨×’×Ÿ ×—×•×¤×©×•×ª â€“ ×•×œ××™ ××™×Ÿ ××•×©×’ ×œ××Ÿ × ×•×¡×¢×™×?",
    "××™ ××¦×œ× ××•×›×œ ×œ×¤× ×™ ×©××•×›×œ×™×?",
    "××™ ××ª×¢×¦×‘×Ÿ ××›×¨×¡×•××™×/×¢×§×©×§×•×©×™×?",
    "××™ ××ª×•×•×›×— ×¢× ×”Ö¾GPS?",
    "××™ ×–×•×›×¨ ×¨×™×‘×™× ××œ×¤× ×™ 5 ×©× ×™×?",
    "××™ ××•××¨ '×× ×™ ×œ× ×¨×¢×‘' ×•××– ×’×•× ×‘ ××•×›×œ?",
    "××™ ××¤×—×“ ×™×•×ª×¨ ××—×¨×§×™×?",
    "××™ ×”×•×¤×š × ×™×§×™×•×Ÿ ×§×˜×Ÿ ×œ×©×™×¤×•×¥?",
    "××™ × ×•×ª×Ÿ ×‘×“×™×—×•×ª ×‘×–××Ÿ ×”×œ× × ×›×•×Ÿ?",
    "××™ ××¡×ª×‘×š ×¢× ×˜×›× ×•×œ×•×’×™×”?",
    "××™ ××‘×©×œ â€“ ××‘×œ ××œ×›×œ×š ×¤×™ 3?",
    "××™ ×œ×•×§×— ××¢×™×œ ×‘×§×™×¥ '×œ×›×œ ××§×¨×”'?",
    "××™ ×××‘×“ ××¤×ª×—×•×ª ×›×œ ×™×•××™×™×?",
    "××™ × ×¨×“× ×‘×××¦×¢ ×¡×¨×˜?",
    "××™ ××•××¨ '××™×Ÿ ×›×¡×£' ××‘×œ ×§×•× ×” ×©×˜×•×™×•×ª?",
    "××™ ×¦×•×¢×§ ×¢×œ ×”×™×œ×“×™× ×¢×œ ×‘×œ×’×Ÿ â€“ ××‘×œ ×’× ×¢×•×©×” ×‘×¢×¦××•?",
    "××™ ××‘×§×© '×‘×™×¡ ×§×˜×Ÿ' ×•××– ×—×•×˜×£ ×—×¦×™?",
    "××™ × ×œ×—×¥ ×œ×¤× ×™ ×˜×™×•×œ?",
    "××™ ××•××¨ '×ª× ×©×•× ×¢××•×§' ×›×©×”×©× ×™ ×¢×¦×‘× ×™?",
    "××™ ×—×•×©×‘ ×©×™×•×“×¢ ××ª ×›×œ ×”××™×œ×™× ×œ×©×™×¨ â€“ ×•×œ× ×™×•×“×¢?",
    "××™ ×¦×•×¢×§ '×× ×™ ×–×•×›×¨ ××™×¤×” ×©××ª×™!' ×•××– ×œ× ××•×¦×?",
    "××™ ××ª×•×•×›×— ×‘××¡×¢×“×•×ª ×¢×œ ×¨×•×˜×‘/×§×¨×—?",
    "××™ ×§×•× ×” ××•× ×œ×™×™×Ÿ ×‘×œ×™ ×”×›×¨×”?",
    "××™ ××§×©×™×‘ ×œ×—×“×©×•×ª ×•××™ ×‘×•×¨×— ××–×”?",
    "××™ ××¡×ª×›×œ ×‘×—× ×•×™×•×ª ××‘×œ ×œ× ×§×•× ×”?",
    "××™ ××•××¨ '×‘×•× × ×¡×™×™× ×¢× ×–×”' ××‘×œ × ××¨×—?",
    "××™ ××©××™×¨ ××™× ×œ×™×“ ×”×›×™×•×¨?",
    "××™ ××¡×“×¨ ×‘××¨×•×Ÿ ×œ×¤×™ ×¦×‘×¢×™× â€“ ×•××™ ×œ×?",
    "××™ ×¨×•×¦×” ×œ×¤×ª×•×¨ ×‘×¢×™×•×ª ×©×œ× ×‘×™×§×©×• ××× ×•?",
    "××™ ×©×•×›×— ×›×‘×™×¡×” ×‘××›×•× ×”?",
    "××™ ××•××¨ '×¢×–×•×‘, ×× ×™ ××¡×¢!' ×œ××¨×•×ª ×©×”×•× ×”×›×™ ×¢×¦×‘× ×™ ×‘×“×¨×š?",
    "××™ ××“×‘×¨ ×¢× ×©×›× ×™× ×‘×œ×™ ×¡×•×£?",
    "××™ ××•××¨ '×¤×¢× ×”×™×” ×™×•×ª×¨ ×˜×•×‘'?",
    "××™ ××ª×œ×•× ×Ÿ ×©×§×¨ ×œ×•/×—× ×œ×• ×›×œ ×”×™×•×?",
    "××™ ×¢×•×©×” ×¨×¢×© ×¢× ×©×§×™×•×ª ×‘×¡×œ×•×Ÿ?",
    "××™ ×©×•××¨ ×¡×•×“×•×ª â€“ ×•××™ ××¡×¤×¨ ×”×›×•×œ?",
    "××™ ×¢×•×©×” ××ª ×”×¦×¢×“ ×”×¨××©×•×Ÿ ×‘×¨×™×‘?",
    "××™ ×™×™×ª×Ÿ ×”×›×™ ×”×¨×‘×” ×ª×©×•×‘×•×ª ××¦×—×™×§×•×ª ×‘××©×—×§?"
  ];

  // ===== ××¦×‘ ××©×—×§ =====
  let teams = []; // {name, score, answered, done, questions, currentIndex}
  let activeTeamIndex = null;
  let questionTimeoutId = null;
  let timerIntervalId = null;
  let remainingSeconds = 0;

  // ===== ××œ×× ×˜×™× ××”Ö¾DOM =====
  const setupSection = document.getElementById("setupSection");
  const controlSection = document.getElementById("controlSection");
  const quizSection = document.getElementById("quizSection");
  const finalSection = document.getElementById("finalSection");

  const teamsContainer = document.getElementById("teamsContainer");
  const btnAddTeam = document.getElementById("btnAddTeam");
  const btnSaveTeams = document.getElementById("btnSaveTeams");
  const setupError = document.getElementById("setupError");

  const teamsTableWrapper = document.getElementById("teamsTableWrapper");

  const currentTeamTitle = document.getElementById("currentTeamTitle");
  const questionMeta = document.getElementById("questionMeta");
  const questionText = document.getElementById("questionText");
  const questionTimer = document.getElementById("questionTimer");
  const btnCorrect = document.getElementById("btnCorrect");
  const btnWrong = document.getElementById("btnWrong");

  const finalSummaryList = document.getElementById("finalSummaryList");
  const btnReset = document.getElementById("btnReset");

  const buzzerSound = document.getElementById("buzzerSound");

  let currentTeamInputsCount = 4;

  // ===== ×¤×•× ×§×¦×™×•×ª ×¢×–×¨ =====
  function playBuzzer(){
    try{
      buzzerSound.currentTime = 0;
      buzzerSound.play().catch(()=>{});
    }catch(e){}
  }

  function shuffleArray(arr){
    const copy = arr.slice();
    for(let i = copy.length - 1; i > 0; i--){
      const j = Math.floor(Math.random() * (i + 1));
      [copy[i], copy[j]] = [copy[j], copy[i]];
    }
    return copy;
  }

  function allTeamsDone(){
    return teams.length > 0 && teams.every(t => t.done);
  }

  function clearQuestionTimers(){
    if(questionTimeoutId !== null){
      clearTimeout(questionTimeoutId);
      questionTimeoutId = null;
    }
    if(timerIntervalId !== null){
      clearInterval(timerIntervalId);
      timerIntervalId = null;
    }
  }

  // ===== ×”×•×¡×¤×ª ×§×‘×•×¦×” =====
  btnAddTeam.addEventListener("click", () => {
    if(currentTeamInputsCount >= MAX_TEAMS){
      alert("××§×¡×™××•× " + MAX_TEAMS + " ×§×‘×•×¦×•×ª.");
      return;
    }
    currentTeamInputsCount++;
    const div = document.createElement("div");
    div.className = "field team-row";
    const label = document.createElement("label");
    label.textContent = "×§×‘×•×¦×” " + currentTeamInputsCount;
    const input = document.createElement("input");
    input.type = "text";
    input.className = "team-name-input";
    input.placeholder = "××•×¤×¦×™×•× ×œ×™";
    div.appendChild(label);
    div.appendChild(input);
    teamsContainer.appendChild(div);
  });

  // ===== ×©××™×¨×ª ×§×‘×•×¦×•×ª =====
  btnSaveTeams.addEventListener("click", () => {
    const inputs = teamsContainer.querySelectorAll(".team-name-input");
    const names = [];
    inputs.forEach(inp => {
      const v = inp.value.trim();
      if(v !== ""){
        names.push(v);
      }
    });

    if(names.length < 2){
      setupError.textContent = "×¦×¨×™×š ×œ×¤×—×•×ª ×©×ª×™ ×§×‘×•×¦×•×ª.";
      return;
    }
    if(names.length > MAX_TEAMS){
      setupError.textContent = "×œ× × ×™×ª×Ÿ ×™×•×ª×¨ ×-" + MAX_TEAMS + " ×§×‘×•×¦×•×ª.";
      return;
    }
    setupError.textContent = "";

    teams = names.map(name => ({
      name,
      score: 0,
      answered: 0,
      done: false,
      questions: [],
      currentIndex: 0
    }));

    setupSection.classList.add("hidden");
    controlSection.classList.remove("hidden");
    renderTeamsTable();
  });

  // ===== ×˜×‘×œ×ª ×”×§×‘×•×¦×•×ª =====
  function renderTeamsTable(){
    if(teams.length === 0){
      teamsTableWrapper.innerHTML = "";
      return;
    }

    let html = '<table class="teams-table"><thead><tr>' +
      '<th>××©×¤×—×”</th>' +
      '<th>×¡×˜×˜×•×¡</th>' +
      '<th>× ×™×§×•×“</th>' +
      '<th>×¢× ×•</th>' +
      '<th>×¤×¢×•×œ×”</th>' +
      '</tr></thead><tbody>';

    teams.forEach((team, index) => {
      let statusLabel = "×œ× ×”×ª×—×™×œ×•";
      let statusClass = "status-new";
      if(team.done){
        statusLabel = "×¡×™×™××•";
        statusClass = "status-done";
      } else if(team.answered > 0){
        statusLabel = "×‘×××¦×¢";
        statusClass = "status-active";
      }

      const btnDisabled = team.done ? "disabled" : "";
      const btnText = team.answered === 0 ? "×”×ª×—×œ" : "×”××©×š";

      html += `<tr>
        <td>${team.name}</td>
        <td><span class="status-badge ${statusClass}">${statusLabel}</span></td>
        <td>${team.score}</td>
        <td>${team.answered}/${QUESTIONS_PER_TEAM}</td>
        <td><button class="btn small" data-team-index="${index}" ${btnDisabled}>${btnText}</button></td>
      </tr>`;
    });

    html += "</tbody></table>";
    teamsTableWrapper.innerHTML = html;

    teamsTableWrapper.querySelectorAll("button[data-team-index]").forEach(btn => {
      btn.addEventListener("click", () => {
        const index = parseInt(btn.getAttribute("data-team-index"),10);
        startQuizForTeam(index);
      });
    });

    if(allTeamsDone()){
      showFinalSummary();
    }
  }

  // ===== × ×™×”×•×œ ×”×©××œ×•×Ÿ =====
  function startQuizForTeam(teamIndex){
    activeTeamIndex = teamIndex;
    const team = teams[teamIndex];

    if(team.done) return;

    if(team.questions.length === 0){
      const shuffled = shuffleArray(QUESTION_BANK);
      const count = Math.min(QUESTIONS_PER_TEAM, shuffled.length);
      team.questions = shuffled.slice(0, count);
      team.currentIndex = 0;
      team.score = 0;
      team.answered = 0;
    }

    quizSection.classList.remove("hidden");
    updateQuestionView();
  }

  function startQuestionTimer(){
    clearQuestionTimers();
    remainingSeconds = QUESTION_TIME_MS / 1000;
    questionTimer.textContent = "×–××Ÿ: " + remainingSeconds + " ×©× ×™×•×ª";

    timerIntervalId = setInterval(() => {
      remainingSeconds--;
      if(remainingSeconds < 0) remainingSeconds = 0;
      questionTimer.textContent = "×–××Ÿ: " + remainingSeconds + " ×©× ×™×•×ª";
    }, 1000);

    questionTimeoutId = setTimeout(() => {
      handleAnswer(false); // ××•×˜×•××˜×™×ª ×œ× × ×›×•×Ÿ
    }, QUESTION_TIME_MS);
  }

  function updateQuestionView(){
    const team = teams[activeTeamIndex];
    if(team.currentIndex >= team.questions.length){
      team.done = true;
      quizSection.classList.add("hidden");
      clearQuestionTimers();
      renderTeamsTable();
      if(allTeamsDone()){
        showFinalSummary();
      }
      return;
    }

    currentTeamTitle.textContent = "×ª×•×¨ ××©×¤×—×ª " + team.name;
    questionMeta.textContent = "×©××œ×” " + (team.currentIndex + 1) + " ××ª×•×š " + team.questions.length;
    questionText.textContent = team.questions[team.currentIndex];

    playBuzzer(); // ğŸ”” ×‘××–×¨ ×‘×›×œ ××¢×‘×¨ ×©××œ×”
    startQuestionTimer();
    renderTeamsTable();
  }

  function handleAnswer(isCorrect){
    if(activeTeamIndex === null) return;
    clearQuestionTimers();

    const team = teams[activeTeamIndex];

    if(isCorrect){
      team.score += 1;
    }
    team.answered += 1;
    team.currentIndex += 1;

    if(team.currentIndex >= team.questions.length){
      team.done = true;
      quizSection.classList.add("hidden");
      renderTeamsTable();
      if(allTeamsDone()){
        showFinalSummary();
      }
    } else {
      updateQuestionView();
    }
  }

  btnCorrect.addEventListener("click", () => handleAnswer(true));
  btnWrong.addEventListener("click", () => handleAnswer(false));

  // ===== ×¡×™×›×•× ×¡×•×¤×™ =====
  function showFinalSummary(){
    finalSection.classList.remove("hidden");

    const sorted = teams.slice().sort((a,b) => b.score - a.score);
    const maxScore = sorted[0] ? sorted[0].score : 0;

    finalSummaryList.innerHTML = "";
    sorted.forEach((team, idx) => {
      const li = document.createElement("li");
      const isWinner = team.score === maxScore && maxScore > 0;
      li.innerHTML =
        (isWinner ? '<span class="badge-winner">×× ×¦×—×™×</span> ' : '') +
        `<span class="${isWinner ? 'winner' : ''}">××§×•× ${idx+1}: ××©×¤×—×ª ${team.name} â€“ ${team.score} × ×§×•×“×•×ª ××ª×•×š ${team.answered}</span>`;
      finalSummaryList.appendChild(li);
    });
  }

  // ===== ××™×¤×•×¡ ××©×—×§ =====
  btnReset.addEventListener("click", () => {
    location.reload();
  });
</script>
</body>
</html>
