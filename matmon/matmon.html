<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>משחק המציאה הבלתי אפשרי</title>
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background-color: #1a1a1a;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
        }

        #game-wrapper {
            text-align: center;
            max-width: 900px;
            width: 95%;
        }

        .header-info {
            background: rgba(0,0,0,0.8);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-around;
            border: 1px solid #444;
        }

        #game-container {
            position: relative;
            cursor: crosshair;
            border: 5px solid #333;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            background-color: #000;
        }

        #game-image {
            display: block;
            width: 100%;
            height: auto;
            user-select: none;
            -webkit-user-drag: none;
        }

        .stat-box { font-size: 22px; font-weight: bold; }
        #timer { color: #ff4757; }
        #level-num { color: #2ed573; }
        #instruction { 
            color: #ffd32a; 
            margin: 10px 0; 
            font-size: 20px; 
            text-shadow: 1px 1px 2px black;
        }

        /* אפקט רעידה בטעות */
        .wrong-click { animation: shake 0.2s ease-in-out; }
        @keyframes shake {
            0%, 100% { transform: translate(0); }
            25% { transform: translate(-8px); }
            75% { transform: translate(8px); }
        }

        /* אפקט הצלחה */
        .success-flash { background-color: #2ed573 !important; transition: 0.2s; }
    </style>
</head>
<body>

    <div id="game-wrapper">
        <div class="header-info" id="top-bar">
            <div class="stat-box">שלב: <span id="level-num">1</span>/50</div>
            <div class="stat-box">זמן נותר: <span id="timer">20</span>s</div>
        </div>
        
        <div id="instruction">טוען משחק...</div>

        <div id="game-container">
            <img id="game-image" src="1.png" alt="Game Level">
        </div>
    </div>

    <script>
        // הגדרות השלבים - כאן אתה מעדכן את המיקום המדויק
        const levels = [
            { 
                img: "1.png", 
                targetName: "אבטיח", 
                x: 75, // מיקום באחוזים מרוחב התמונה (0-100)
                y: 82, // מיקום באחוזים מגובה התמונה (0-100)
                radius: 4 // רמת דיוק נדרשת (ככל שקטן יותר - קשה יותר)
            },
            { 
                img: "2.png", 
                targetName: "ציפור", 
                x: 15, 
                y: 10, 
                radius: 3 
            }
            // תוכל להוסיף כאן 3.png, 4.png וכו'
        ];

        let currentLevel = 0;
        let timeLeft = 20;
        let timerInterval;

        const img = document.getElementById('game-image');
        const timerDisplay = document.getElementById('timer');
        const levelDisplay = document.getElementById('level-num');
        const instrDisplay = document.getElementById('instruction');
        const container = document.getElementById('game-container');
        const topBar = document.getElementById('top-bar');

        function startLevel() {
            const levelData = levels[currentLevel];
            
            // עדכון ממשק
            img.src = levelData.img;
            levelDisplay.innerText = currentLevel + 1;
            instrDisplay.innerHTML = `חפש את ה<strong>${levelData.targetName}</strong> הקטן!`;
            
            timeLeft = 20;
            timerDisplay.innerText = timeLeft;

            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                timeLeft--;
                timerDisplay.innerText = timeLeft;
                if (timeLeft <= 0) {
                    gameOver();
                }
            }, 1000);
        }

        container.addEventListener('mousedown', function(e) {
            const rect = img.getBoundingClientRect();
            
            // חישוב המיקום היחסי באחוזים
            const clickX = ((e.clientX - rect.left) / rect.width) * 100;
            const clickY = ((e.clientY - rect.top) / rect.height) * 100;

            const levelData = levels[currentLevel];
            
            // בדיקת מרחק (פיתגורס)
            const dist = Math.sqrt(Math.pow(clickX - levelData.x, 2) + Math.pow(clickY - levelData.y, 2));

            if (dist <= levelData.radius) {
                nextLevel();
            } else {
                penalty();
            }
        });

        function nextLevel() {
            clearInterval(timerInterval);
            topBar.classList.add('success-flash');
            setTimeout(() => topBar.classList.remove('success-flash'), 300);

            if (currentLevel < levels.length - 1) {
                alert("מצאת! מוכן לשלב הבא?");
                currentLevel++;
                startLevel();
            } else {
                alert("מדהים! סיימת את כל השלבים הזמינים!");
                currentLevel = 0;
                startLevel();
            }
        }

        function penalty() {
            timeLeft -= 3; // הורדת 3 שניות על טעות
            timerDisplay.innerText = timeLeft;
            container.classList.add('wrong-click');
            setTimeout(() => container.classList.remove('wrong-click'), 200);
        }

        function gameOver() {
            clearInterval(timerInterval);
            alert("נגמר הזמן! נסה שוב מהתחלה.");
            currentLevel = 0;
            startLevel();
        }

        // התחלת המשחק ברגע שהדף נטען
        window.onload = startLevel;
    </script>
</body>
</html>
