<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
  <title>×“×•×‘××™ ××˜×¨×• - ×ª×›×œ×¡</title>
  <style>
    :root { --brand: #2563eb; --bg: #f8fafc; --red: #ef4444; --yellow: #fff9c4; }
    body { margin: 0; font-family: system-ui, sans-serif; background: var(--bg); padding: 10px; color: #1e293b; line-height: 1.4; }
    .card { background: white; border-radius: 20px; padding: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); max-width: 500px; margin: auto; }
    .selectors { display: grid; grid-template-columns: 1fr 30px 1fr; align-items: end; gap: 5px; margin-bottom: 20px; }
    label { display: block; font-size: 11px; font-weight: bold; margin-bottom: 4px; color: #64748b; }
    select { width: 100%; padding: 12px; border-radius: 12px; border: 1px solid #cbd5e1; background: #fff; font-size: 13px; outline: none; }
    .btn { width: 100%; padding: 16px; background: var(--brand); color: white; border: none; border-radius: 12px; font-size: 18px; font-weight: bold; cursor: pointer; }
    .route-container { margin-top: 25px; border-top: 2px dashed #e2e8f0; padding-top: 20px; }
    .v-step { display: flex; gap: 12px; position: relative; padding-bottom: 18px; }
    .v-step:not(:last-child)::after { content: ''; position: absolute; right: 9px; top: 22px; width: 4px; height: 100%; background: var(--red); z-index: 1; }
    .v-dot { width: 22px; height: 22px; border-radius: 50%; background: #fff; border: 4px solid var(--red); z-index: 2; flex-shrink: 0; box-sizing: border-box; }
    .v-dot.small { width: 14px; height: 14px; margin-right: 4px; border-width: 3px; background: #cbd5e1; border-color: #94a3b8; }
    .v-dot.active { background: var(--red); border-color: white; box-shadow: 0 0 0 2px var(--red); }
    .v-text { font-size: 14px; padding-top: 2px; flex-grow: 1; }
    .walk-box { background: var(--yellow); padding: 10px; border-radius: 8px; margin-top: 8px; font-size: 14px; border: 1px solid #fbc02d; }
    .direction-header { text-align: center; font-weight: 800; color: var(--brand); margin-bottom: 15px; font-size: 18px; }
    .stops-count { display: block; color: #b45309; font-weight: 900; margin-bottom: 5px; font-size: 15px; border-bottom: 1px solid rgba(180, 83, 9, 0.2); padding-bottom: 4px; }
    optgroup { font-style: normal; font-weight: bold; color: var(--brand); }
  </style>
</head>
<body>

<div class="card">
  <h2 style="text-align:center; margin-top:0;">×“×•×‘××™ ××˜×¨×• - ×ª×›×œ×¡</h2>
  <div class="selectors">
    <div><label>××•×¦×</label><select id="from"></select></div>
    <div style="text-align:center; padding-bottom:10px;">â¬…</div>
    <div><label>×™×¢×“</label><select id="to"></select></div>
  </div>
  <button class="btn" onclick="buildRoute()">×ª×›× ×Ÿ ××¡×œ×•×œ</button>
  <div id="output" style="display:none;" class="route-container">
    <div id="dirTitle" class="direction-header">â¬‡ ×›×™×•×•×Ÿ ×”× ×¡×™×¢×” â¬‡</div>
    <div id="vMap"></div>
  </div>
</div>

<script>
// ×¨×©×™××ª ×”×ª×—× ×•×ª ×”××“×•×™×§×ª ×©×œ ×”×§×• ×”××“×•×
const RED_LINE = ["DMCC", "Sobha Realty", "Al Khail", "Onpassive", "Business Bay", "Burj Khalifa / Dubai Mall", "Financial Centre", "Emirates Towers", "World Trade Centre", "Max", "ADCB", "BurJuman", "Union", "Deira City Centre", "Al Rigga", "GGICO", "Airport T1", "Airport T3", "Mall of the Emirates", "Equiti", "Mashreq", "Dubai Internet City"];

const DATA = {
  "×©×“×” ×ª×¢×•×¤×” (DXB)": [
    { id: "air3", name: "×©×“×” ×ª×¢×•×¤×” ×˜×¨××™× ×œ 3 (××œ ×¢×œ)", station: "Airport T3", walk: "3 ×“×§'", dist: "×‘×ª×•×š ×”×˜×¨××™× ×œ" },
    { id: "air1", name: "×©×“×” ×ª×¢×•×¤×” ×˜×¨××™× ×œ 1", station: "Airport T1", walk: "3 ×“×§'", dist: "×‘×ª×•×š ×”×˜×¨××™× ×œ" }
  ],
  "××œ×•× ×•×ª": [
    { id: "lux", name: "××œ×•×Ÿ LUXE JBR", station: "DMCC", walk: "12 ×“×§'", dist: "1.1 ×§\"×" },
    { id: "para", name: "××œ×•×Ÿ Paramount", station: "Business Bay", walk: "10 ×“×§'", dist: "850 ××˜×¨" }
  ],
  "×§× ×™×•×ª ×‘×–×•×œ (×‘×–×™×œ ×”×–×•×œ)": [
    { id: "d2d_k1", name: "DAY TO DAY ×›×¨××” (1-20 ×©×—)", station: "ADCB", walk: "5 ×“×§'", dist: "ADCB Metro" },
    { id: "d2d_d", name: "DAY TO DAY ×“×™×™×¨×” (1-20 ×©×—)", station: "Deira City Centre", walk: "2 ×“×§'", dist: "××•×œ ×”×™×¦×™××”" },
    { id: "d2d_f", name: "DAY TO DAY ×¤×¨×™×™× (1-20 ×©×—)", station: "Max", walk: "7 ×“×§'", dist: "×œ×™×“ Zabeel Park" },
    { id: "gift_v", name: "GIFT VILLAGE (×¢×“ 50 ×©×—)", station: "Max", walk: "8 ×“×§'", dist: "××•×œ ×”××¡×’×¨×ª" },
    { id: "mazaya_av", name: "Mazaya Avenue (×‘×’×“×™× ×‘×–×•×œ)", station: "Deira City Centre", walk: "6 ×“×§'", dist: "500 ××˜×¨" },
    { id: "deira_walk", name: "Deira Market Walk (×‘×’×“×™×/×©×•×§)", station: "Union", walk: "5 ×“×§'", dist: "×œ×™×“ ×”××˜×¨×•" }
  ],
  "××•×›×œ ×‘×–×•×œ (×¢×“ 50 ×©×—)": [
    { id: "fish_h", name: "FISH HUT (×“×’×™× ×¢×“ 50 ×©×—)", station: "Mall of the Emirates", walk: "15 ×“×§'", dist: "Al Barsha" },
    { id: "lavash", name: "LAVASH (×‘×•×§×¨ ×¢×“ 50 ×©×—)", station: "Sobha Realty", walk: "8 ×“×§'", dist: "Marina" },
    { id: "safadi", name: "AL SAFADI (×¢×“ 50 ×©×—)", station: "Emirates Towers", walk: "6 ×“×§'", dist: "SZR" },
    { id: "rowley", name: "ROWLEY'S (×‘×©×¨+×§×™× ×•×— ×¢×“ 50 ×©×—)", station: "Business Bay", walk: "10 ×“×§'", dist: "×œ×™×“ ×”×ª×¢×œ×”" },
    { id: "mandi", name: "MANDI (××•×›×œ ××§×•××™ ×¢×“ 50 ×©×—)", station: "Max", walk: "9 ×“×§'", dist: "××•×œ ×”××¡×’×¨×ª" },
    { id: "pankeki", name: "×¤× ×§×™×™×§ ×™×¤× ×™ (××ª×•×§ ×¢×“ 50 ×©×—)", station: "Mall of the Emirates", walk: "10 ×“×§'", dist: "Al Barsha Mall" }
  ],
  "×›×©×¨ (××•××œ×¥)": [
    { id: "fantastico", name: "×§×¤×” ×¤× ×˜×¡×˜×™×§×• (×—×œ×‘×™)", station: "Business Bay", walk: "8 ×“×§'", dist: "×§× ×™×•×Ÿ ×××–××™×”" },
    { id: "armani", name: "××¨×× ×™ ×§××£ (×‘×©×¨×™)", station: "Burj Khalifa / Dubai Mall", walk: "5 ×“×§'", dist: "××œ×•×Ÿ ××¨×× ×™" },
    { id: "tlv", name: "××¡×¢×“×ª TLV (×‘×©×¨×™)", station: "World Trade Centre", walk: "4 ×“×§'", dist: "××œ×•×Ÿ H" }
  ],
  "××˜×¨×§×¦×™×•×ª ×•×¦'×™×™× ×’'": [
    { id: "dubai_mall", name: "×§× ×™×•×Ÿ ×“×•×‘××™ / ×‘×•×¨×’' ×—×œ×™×¤×”", station: "Burj Khalifa / Dubai Mall", walk: "10 ×“×§'", dist: "×’×©×¨ ×××•×–×’" },
    { id: "frame_v", name: "×”××¡×’×¨×ª (Dubai Frame)", station: "Max", walk: "10 ×“×§'", dist: "Zabeel Park" },
    { id: "ansari_r", name: "××œ ×× ×¡×¨×™ ×¦'×™×™× ×’'", station: "Al Rigga", walk: "3 ×“×§'", dist: "×œ×™×“ ×”××˜×¨×•" }
  ]
};

const fromSel = document.getElementById('from');
const toSel = document.getElementById('to');

function fillSelects() {
  let html = '';
  for (let cat in DATA) {
    html += `<optgroup label="${cat}">`;
    DATA[cat].forEach(p => { html += `<option value="${p.id}">${p.name}</option>`; });
    html += `</optgroup>`;
  }
  fromSel.innerHTML = html;
  toSel.innerHTML = html;
  fromSel.value = "air3"; // ×‘×¨×™×¨×ª ××—×“×œ ××”×©×“×”
  toSel.value = "lux"; // ×œ××œ×•×Ÿ
}

function buildRoute() {
  let p1 = null, p2 = null;
  for (let cat in DATA) {
    let f1 = DATA[cat].find(p => p.id === fromSel.value); if(f1) p1 = f1;
    let f2 = DATA[cat].find(p => p.id === toSel.value); if(f2) p2 = f2;
  }
  
  if(!p1 || !p2) return;

  const idx1 = RED_LINE.indexOf(p1.station);
  const idx2 = RED_LINE.indexOf(p2.station);

  if (idx1 === -1 || idx2 === -1) {
    alert("×ª×§×œ×” ×‘×—×™×©×•×‘ ×”×ª×—× ×•×ª.");
    return;
  }
  
  document.getElementById('output').style.display = 'block';
  const start = Math.min(idx1, idx2);
  const end = Math.max(idx1, idx2);
  let stations = RED_LINE.slice(start, end + 1);
  if (idx1 > idx2) stations.reverse();

  const numStops = stations.length - 1;

  let html = `<div class="v-step"><div class="v-dot active"></div><div class="v-text"><b>×¦× ×: ${p1.name}</b><br>×¢×œ×™×” ×‘×ª×—× ×ª <b>${p1.station}</b></div></div>`;
  for (let i = 1; i < stations.length - 1; i++) {
    html += `<div class="v-step"><div class="v-dot small"></div><div class="v-text" style="color:#64748b; font-size:12px;">${stations[i]}</div></div>`;
  }
  
  let airportNote = "";
  if(p2.id === "air1" || p2.id === "air3") {
    airportNote = "<br><small>ğŸ’¡ ×”××˜×¨×• ×¢×•×¦×¨ ×‘×˜×¨××™× ×œ 1 ×•-3. ×œ×˜×¨××™× ×œ 2 ×™×© ×œ×§×—×ª ×©××˜×œ ××”×˜×¨××™× ×œ×™× ×”××œ×•.</small>";
  }

  html += `
    <div class="v-step">
      <div class="v-dot active"></div>
      <div class="v-text">
        <b>×¨×“ ×‘×ª×—× ×ª: ${p2.station}</b>
        <div class="walk-box">
          <span class="stops-count">×¡×¤×•×¨: ${numStops} ×ª×—× ×•×ª ××”×¢×œ×™×™×”</span>
          ğŸš¶â€â™‚ï¸ <b>×”×’×¢×” ×œ×™×¢×“:</b><br>
          ${p2.name} - ×›-${p2.walk} ×”×œ×™×›×” ${airportNote}
        </div>
      </div>
    </div>`;

  document.getElementById('vMap').innerHTML = html;
  window.scrollTo({ top: document.getElementById('output').offsetTop - 20, behavior: 'smooth' });
}
fillSelects();
</script>
</body>
</html>
