<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>מתכון לפיצה / פוליש</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#fff7ec;
      --panel:#ffffff;
      --accent:#d97a2b;
      --accent-soft:rgba(217,122,43,0.12);
      --text:#2a2a2a;
      --muted:#6a6a6a;
      --green:#3e7d4a;
      --danger:#b41010;
      --radius:18px;
      --shadow:0 16px 45px rgba(0,0,0,0.08);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      background:radial-gradient(circle at top, #ffe2b3 0%, #fff7ec 35%, #fff 100%);
      font-family:'Heebo',system-ui,-apple-system,Segoe UI,Arial,sans-serif;
      color:var(--text);
      line-height:1.35;
      padding:18px;
    }
    .wrap{max-width:920px;margin:0 auto;}
    .head{
      display:flex;
      justify-content:space-between;
      gap:14px;
      align-items:center;
      margin-bottom:16px;
    }
    .title{font-size:1.8rem;font-weight:700;color:#c7630e;}
    .badge{
      background:var(--accent-soft);
      color:var(--accent);
      padding:6px 12px;
      border-radius:999px;
      font-size:.78rem;
      font-weight:600;
    }
    .card{
      background:var(--panel);
      border:1px solid rgba(216,165,109,0.18);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:16px 18px 18px;
      margin-bottom:16px;
    }
    .inputs{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
      gap:14px;
      margin-top:10px;
      margin-bottom:10px;
    }
    label{
      display:block;
      font-size:.78rem;
      margin-bottom:4px;
      color:var(--muted);
      font-weight:500;
    }
    select,input[type=number]{
      width:100%;
      padding:7px 10px;
      border:1px solid #e9dbcc;
      border-radius:10px;
      font-size:.9rem;
      background:#fff;
    }
    .check-line{
      display:flex;
      gap:8px;
      align-items:center;
      margin-top:6px;
      font-size:.85rem;
    }
    .sections{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
      gap:14px;
    }
    .sec-title{
      font-weight:600;
      margin-bottom:6px;
      display:flex;
      align-items:center;
      gap:6px;
    }
    .pill{
      display:inline-block;
      background:rgba(62,125,74,0.08);
      color:var(--green);
      font-size:.7rem;
      padding:2px 8px;
      border-radius:999px;
    }
    table{
      width:100%;
      border-collapse:collapse;
      background:rgba(255,247,236,0.35);
      border-radius:14px;
      overflow:hidden;
    }
    th,td{
      text-align:right;
      padding:9px 6px;
      font-size:1rem;
      border-bottom:1px solid rgba(240,209,165,0.35);
    }
    th{
      background:rgba(247,210,154,0.28);
      font-weight:600;
    }
    td strong{
      font-weight:700;
      font-size:1.15rem;
    }
    .note{
      background:#fff1df;
      border:1px dashed rgba(217,122,43,0.45);
      border-radius:12px;
      padding:8px 10px;
      font-size:.78rem;
      margin-top:10px;
    }
    .steps{counter-reset:step;}
    .step{
      background:#fff;
      border:1px solid rgba(229,207,178,0.55);
      border-radius:14px;
      padding:12px;
      margin-bottom:10px;
      display:flex;
      gap:10px;
      align-items:flex-start;
    }
    .step::before{
      counter-increment:step;
      content:counter(step);
      background:var(--accent);
      color:#fff;
      width:26px;height:26px;
      display:flex;
      align-items:center;
      justify-content:center;
      border-radius:10px;
      font-weight:700;
      flex:0 0 26px;
    }
    .warn{
      background:rgba(180,16,16,0.08);
      border:1px solid rgba(180,16,16,0.23);
      border-radius:12px;
      padding:8px 10px;
      font-size:.78rem;
      color:#880707;
      margin-top:8px;
    }
    .footer{
      text-align:center;
      font-size:.7rem;
      color:#aaa;
      margin-top:18px;
    }
    @media (max-width:600px){
      .head{flex-direction:column;align-items:flex-start;}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="head">
      <div class="title">מתכון לפיצה / פוליש</div>
      <div class="badge">מחשבון בצק לפיצה</div>
    </div>

    <!-- קלט -->
    <div class="card">
      <div style="font-weight:600;">בחר איך אתה רוצה לחשב</div>
      <div class="inputs">
        <div>
          <label for="mode">סוג חישוב</label>
          <select id="mode">
            <option value="flour">קמח</option>
            <option value="pizzas">כמות פיצות רצויות</option>
          </select>
        </div>
        <div id="flour-box">
          <label for="flourKg">כמה ק״ג קמח?</label>
          <input type="number" id="flourKg" min="0" step="0.1" value="1">
        </div>
        <div id="pizza-box" style="display:none;">
          <label for="pizzaCount">כמה פיצות אתה רוצה?</label>
          <input type="number" id="pizzaCount" min="1" step="1" value="6">
        </div>
        <div>
          <label for="season">עונה</label>
          <select id="season">
            <option value="summer">קיץ</option>
            <option value="winter">חורף</option>
          </select>
        </div>
      </div>
      <label class="check-line">
        <input type="checkbox" id="usePolish">
        להשתמש בבצק פוליש (12 שעות לפני)
      </label>
    </div>

    <!-- כרטיס הכמויות הרגיל (נעלם כשיש פוליש) -->
    <div id="quantities-card" class="card">
      <div class="sec-title">
        כמות סופית לבצק
        <span class="pill" id="ballCountLabel">6 כדורים</span>
      </div>
      <table>
        <thead>
          <tr>
            <th>מרכיב</th>
            <th>כמות</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>קמח כולל</td><td><strong id="totalFlour">1000</strong> גרם</td></tr>
          <tr><td>מים</td><td><strong id="totalWater">650</strong> גרם</td></tr>
          <tr><td>שמרים</td><td><strong id="totalYeast">3</strong> גרם</td></tr>
          <tr><td>מלח</td><td><strong id="totalSalt">25</strong> גרם</td></tr>
        </tbody>
      </table>
      <div class="note">
        המלח מחושב תמיד לפי סך הקמח: 25 גרם לכל 1 ק״ג.
      </div>
    </div>

    <!-- כרטיסי הפוליש (באמצע) -->
    <div id="polishFlow" style="display:none;">
      <div class="sections">
        <div class="card">
          <div class="sec-title">
            פוליש – להכין 12 שעות לפני
            <span class="pill">שלב פוליש</span>
          </div>
          <table>
            <tbody>
              <tr><td>קמח לפוליש</td><td><strong>200</strong> גרם</td></tr>
              <tr><td>מים לפוליש</td><td><strong>200</strong> גרם</td></tr>
              <tr><td>שמרים לפוליש</td><td><strong>1.4</strong> גרם</td></tr>
            </tbody>
          </table>
          <div class="note">לא מוסיפים מלח לפוליש.</div>
        </div>
        <div class="card">
          <div class="sec-title">בצק ראשי אחרי הפחתת פוליש <span class="pill">אחרי 12 שעות</span></div>
          <table>
            <tbody>
              <tr><td>קמח לבצק</td><td><strong id="mainFlour">800</strong> גרם</td></tr>
              <tr><td>מים לבצק</td><td><strong id="mainWater">450</strong> גרם</td></tr>
              <tr><td>שמרים לבצק</td><td><strong id="mainYeast">1.6</strong> גרם</td></tr>
              <tr><td>מלח (להוסיף בסוף)</td><td><strong id="mainSalt">25</strong> גרם</td></tr>
            </tbody>
          </table>
          <div class="note">את המלח עדיין מוסיפים רק 2 דקות לפני סוף הערבוב.</div>
        </div>
      </div>
    </div>

    <!-- שלבי ההכנה -->
    <div class="card">
      <div class="sec-title">שלבי ההכנה</div>
      <div class="steps">
        <div class="step" id="stepPolish" style="display:none;">
          להכין פוליש 12 שעות לפני: 200 גרם קמח + 200 גרם מים + 1.4 גרם שמרים בקופסה סגורה.
        </div>
        <div class="step">לערבב קמח, מים ושמרים עד 8–10 דקות מקסימום. לשמור על 24.0°C.</div>
        <div class="step">את המלח מוסיפים רק 2 דקות לפני סיום הערבוב במיקסר.</div>
        <div class="step">לקפל שתי סטים ואז ליצור כדור גדול, לכסות עם סיר / קערה, להתפיח 30 דקות.</div>
        <div class="step">שוב לקפל שתי סטים ואז ליצור כדור גדול, לכסות עם סיר / קערה ולהתפיח 30 דקות.</div>
        <div class="step">לכסות את כל הכדורים עם שמיכה / מגבת עבה לעוד בערך שעה.</div>
        <div class="step">לפתוח את הבצק רק עם קמח סמולינה.</div>
      </div>
      <div class="warn">אם בזמן הלישה הטמפרטורה של הבצק מתקרבת ל־24°C – עוצרים.</div>
    </div>

    <div class="footer">גרסה 1.1.7 • נבנה by charles.s</div>
  </div>

  <script>
    const modeEl=document.getElementById('mode');
    const flourBox=document.getElementById('flour-box');
    const pizzaBox=document.getElementById('pizza-box');
    const flourKgEl=document.getElementById('flourKg');
    const pizzaCountEl=document.getElementById('pizzaCount');
    const seasonEl=document.getElementById('season');
    const usePolishEl=document.getElementById('usePolish');

    const quantitiesCard=document.getElementById('quantities-card');
    const polishFlow=document.getElementById('polishFlow');
    const stepPolish=document.getElementById('stepPolish');

    const totalFlourEl=document.getElementById('totalFlour');
    const totalWaterEl=document.getElementById('totalWater');
    const totalYeastEl=document.getElementById('totalYeast');
    const totalSaltEl=document.getElementById('totalSalt');
    const mainFlourEl=document.getElementById('mainFlour');
    const mainWaterEl=document.getElementById('mainWater');
    const mainYeastEl=document.getElementById('mainYeast');
    const mainSaltEl=document.getElementById('mainSalt');
    const ballCountLabel=document.getElementById('ballCountLabel');

    function recalc(){
      const mode=modeEl.value;
      let flourGrams=0, pizzaCount=0;

      if(mode==='flour'){
        const kg=parseFloat(flourKgEl.value)||0;
        flourGrams=kg*1000;
        pizzaCount=Math.round(kg*6);
      }else{
        const pcs=parseFloat(pizzaCountEl.value)||0;
        pizzaCount=pcs;
        flourGrams=pcs*(1000/6);
      }

      const waterGrams=flourGrams*0.65;
      const yeastPerKg=seasonEl.value==='summer'?3:5;
      const yeastGrams=(flourGrams/1000)*yeastPerKg;
      const saltGrams=(flourGrams/1000)*25;

      totalFlourEl.textContent=flourGrams.toFixed(0);
      totalWaterEl.textContent=waterGrams.toFixed(0);
      totalYeastEl.textContent=yeastGrams.toFixed(1);
      totalSaltEl.textContent=saltGrams.toFixed(0);
      ballCountLabel.textContent=pizzaCount+" כדורים";

      if(usePolishEl.checked){
        // מסתיר את הכרטיס העליון כדי לא לחזור על עצמו
        quantitiesCard.style.display='none';
        // מציג את כרטיסי הפוליש
        polishFlow.style.display='';
        // מציג גם את שלב הפוליש בראש השלבים (סה"כ 8)
        stepPolish.style.display='';

        const PF=200, PW=200, PY=1.4;
        let mainFlour=flourGrams-PF;
        let mainWater=waterGrams-PW;
        let mainYeast=yeastGrams-PY;
        if(mainFlour<0) mainFlour=0;
        if(mainWater<0) mainWater=0;
        if(mainYeast<0) mainYeast=0;
        mainFlourEl.textContent=mainFlour.toFixed(0);
        mainWaterEl.textContent=mainWater.toFixed(0);
        mainYeastEl.textContent=mainYeast.toFixed(1);
        // מלח תמיד לפי סך הקמח הכולל
        mainSaltEl.textContent=saltGrams.toFixed(0);
      }else{
        quantitiesCard.style.display='';
        polishFlow.style.display='none';
        stepPolish.style.display='none';
      }
    }

    modeEl.onchange=()=>{
      if(modeEl.value==='flour'){
        flourBox.style.display='';
        pizzaBox.style.display='none';
      }else{
        flourBox.style.display='none';
        pizzaBox.style.display='';
      }
      recalc();
    };
    flourKgEl.oninput=pizzaCountEl.oninput=seasonEl.onchange=usePolishEl.onchange=recalc;

    recalc();
  </script>
</body>
</html>
