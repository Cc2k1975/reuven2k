<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>שידור חי</title>
<style>
body {
  margin:0;
  overflow:hidden;
  background:#000;
  font-family:"Heebo",Arial,sans-serif;
}
.player-shell {
  position:fixed;
  inset:0;
  background:#000;
  width:100vw;
  height:100vh;
  overflow:hidden;
}
.rotator {
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%) rotate(-90deg) scale(1.7);
  transform-origin:center center;
  background:#000;
  display:flex;
  justify-content:center;
  align-items:center;
}
.rotator iframe {
  border:none;
  width:100vw;
  height:100vh;
}

/* לוח תוצאות */
.score-overlay-wrapper {
  position:fixed;
  top:12px;
  left:8px;
  z-index:10;
  display:flex;
  flex-direction:column;
  align-items:flex-start;
  font-family:Heebo,Arial,sans-serif;
  pointer-events:none;
}
.overlay-body {
  display:flex;
  align-items:center;
  background:#1a1446;
  color:#fff;
  font-size:0.9rem;
  font-weight:600;
  border-radius:6px;
  box-shadow:0 4px 12px rgba(0,0,0,0.7);
}
.team-side {
  display:flex;
  align-items:center;
}
.team-name {
  padding:4px 8px;
}
.team-score {
  background:#f4dd3a;
  color:#000;
  padding:4px 6px;
  font-weight:700;
  font-family:"Roboto Mono",monospace;
}
.timer-block {
  background:#fff;
  color:#000;
  font-weight:700;
  padding:4px 8px;
  font-family:"Roboto Mono",monospace;
}

/* כפתור מסך מלא במרכז */
.fullscreen-btn {
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  z-index:100;
  background:rgba(0,0,0,0.55);
  color:#00ffa9;
  border:1px solid rgba(0,255,169,0.6);
  border-radius:12px;
  padding:14px 26px;
  font-size:1.2rem;
  font-weight:600;
  cursor:pointer;
  box-shadow:0 8px 24px rgba(0,0,0,0.8);
  transition:background 0.3s,transform 0.3s;
}
.fullscreen-btn:hover {
  background:rgba(0,0,0,0.8);
  transform:translate(-50%,-50%) scale(1.05);
}

/* אייקון הערוץ למעלה */
.channel-logo {
  position:fixed;
  top:8px;
  right:8px;
  width:48px;
  height:48px;
  border-radius:50%;
  border:2px solid rgba(255,255,255,0.4);
  box-shadow:0 0 10px rgba(0,0,0,0.7);
  cursor:pointer;
  z-index:120;
}

/* חלון שליטה */
.edit-popup {
  position:fixed;
  top:60px;
  right:50%;
  transform:translateX(50%);
  background:#1a1f2b;
  color:#fff;
  border-radius:12px;
  box-shadow:0 30px 60px rgba(0,0,0,0.9);
  border:1px solid rgba(255,255,255,0.15);
  padding:20px;
  width:320px;
  max-width:90vw;
  font-size:0.9rem;
  display:none;
  z-index:200;
}
.edit-popup h2 {
  font-size:1rem;
  text-align:center;
  margin-top:0;
  margin-bottom:14px;
}
.edit-field {margin-bottom:14px;}
.team-line {
  display:flex;
  gap:8px;
}
.team-line input {
  flex:1;
}
.score-input {
  flex:0 0 60px;
  text-align:center;
}
.edit-input {
  border-radius:8px;
  border:1px solid rgba(255,255,255,0.2);
  background:#0f1115;
  color:#fff;
  padding:10px;
  font-size:0.9rem;
  width:100%;
}
.ctl-btn {
  width:100%;
  padding:10px;
  border:1px solid rgba(255,255,255,0.2);
  background:#0f1115;
  color:#fff;
  border-radius:8px;
  cursor:pointer;
  margin-bottom:8px;
  font-size:0.9rem;
  font-weight:600;
}
</style>
</head>
<body>

<div class="player-shell" id="videoContainer">
  <div class="rotator">
    <iframe id="livePlayer"
      src="https://www.youtube.com/embed/live_stream?channel=UCu2doG-TFmd4b2paosdg1xg&autoplay=1&mute=1&playsinline=1"
      allow="autoplay; encrypted-media; picture-in-picture; fullscreen"
      allowfullscreen></iframe>
  </div>
</div>

<!-- לוח תוצאה -->
<div class="score-overlay-wrapper">
  <div class="overlay-body">
    <div class="team-side">
      <div class="team-name" id="teamHome_name">הפועל חיפה</div>
      <div class="team-score" id="teamHome_score">0</div>
    </div>
    <div class="timer-block" id="liveTimer">00:00</div>
    <div class="team-side">
      <div class="team-score" id="teamAway_score">0</div>
      <div class="team-name" id="teamAway_name">מכבי חיפה</div>
    </div>
  </div>
</div>

<!-- כפתור מסך מלא במרכז -->
<button class="fullscreen-btn" id="fullscreenBtn">⛶ מסך מלא</button>

<!-- תמונה עגולה (כניסה לחלון הסודי) -->
<img class="channel-logo" id="channelLogo"
  src="https://yt3.ggpht.com/XEIE69D8DP1huYwLhSrHbEPhU9nfLjqSX7P8mZ8NLceUeDX68BoH1ORcxWy-NufREOy9xo1Dkw=s600-c-k-c0x00ffffff-no-rj-rp-mo" 
  alt="ערוץ">

<!-- חלון שליטה -->
<div class="edit-popup" id="editPopup">
  <h2>שליטה בשידור</h2>

  <div class="edit-field">
    <label>שם הליגה</label>
    <input class="edit-input" id="league_input" value="שידורי חי הפועל חיפה נערים א' 2009">
  </div>

  <div class="edit-field">
    <label>קבוצה ביתית + תוצאה</label>
    <div class="team-line">
      <input id="teamHome_input" class="edit-input" value="הפועל חיפה">
      <input id="scoreHome_input" class="edit-input score-input" type="number" min="0" value="0">
    </div>
  </div>

  <div class="edit-field">
    <label>קבוצה אורחת + תוצאה</label>
    <div class="team-line">
      <input id="teamAway_input" class="edit-input" value="מכבי חיפה">
      <input id="scoreAway_input" class="edit-input score-input" type="number" min="0" value="0">
    </div>
  </div>

  <button class="ctl-btn" id="startBtn">הפעל שעון</button>
  <button class="ctl-btn" id="pauseBtn">הפסקת מחצית / המשך</button>
  <button class="ctl-btn" id="resetBtn">איפוס שעון</button>
  <button class="ctl-btn" id="closePopupBtn">יציאה</button>
</div>

<script>
// ===== מסך מלא =====
const videoContainer = document.getElementById('videoContainer');
const fsBtn = document.getElementById('fullscreenBtn');
fsBtn.addEventListener('click', () => {
  if (!document.fullscreenElement) {
    videoContainer.requestFullscreen().catch(err => alert('לא ניתן לעבור למסך מלא: '+err.message));
  } else {
    document.exitFullscreen();
  }
});
document.addEventListener('fullscreenchange', () => {
  if (document.fullscreenElement) {
    fsBtn.style.display="none";
  } else {
    fsBtn.style.display="block";
  }
});

// ===== לוגו + חלון שליטה =====
const logo = document.getElementById('channelLogo');
const popup = document.getElementById('editPopup');
logo.addEventListener('click', ()=>{
  popup.style.display = popup.style.display==="block" ? "none" : "block";
});
document.getElementById('closePopupBtn').addEventListener('click',()=>{
  popup.style.display="none";
});

// ===== שעון =====
let startTime=null;
let running=false;
let pausedTime=0;
function formatTime(sec){
  const m = Math.floor(sec/60);
  const s = sec%60;
  return `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
}
setInterval(()=>{
  if(running && startTime){
    const elapsed = Math.floor((Date.now()-startTime+pausedTime)/1000);
    document.getElementById('liveTimer').textContent=formatTime(elapsed);
  }
},1000);
document.getElementById('startBtn').onclick=()=>{
  startTime=Date.now();
  running=true;
  pausedTime=0;
};
document.getElementById('pauseBtn').onclick=()=>{
  if(running){
    pausedTime += Date.now()-startTime;
    running=false;
  }else{
    startTime=Date.now();
    running=true;
  }
};
document.getElementById('resetBtn').onclick=()=>{
  running=false;
  startTime=null;
  pausedTime=0;
  document.getElementById('liveTimer').textContent="00:00";
};

// ===== עדכון תוצאות =====
function bind(idInput,idOutput){
  const inp=document.getElementById(idInput);
  const out=document.getElementById(idOutput);
  inp.addEventListener('input',()=>{out.textContent=inp.value});
  out.textContent=inp.value;
}
bind("teamHome_input","teamHome_name");
bind("teamAway_input","teamAway_name");
bind("scoreHome_input","teamHome_score");
bind("scoreAway_input","teamAway_score");
</script>
</body>
</html>
