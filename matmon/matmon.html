<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>משחק המציאה הבלתי אפשרי</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #1a1a1a;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
        }

        #game-wrapper {
            text-align: center;
            max-width: 900px;
        }

        .header-info {
            background: rgba(0,0,0,0.7);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-around;
            width: 100%;
        }

        #game-container {
            position: relative;
            cursor: crosshair;
            border: 4px solid #333;
            border-radius: 8px;
            overflow: hidden;
            line-height: 0; /* מונע רווחים מתחת לתמונה */
        }

        #game-image {
            max-width: 100%;
            height: auto;
            user-select: none;
        }

        .stat-box { font-size: 20px; font-weight: bold; }
        #timer { color: #ff5e57; }
        #instruction { color: #ffd32a; margin: 10px 0; font-size: 18px; }

        /* אפקטים */
        .wrong-click { animation: shake 0.2s; border-color: red; }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
    </style>
</head>
<body>

    <div id="game-wrapper">
        <div class="header-info">
            <div class="stat-box">שלב: <span id="level-num">1</span></div>
            <div class="stat-box">זמן: <span id="timer">20</span></div>
        </div>
        
        <div id="instruction">חפש את ה**אבטיח** הקטן!</div>

        <div id="game-container">
            <img id="game-image" src="1.jpg" alt="Game Stage">
        </div>
    </div>

    <script>
        // הגדרות השלבים
        const levels = [
            { 
                img: "1.jpg", 
                targetName: "אבטיח", 
                x: 75, y: 82, // מיקום באחוזים - שנה את אלו לפי איפה שהחבאת את האבטיח
                radius: 4 
            },
            { 
                img: "2.jpg", 
                targetName: "ציפור", 
                x: 15, y: 10, // מיקום דמיוני לתמונה השנייה
                radius: 3 
            }
        ];

        let currentLevel = 0;
        let timeLeft = 20;
        let timerInterval;

        const img = document.getElementById('game-image');
        const timerDisplay = document.getElementById('timer');
        const levelDisplay = document.getElementById('level-num');
        const instrDisplay = document.getElementById('instruction');
        const container = document.getElementById('game-container');

        function startLevel() {
            const levelData = levels[currentLevel];
            img.src = levelData.img;
            levelDisplay.innerText = currentLevel + 1;
            instrDisplay.innerText = `חפש את ה**${levelData.targetName}**!`;
            timeLeft = 20;
            timerDisplay.innerText = timeLeft;

            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                timeLeft--;
                timerDisplay.innerText = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    alert("אופס! נגמר הזמן.");
                    currentLevel = 0; // חוזר להתחלה
                    startLevel();
                }
            }, 1000);
        }

        container.addEventListener('mousedown', function(e) {
            const rect = img.getBoundingClientRect();
            const clickX = ((e.clientX - rect.left) / rect.width) * 100;
            const clickY = ((e.clientY - rect.top) / rect.height) * 100;

            const levelData = levels[currentLevel];
            
            // חישוב מרחק מהמטרה
            const dist = Math.sqrt(Math.pow(clickX - levelData.x, 2) + Math.pow(clickY - levelData.y, 2));

            if (dist <= levelData.radius) {
                // הצלחה!
                clearInterval(timerInterval);
                if (currentLevel < levels.length - 1) {
                    alert("מצאת! עוברים לשלב הקשה באמת...");
                    currentLevel++;
                    startLevel();
                } else {
                    alert("ניצחת את כל המשחק! אתה אלוף!");
                }
            } else {
                // טעות
                timeLeft -= 3; // קנס זמן
                container.classList.add('wrong-click');
                setTimeout(() => container.classList.remove('wrong-click'), 200);
            }
        });

        // התחלת המשחק
        window.onload = startLevel;
    </script>
</body>
</html>
